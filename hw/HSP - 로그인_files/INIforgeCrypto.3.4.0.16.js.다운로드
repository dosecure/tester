!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.INIforgeCrypto=t():e.INIforgeCrypto=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist",t(t.s=1)}([function(e,t,r){var n,a;/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(t,r){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(t)}("undefined"!=typeof window?window:this,function(r,i){"use strict";function s(e,t,r){t=t||le;var n,a=t.createElement("script");if(a.text=e,r)for(n in Ae)r[n]&&(a[n]=r[n]);t.head.appendChild(a).parentNode.removeChild(a)}function o(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ge[me.call(e)]||"object":typeof e}function u(e){var t=!!e&&"length"in e&&e.length,r=o(e);return!Se(e)&&!Ie(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}function c(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function l(e,t,r){return Se(t)?be.grep(e,function(e,n){return!!t.call(e,n,e)!==r}):t.nodeType?be.grep(e,function(e){return e===t!==r}):"string"!=typeof t?be.grep(e,function(e){return ye.call(t,e)>-1!==r}):be.filter(t,e,r)}function p(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function f(e){var t={};return be.each(e.match(xe)||[],function(e,r){t[r]=!0}),t}function d(e){return e}function h(e){throw e}function y(e,t,r,n){var a;try{e&&Se(a=e.promise)?a.call(e).done(t).fail(r):e&&Se(a=e.then)?a.call(e,t,r):t.apply(void 0,[e].slice(n))}catch(e){r.apply(void 0,[e])}}function g(){le.removeEventListener("DOMContentLoaded",g),r.removeEventListener("load",g),be.ready()}function m(e,t){return t.toUpperCase()}function v(e){return e.replace(Me,"ms-").replace(Ge,m)}function C(){this.expando=be.expando+C.uid++}function E(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:He.test(e)?JSON.parse(e):e)}function T(e,t,r){var n;if(void 0===r&&1===e.nodeType)if(n="data-"+t.replace(Qe,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(n))){try{r=E(r)}catch(e){}je.set(e,t,r)}else r=void 0;return r}function S(e,t,r,n){var a,i,s=20,o=n?function(){return n.cur()}:function(){return be.css(e,t,"")},u=o(),c=r&&r[3]||(be.cssNumber[t]?"":"px"),l=(be.cssNumber[t]||"px"!==c&&+u)&&ze.exec(be.css(e,t));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;s--;)be.style(e,t,l+c),(1-i)*(1-(i=o()/u||.5))<=0&&(s=0),l/=i;l*=2,be.style(e,t,l+c),r=r||[]}return r&&(l=+l||+u||0,a=r[1]?l+(r[1]+1)*r[2]:+r[2],n&&(n.unit=c,n.start=l,n.end=a)),a}function I(e){var t,r=e.ownerDocument,n=e.nodeName,a=Ze[n];return a||(t=r.body.appendChild(r.createElement(n)),a=be.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),Ze[n]=a,a)}function A(e,t){for(var r,n,a=[],i=0,s=e.length;i<s;i++)n=e[i],n.style&&(r=n.style.display,t?("none"===r&&(a[i]=qe.get(n,"display")||null,a[i]||(n.style.display="")),""===n.style.display&&Ye(n)&&(a[i]=I(n))):"none"!==r&&(a[i]="none",qe.set(n,"display",r)));for(i=0;i<s;i++)null!=a[i]&&(e[i].style.display=a[i]);return e}function b(e,t){var r;return r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&c(e,t)?be.merge([e],r):r}function N(e,t){for(var r=0,n=e.length;r<n;r++)qe.set(e[r],"globalEval",!t||qe.get(t[r],"globalEval"))}function B(e,t,r,n,a){for(var i,s,u,c,l,p,f=t.createDocumentFragment(),d=[],h=0,y=e.length;h<y;h++)if((i=e[h])||0===i)if("object"===o(i))be.merge(d,i.nodeType?[i]:i);else if(nt.test(i)){for(s=s||f.appendChild(t.createElement("div")),u=(et.exec(i)||["",""])[1].toLowerCase(),c=rt[u]||rt._default,s.innerHTML=c[1]+be.htmlPrefilter(i)+c[2],p=c[0];p--;)s=s.lastChild;be.merge(d,s.childNodes),s=f.firstChild,s.textContent=""}else d.push(t.createTextNode(i));for(f.textContent="",h=0;i=d[h++];)if(n&&be.inArray(i,n)>-1)a&&a.push(i);else if(l=be.contains(i.ownerDocument,i),s=b(f.appendChild(i),"script"),l&&N(s),r)for(p=0;i=s[p++];)tt.test(i.type||"")&&r.push(i);return f}function w(){return!0}function R(){return!1}function k(){try{return le.activeElement}catch(e){}}function _(e,t,r,n,a,i){var s,o;if("object"==typeof t){"string"!=typeof r&&(n=n||r,r=void 0);for(o in t)_(e,o,r,n,t[o],i);return e}if(null==n&&null==a?(a=r,n=r=void 0):null==a&&("string"==typeof r?(a=n,n=void 0):(a=n,n=r,r=void 0)),!1===a)a=R;else if(!a)return e;return 1===i&&(s=a,a=function(e){return be().off(e),s.apply(this,arguments)},a.guid=s.guid||(s.guid=be.guid++)),e.each(function(){be.event.add(this,t,a,n,r)})}function U(e,t){return c(e,"table")&&c(11!==t.nodeType?t:t.firstChild,"tr")?be(e).children("tbody")[0]||e:e}function L(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function D(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function P(e,t){var r,n,a,i,s,o,u,c;if(1===t.nodeType){if(qe.hasData(e)&&(i=qe.access(e),s=qe.set(t,i),c=i.events)){delete s.handle,s.events={};for(a in c)for(r=0,n=c[a].length;r<n;r++)be.event.add(t,a,c[a][r])}je.hasData(e)&&(o=je.access(e),u=be.extend({},o),je.set(t,u))}}function x(e,t){var r=t.nodeName.toLowerCase();"input"===r&&Je.test(e.type)?t.checked=e.checked:"input"!==r&&"textarea"!==r||(t.defaultValue=e.defaultValue)}function V(e,t,r,n){t=de.apply([],t);var a,i,o,u,c,l,p=0,f=e.length,d=f-1,h=t[0],y=Se(h);if(y||f>1&&"string"==typeof h&&!Te.checkClone&&lt.test(h))return e.each(function(a){var i=e.eq(a);y&&(t[0]=h.call(this,a,i.html())),V(i,t,r,n)});if(f&&(a=B(t,e[0].ownerDocument,!1,e,n),i=a.firstChild,1===a.childNodes.length&&(a=i),i||n)){for(o=be.map(b(a,"script"),L),u=o.length;p<f;p++)c=a,p!==d&&(c=be.clone(c,!0,!0),u&&be.merge(o,b(c,"script"))),r.call(e[p],c,p);if(u)for(l=o[o.length-1].ownerDocument,be.map(o,D),p=0;p<u;p++)c=o[p],tt.test(c.type||"")&&!qe.access(c,"globalEval")&&be.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?be._evalUrl&&be._evalUrl(c.src):s(c.textContent.replace(pt,""),l,c))}return e}function O(e,t,r){for(var n,a=t?be.filter(t,e):e,i=0;null!=(n=a[i]);i++)r||1!==n.nodeType||be.cleanData(b(n)),n.parentNode&&(r&&be.contains(n.ownerDocument,n)&&N(b(n,"script")),n.parentNode.removeChild(n));return e}function K(e,t,r){var n,a,i,s,o=e.style;return r=r||dt(e),r&&(s=r.getPropertyValue(t)||r[t],""!==s||be.contains(e.ownerDocument,e)||(s=be.style(e,t)),!Te.pixelBoxStyles()&&ft.test(s)&&ht.test(t)&&(n=o.width,a=o.minWidth,i=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=r.width,o.width=n,o.minWidth=a,o.maxWidth=i)),void 0!==s?s+"":s}function M(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function G(e){if(e in Et)return e;for(var t=e[0].toUpperCase()+e.slice(1),r=Ct.length;r--;)if((e=Ct[r]+t)in Et)return e}function F(e){var t=be.cssProps[e];return t||(t=be.cssProps[e]=G(e)||e),t}function q(e,t,r){var n=ze.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function j(e,t,r,n,a,i){var s="width"===t?1:0,o=0,u=0;if(r===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===r&&(u+=be.css(e,r+We[s],!0,a)),n?("content"===r&&(u-=be.css(e,"padding"+We[s],!0,a)),"margin"!==r&&(u-=be.css(e,"border"+We[s]+"Width",!0,a))):(u+=be.css(e,"padding"+We[s],!0,a),"padding"!==r?u+=be.css(e,"border"+We[s]+"Width",!0,a):o+=be.css(e,"border"+We[s]+"Width",!0,a));return!n&&i>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-u-o-.5))),u}function H(e,t,r){var n=dt(e),a=K(e,t,n),i="border-box"===be.css(e,"boxSizing",!1,n),s=i;if(ft.test(a)){if(!r)return a;a="auto"}return s=s&&(Te.boxSizingReliable()||a===e.style[t]),("auto"===a||!parseFloat(a)&&"inline"===be.css(e,"display",!1,n))&&(a=e["offset"+t[0].toUpperCase()+t.slice(1)],s=!0),(a=parseFloat(a)||0)+j(e,t,r||(i?"border":"content"),s,n,a)+"px"}function Q(e,t,r,n,a){return new Q.prototype.init(e,t,r,n,a)}function X(){St&&(!1===le.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(X):r.setTimeout(X,be.fx.interval),be.fx.tick())}function z(){return r.setTimeout(function(){Tt=void 0}),Tt=Date.now()}function W(e,t){var r,n=0,a={height:e};for(t=t?1:0;n<4;n+=2-t)r=We[n],a["margin"+r]=a["padding"+r]=e;return t&&(a.opacity=a.width=e),a}function Y(e,t,r){for(var n,a=(J.tweeners[t]||[]).concat(J.tweeners["*"]),i=0,s=a.length;i<s;i++)if(n=a[i].call(r,t,e))return n}function $(e,t,r){var n,a,i,s,o,u,c,l,p="width"in t||"height"in t,f=this,d={},h=e.style,y=e.nodeType&&Ye(e),g=qe.get(e,"fxshow");r.queue||(s=be._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,be.queue(e,"fx").length||s.empty.fire()})}));for(n in t)if(a=t[n],It.test(a)){if(delete t[n],i=i||"toggle"===a,a===(y?"hide":"show")){if("show"!==a||!g||void 0===g[n])continue;y=!0}d[n]=g&&g[n]||be.style(e,n)}if((u=!be.isEmptyObject(t))||!be.isEmptyObject(d)){p&&1===e.nodeType&&(r.overflow=[h.overflow,h.overflowX,h.overflowY],c=g&&g.display,null==c&&(c=qe.get(e,"display")),l=be.css(e,"display"),"none"===l&&(c?l=c:(A([e],!0),c=e.style.display||c,l=be.css(e,"display"),A([e]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===be.css(e,"float")&&(u||(f.done(function(){h.display=c}),null==c&&(l=h.display,c="none"===l?"":l)),h.display="inline-block")),r.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=r.overflow[0],h.overflowX=r.overflow[1],h.overflowY=r.overflow[2]})),u=!1;for(n in d)u||(g?"hidden"in g&&(y=g.hidden):g=qe.access(e,"fxshow",{display:c}),i&&(g.hidden=!y),y&&A([e],!0),f.done(function(){y||A([e]),qe.remove(e,"fxshow");for(n in d)be.style(e,n,d[n])})),u=Y(y?g[n]:0,n,f),n in g||(g[n]=u.start,y&&(u.end=u.start,u.start=0))}}function Z(e,t){var r,n,a,i,s;for(r in e)if(n=v(r),a=t[n],i=e[r],Array.isArray(i)&&(a=i[1],i=e[r]=i[0]),r!==n&&(e[n]=i,delete e[r]),(s=be.cssHooks[n])&&"expand"in s){i=s.expand(i),delete e[n];for(r in i)r in e||(e[r]=i[r],t[r]=a)}else t[n]=a}function J(e,t,r){var n,a,i=0,s=J.prefilters.length,o=be.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var t=Tt||z(),r=Math.max(0,c.startTime+c.duration-t),n=r/c.duration||0,i=1-n,s=0,u=c.tweens.length;s<u;s++)c.tweens[s].run(i);return o.notifyWith(e,[c,i,r]),i<1&&u?r:(u||o.notifyWith(e,[c,1,0]),o.resolveWith(e,[c]),!1)},c=o.promise({elem:e,props:be.extend({},t),opts:be.extend(!0,{specialEasing:{},easing:be.easing._default},r),originalProperties:t,originalOptions:r,startTime:Tt||z(),duration:r.duration,tweens:[],createTween:function(t,r){var n=be.Tween(e,c.opts,t,r,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var r=0,n=t?c.tweens.length:0;if(a)return this;for(a=!0;r<n;r++)c.tweens[r].run(1);return t?(o.notifyWith(e,[c,1,0]),o.resolveWith(e,[c,t])):o.rejectWith(e,[c,t]),this}}),l=c.props;for(Z(l,c.opts.specialEasing);i<s;i++)if(n=J.prefilters[i].call(c,e,l,c.opts))return Se(n.stop)&&(be._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return be.map(l,Y,c),Se(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),be.fx.timer(be.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c}function ee(e){return(e.match(xe)||[]).join(" ")}function te(e){return e.getAttribute&&e.getAttribute("class")||""}function re(e){return Array.isArray(e)?e:"string"==typeof e?e.match(xe)||[]:[]}function ne(e,t,r,n){var a;if(Array.isArray(t))be.each(t,function(t,a){r||Pt.test(e)?n(e,a):ne(e+"["+("object"==typeof a&&null!=a?t:"")+"]",a,r,n)});else if(r||"object"!==o(t))n(e,t);else for(a in t)ne(e+"["+a+"]",t[a],r,n)}function ae(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,a=0,i=t.toLowerCase().match(xe)||[];if(Se(r))for(;n=i[a++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function ie(e,t,r,n){function a(o){var u;return i[o]=!0,be.each(e[o]||[],function(e,o){var c=o(t,r,n);return"string"!=typeof c||s||i[c]?s?!(u=c):void 0:(t.dataTypes.unshift(c),a(c),!1)}),u}var i={},s=e===Xt;return a(t.dataTypes[0])||!i["*"]&&a("*")}function se(e,t){var r,n,a=be.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((a[r]?e:n||(n={}))[r]=t[r]);return n&&be.extend(!0,e,n),e}function oe(e,t,r){for(var n,a,i,s,o=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(a in o)if(o[a]&&o[a].test(n)){u.unshift(a);break}if(u[0]in r)i=u[0];else{for(a in r){if(!u[0]||e.converters[a+" "+u[0]]){i=a;break}s||(s=a)}i=i||s}if(i)return i!==u[0]&&u.unshift(i),r[i]}function ue(e,t,r,n){var a,i,s,o,u,c={},l=e.dataTypes.slice();if(l[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(i=l.shift();i;)if(e.responseFields[i]&&(r[e.responseFields[i]]=t),!u&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=i,i=l.shift())if("*"===i)i=u;else if("*"!==u&&u!==i){if(!(s=c[u+" "+i]||c["* "+i]))for(a in c)if(o=a.split(" "),o[1]===i&&(s=c[u+" "+o[0]]||c["* "+o[0]])){!0===s?s=c[a]:!0!==c[a]&&(i=o[0],l.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+u+" to "+i}}}return{state:"success",data:t}}var ce=[],le=r.document,pe=Object.getPrototypeOf,fe=ce.slice,de=ce.concat,he=ce.push,ye=ce.indexOf,ge={},me=ge.toString,ve=ge.hasOwnProperty,Ce=ve.toString,Ee=Ce.call(Object),Te={},Se=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},Ie=function(e){return null!=e&&e===e.window},Ae={type:!0,src:!0,noModule:!0},be=function(e,t){return new be.fn.init(e,t)},Ne=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;be.fn=be.prototype={jquery:"3.3.1",constructor:be,length:0,toArray:function(){return fe.call(this)},get:function(e){return null==e?fe.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=be.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return be.each(this,e)},map:function(e){return this.pushStack(be.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(fe.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:he,sort:ce.sort,splice:ce.splice},be.extend=be.fn.extend=function(){var e,t,r,n,a,i,s=arguments[0]||{},o=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[o]||{},o++),"object"==typeof s||Se(s)||(s={}),o===u&&(s=this,o--);o<u;o++)if(null!=(e=arguments[o]))for(t in e)r=s[t],n=e[t],s!==n&&(c&&n&&(be.isPlainObject(n)||(a=Array.isArray(n)))?(a?(a=!1,i=r&&Array.isArray(r)?r:[]):i=r&&be.isPlainObject(r)?r:{},s[t]=be.extend(c,i,n)):void 0!==n&&(s[t]=n));return s},be.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==me.call(e))&&(!(t=pe(e))||"function"==typeof(r=ve.call(t,"constructor")&&t.constructor)&&Ce.call(r)===Ee)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){s(e)},each:function(e,t){var r,n=0;if(u(e))for(r=e.length;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(Ne,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(u(Object(e))?be.merge(r,"string"==typeof e?[e]:e):he.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:ye.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,a=e.length;n<r;n++)e[a++]=t[n];return e.length=a,e},grep:function(e,t,r){for(var n=[],a=0,i=e.length,s=!r;a<i;a++)!t(e[a],a)!==s&&n.push(e[a]);return n},map:function(e,t,r){var n,a,i=0,s=[];if(u(e))for(n=e.length;i<n;i++)null!=(a=t(e[i],i,r))&&s.push(a);else for(i in e)null!=(a=t(e[i],i,r))&&s.push(a);return de.apply([],s)},guid:1,support:Te}),"function"==typeof Symbol&&(be.fn[Symbol.iterator]=ce[Symbol.iterator]),be.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ge["[object "+t+"]"]=t.toLowerCase()});var Be=/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(e){function t(e,t,r,n){var a,i,s,o,u,l,f,d=t&&t.ownerDocument,h=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return r;if(!n&&((t?t.ownerDocument||t:K)!==_&&k(t),t=t||_,L)){if(11!==h&&(u=ye.exec(e)))if(a=u[1]){if(9===h){if(!(s=t.getElementById(a)))return r;if(s.id===a)return r.push(s),r}else if(d&&(s=d.getElementById(a))&&V(t,s)&&s.id===a)return r.push(s),r}else{if(u[2])return Y.apply(r,t.getElementsByTagName(e)),r;if((a=u[3])&&E.getElementsByClassName&&t.getElementsByClassName)return Y.apply(r,t.getElementsByClassName(a)),r}if(E.qsa&&!j[e+" "]&&(!D||!D.test(e))){if(1!==h)d=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((o=t.getAttribute("id"))?o=o.replace(Ce,Ee):t.setAttribute("id",o=O),l=A(e),i=l.length;i--;)l[i]="#"+o+" "+p(l[i]);f=l.join(","),d=ge.test(e)&&c(t.parentNode)||t}if(f)try{return Y.apply(r,d.querySelectorAll(f)),r}catch(e){}finally{o===O&&t.removeAttribute("id")}}}return N(e.replace(ie,"$1"),t,r,n)}function r(){function e(r,n){return t.push(r+" ")>T.cacheLength&&delete e[t.shift()],e[r+" "]=n}var t=[];return e}function n(e){return e[O]=!0,e}function a(e){var t=_.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function i(e,t){for(var r=e.split("|"),n=r.length;n--;)T.attrHandle[r[n]]=t}function s(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function o(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function u(e){return n(function(t){return t=+t,n(function(r,n){for(var a,i=e([],r.length,t),s=i.length;s--;)r[a=i[s]]&&(r[a]=!(n[a]=r[a]))})})}function c(e){return e&&void 0!==e.getElementsByTagName&&e}function l(){}function p(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function f(e,t,r){var n=t.dir,a=t.next,i=a||n,s=r&&"parentNode"===i,o=G++;return t.first?function(t,r,a){for(;t=t[n];)if(1===t.nodeType||s)return e(t,r,a);return!1}:function(t,r,u){var c,l,p,f=[M,o];if(u){for(;t=t[n];)if((1===t.nodeType||s)&&e(t,r,u))return!0}else for(;t=t[n];)if(1===t.nodeType||s)if(p=t[O]||(t[O]={}),l=p[t.uniqueID]||(p[t.uniqueID]={}),a&&a===t.nodeName.toLowerCase())t=t[n]||t;else{if((c=l[i])&&c[0]===M&&c[1]===o)return f[2]=c[2];if(l[i]=f,f[2]=e(t,r,u))return!0}return!1}}function d(e){return e.length>1?function(t,r,n){for(var a=e.length;a--;)if(!e[a](t,r,n))return!1;return!0}:e[0]}function h(e,r,n){for(var a=0,i=r.length;a<i;a++)t(e,r[a],n);return n}function y(e,t,r,n,a){for(var i,s=[],o=0,u=e.length,c=null!=t;o<u;o++)(i=e[o])&&(r&&!r(i,n,a)||(s.push(i),c&&t.push(o)));return s}function g(e,t,r,a,i,s){return a&&!a[O]&&(a=g(a)),i&&!i[O]&&(i=g(i,s)),n(function(n,s,o,u){var c,l,p,f=[],d=[],g=s.length,m=n||h(t||"*",o.nodeType?[o]:o,[]),v=!e||!n&&t?m:y(m,f,e,o,u),C=r?i||(n?e:g||a)?[]:s:v;if(r&&r(v,C,o,u),a)for(c=y(C,d),a(c,[],o,u),l=c.length;l--;)(p=c[l])&&(C[d[l]]=!(v[d[l]]=p));if(n){if(i||e){if(i){for(c=[],l=C.length;l--;)(p=C[l])&&c.push(v[l]=p);i(null,C=[],c,u)}for(l=C.length;l--;)(p=C[l])&&(c=i?Z(n,p):f[l])>-1&&(n[c]=!(s[c]=p))}}else C=y(C===s?C.splice(g,C.length):C),i?i(null,s,C,u):Y.apply(s,C)})}function m(e){for(var t,r,n,a=e.length,i=T.relative[e[0].type],s=i||T.relative[" "],o=i?1:0,u=f(function(e){return e===t},s,!0),c=f(function(e){return Z(t,e)>-1},s,!0),l=[function(e,r,n){var a=!i&&(n||r!==B)||((t=r).nodeType?u(e,r,n):c(e,r,n));return t=null,a}];o<a;o++)if(r=T.relative[e[o].type])l=[f(d(l),r)];else{if(r=T.filter[e[o].type].apply(null,e[o].matches),r[O]){for(n=++o;n<a&&!T.relative[e[n].type];n++);return g(o>1&&d(l),o>1&&p(e.slice(0,o-1).concat({value:" "===e[o-2].type?"*":""})).replace(ie,"$1"),r,o<n&&m(e.slice(o,n)),n<a&&m(e=e.slice(n)),n<a&&p(e))}l.push(r)}return d(l)}function v(e,r){var a=r.length>0,i=e.length>0,s=function(n,s,o,u,c){var l,p,f,d=0,h="0",g=n&&[],m=[],v=B,C=n||i&&T.find.TAG("*",c),E=M+=null==v?1:Math.random()||.1,S=C.length;for(c&&(B=s===_||s||c);h!==S&&null!=(l=C[h]);h++){if(i&&l){for(p=0,s||l.ownerDocument===_||(k(l),o=!L);f=e[p++];)if(f(l,s||_,o)){u.push(l);break}c&&(M=E)}a&&((l=!f&&l)&&d--,n&&g.push(l))}if(d+=h,a&&h!==d){for(p=0;f=r[p++];)f(g,m,s,o);if(n){if(d>0)for(;h--;)g[h]||m[h]||(m[h]=z.call(u));m=y(m)}Y.apply(u,m),c&&!n&&m.length>0&&d+r.length>1&&t.uniqueSort(u)}return c&&(M=E,B=v),g};return a?n(s):s}var C,E,T,S,I,A,b,N,B,w,R,k,_,U,L,D,P,x,V,O="sizzle"+1*new Date,K=e.document,M=0,G=0,F=r(),q=r(),j=r(),H=function(e,t){return e===t&&(R=!0),0},Q={}.hasOwnProperty,X=[],z=X.pop,W=X.push,Y=X.push,$=X.slice,Z=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",re="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",ne=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",ae=new RegExp(ee+"+","g"),ie=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),se=new RegExp("^"+ee+"*,"+ee+"*"),oe=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),ue=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ce=new RegExp(ne),le=new RegExp("^"+te+"$"),pe={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ne),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,de=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/[+~]/,me=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),ve=function(e,t,r){var n="0x"+t-65536;return n!==n||r?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},Ce=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ee=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Te=function(){k()},Se=f(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Y.apply(X=$.call(K.childNodes),K.childNodes),X[K.childNodes.length].nodeType}catch(e){Y={apply:X.length?function(e,t){W.apply(e,$.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}E=t.support={},I=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},k=t.setDocument=function(e){var t,r,n=e?e.ownerDocument||e:K;return n!==_&&9===n.nodeType&&n.documentElement?(_=n,U=_.documentElement,L=!I(_),K!==_&&(r=_.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",Te,!1):r.attachEvent&&r.attachEvent("onunload",Te)),E.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),E.getElementsByTagName=a(function(e){return e.appendChild(_.createComment("")),!e.getElementsByTagName("*").length}),E.getElementsByClassName=he.test(_.getElementsByClassName),E.getById=a(function(e){return U.appendChild(e).id=O,!_.getElementsByName||!_.getElementsByName(O).length}),E.getById?(T.filter.ID=function(e){var t=e.replace(me,ve);return function(e){return e.getAttribute("id")===t}},T.find.ID=function(e,t){if(void 0!==t.getElementById&&L){var r=t.getElementById(e);return r?[r]:[]}}):(T.filter.ID=function(e){var t=e.replace(me,ve);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}},T.find.ID=function(e,t){if(void 0!==t.getElementById&&L){var r,n,a,i=t.getElementById(e);if(i){if((r=i.getAttributeNode("id"))&&r.value===e)return[i];for(a=t.getElementsByName(e),n=0;i=a[n++];)if((r=i.getAttributeNode("id"))&&r.value===e)return[i]}return[]}}),T.find.TAG=E.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):E.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,n=[],a=0,i=t.getElementsByTagName(e);if("*"===e){for(;r=i[a++];)1===r.nodeType&&n.push(r);return n}return i},T.find.CLASS=E.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&L)return t.getElementsByClassName(e)},P=[],D=[],(E.qsa=he.test(_.querySelectorAll))&&(a(function(e){U.appendChild(e).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||D.push("\\["+ee+"*(?:value|"+J+")"),e.querySelectorAll("[id~="+O+"-]").length||D.push("~="),e.querySelectorAll(":checked").length||D.push(":checked"),e.querySelectorAll("a#"+O+"+*").length||D.push(".#.+[+~]")}),a(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=_.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&D.push("name"+ee+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&D.push(":enabled",":disabled"),U.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(E.matchesSelector=he.test(x=U.matches||U.webkitMatchesSelector||U.mozMatchesSelector||U.oMatchesSelector||U.msMatchesSelector))&&a(function(e){E.disconnectedMatch=x.call(e,"*"),x.call(e,"[s!='']:x"),P.push("!=",ne)}),D=D.length&&new RegExp(D.join("|")),P=P.length&&new RegExp(P.join("|")),t=he.test(U.compareDocumentPosition),V=t||he.test(U.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},H=t?function(e,t){if(e===t)return R=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!E.sortDetached&&t.compareDocumentPosition(e)===r?e===_||e.ownerDocument===K&&V(K,e)?-1:t===_||t.ownerDocument===K&&V(K,t)?1:w?Z(w,e)-Z(w,t):0:4&r?-1:1)}:function(e,t){if(e===t)return R=!0,0;var r,n=0,a=e.parentNode,i=t.parentNode,o=[e],u=[t];if(!a||!i)return e===_?-1:t===_?1:a?-1:i?1:w?Z(w,e)-Z(w,t):0;if(a===i)return s(e,t);for(r=e;r=r.parentNode;)o.unshift(r);for(r=t;r=r.parentNode;)u.unshift(r);for(;o[n]===u[n];)n++;return n?s(o[n],u[n]):o[n]===K?-1:u[n]===K?1:0},_):_},t.matches=function(e,r){return t(e,null,null,r)},t.matchesSelector=function(e,r){if((e.ownerDocument||e)!==_&&k(e),r=r.replace(ue,"='$1']"),E.matchesSelector&&L&&!j[r+" "]&&(!P||!P.test(r))&&(!D||!D.test(r)))try{var n=x.call(e,r);if(n||E.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return t(r,_,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==_&&k(e),V(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==_&&k(e);var r=T.attrHandle[t.toLowerCase()],n=r&&Q.call(T.attrHandle,t.toLowerCase())?r(e,t,!L):void 0;return void 0!==n?n:E.attributes||!L?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.escape=function(e){return(e+"").replace(Ce,Ee)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,r=[],n=0,a=0;if(R=!E.detectDuplicates,w=!E.sortStable&&e.slice(0),e.sort(H),R){for(;t=e[a++];)t===e[a]&&(n=r.push(a));for(;n--;)e.splice(r[n],1)}return w=null,e},S=t.getText=function(e){var t,r="",n=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=S(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[n++];)r+=S(t);return r},T=t.selectors={cacheLength:50,createPseudo:n,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(me,ve),e[3]=(e[3]||e[4]||e[5]||"").replace(me,ve),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&ce.test(r)&&(t=A(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(me,ve).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=F[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&F(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,r,n){return function(a){var i=t.attr(a,e);return null==i?"!="===r:!r||(i+="","="===r?i===n:"!="===r?i!==n:"^="===r?n&&0===i.indexOf(n):"*="===r?n&&i.indexOf(n)>-1:"$="===r?n&&i.slice(-n.length)===n:"~="===r?(" "+i.replace(ae," ")+" ").indexOf(n)>-1:"|="===r&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,r,n,a){var i="nth"!==e.slice(0,3),s="last"!==e.slice(-4),o="of-type"===t;return 1===n&&0===a?function(e){return!!e.parentNode}:function(t,r,u){var c,l,p,f,d,h,y=i!==s?"nextSibling":"previousSibling",g=t.parentNode,m=o&&t.nodeName.toLowerCase(),v=!u&&!o,C=!1;if(g){if(i){for(;y;){for(f=t;f=f[y];)if(o?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;h=y="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?g.firstChild:g.lastChild],s&&v){for(f=g,p=f[O]||(f[O]={}),l=p[f.uniqueID]||(p[f.uniqueID]={}),c=l[e]||[],d=c[0]===M&&c[1],C=d&&c[2],f=d&&g.childNodes[d];f=++d&&f&&f[y]||(C=d=0)||h.pop();)if(1===f.nodeType&&++C&&f===t){l[e]=[M,d,C];break}}else if(v&&(f=t,p=f[O]||(f[O]={}),l=p[f.uniqueID]||(p[f.uniqueID]={}),c=l[e]||[],d=c[0]===M&&c[1],C=d),!1===C)for(;(f=++d&&f&&f[y]||(C=d=0)||h.pop())&&((o?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++C||(v&&(p=f[O]||(f[O]={}),l=p[f.uniqueID]||(p[f.uniqueID]={}),l[e]=[M,C]),f!==t)););return(C-=a)===n||C%n==0&&C/n>=0}}},PSEUDO:function(e,r){var a,i=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return i[O]?i(r):i.length>1?(a=[e,e,"",r],T.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,a=i(e,r),s=a.length;s--;)n=Z(e,a[s]),e[n]=!(t[n]=a[s])}):function(e){return i(e,0,a)}):i}},pseudos:{not:n(function(e){var t=[],r=[],a=b(e.replace(ie,"$1"));return a[O]?n(function(e,t,r,n){for(var i,s=a(e,null,n,[]),o=e.length;o--;)(i=s[o])&&(e[o]=!(t[o]=i))}):function(e,n,i){return t[0]=e,a(t,null,i,r),t[0]=null,!r.pop()}}),has:n(function(e){return function(r){return t(e,r).length>0}}),contains:n(function(e){return e=e.replace(me,ve),function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:n(function(e){return le.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(me,ve).toLowerCase(),function(t){var r;do{if(r=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===U},focus:function(e){return e===_.activeElement&&(!_.hasFocus||_.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:o(!1),disabled:o(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return de.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,r){return[r<0?r+t:r]}),even:u(function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:u(function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:u(function(e,t,r){for(var n=r<0?r+t:r;--n>=0;)e.push(n);return e}),gt:u(function(e,t,r){for(var n=r<0?r+t:r;++n<t;)e.push(n);return e})}},T.pseudos.nth=T.pseudos.eq;for(C in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[C]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(C);for(C in{submit:!0,reset:!0})T.pseudos[C]=function(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}(C);return l.prototype=T.filters=T.pseudos,T.setFilters=new l,A=t.tokenize=function(e,r){var n,a,i,s,o,u,c,l=q[e+" "];if(l)return r?0:l.slice(0);for(o=e,u=[],c=T.preFilter;o;){n&&!(a=se.exec(o))||(a&&(o=o.slice(a[0].length)||o),u.push(i=[])),n=!1,(a=oe.exec(o))&&(n=a.shift(),i.push({value:n,type:a[0].replace(ie," ")}),o=o.slice(n.length));for(s in T.filter)!(a=pe[s].exec(o))||c[s]&&!(a=c[s](a))||(n=a.shift(),i.push({value:n,type:s,matches:a}),o=o.slice(n.length));if(!n)break}return r?o.length:o?t.error(e):q(e,u).slice(0)},b=t.compile=function(e,t){var r,n=[],a=[],i=j[e+" "];if(!i){for(t||(t=A(e)),r=t.length;r--;)i=m(t[r]),i[O]?n.push(i):a.push(i);i=j(e,v(a,n)),i.selector=e}return i},N=t.select=function(e,t,r,n){var a,i,s,o,u,l="function"==typeof e&&e,f=!n&&A(e=l.selector||e);if(r=r||[],1===f.length){if(i=f[0]=f[0].slice(0),i.length>2&&"ID"===(s=i[0]).type&&9===t.nodeType&&L&&T.relative[i[1].type]){if(!(t=(T.find.ID(s.matches[0].replace(me,ve),t)||[])[0]))return r;l&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(a=pe.needsContext.test(e)?0:i.length;a--&&(s=i[a],!T.relative[o=s.type]);)if((u=T.find[o])&&(n=u(s.matches[0].replace(me,ve),ge.test(i[0].type)&&c(t.parentNode)||t))){if(i.splice(a,1),!(e=n.length&&p(i)))return Y.apply(r,n),r;break}}return(l||b(e,f))(n,t,!L,r,!t||ge.test(e)&&c(t.parentNode)||t),r},E.sortStable=O.split("").sort(H).join("")===O,E.detectDuplicates=!!R,k(),E.sortDetached=a(function(e){return 1&e.compareDocumentPosition(_.createElement("fieldset"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||i("type|href|height|width",function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),E.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||i("value",function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||i(J,function(e,t,r){var n;if(!r)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(r);be.find=Be,be.expr=Be.selectors,be.expr[":"]=be.expr.pseudos,be.uniqueSort=be.unique=Be.uniqueSort,be.text=Be.getText,be.isXMLDoc=Be.isXML,be.contains=Be.contains,be.escapeSelector=Be.escape;var we=function(e,t,r){for(var n=[],a=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&be(e).is(r))break;n.push(e)}return n},Re=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},ke=be.expr.match.needsContext,_e=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;be.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?be.find.matchesSelector(n,e)?[n]:[]:be.find.matches(e,be.grep(t,function(e){return 1===e.nodeType}))},be.fn.extend({find:function(e){var t,r,n=this.length,a=this;if("string"!=typeof e)return this.pushStack(be(e).filter(function(){for(t=0;t<n;t++)if(be.contains(a[t],this))return!0}));for(r=this.pushStack([]),t=0;t<n;t++)be.find(e,a[t],r);return n>1?be.uniqueSort(r):r},filter:function(e){return this.pushStack(l(this,e||[],!1))},not:function(e){return this.pushStack(l(this,e||[],!0))},is:function(e){return!!l(this,"string"==typeof e&&ke.test(e)?be(e):e||[],!1).length}});var Ue,Le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(be.fn.init=function(e,t,r){var n,a;if(!e)return this;if(r=r||Ue,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Le.exec(e))||!n[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof be?t[0]:t,be.merge(this,be.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:le,!0)),_e.test(n[1])&&be.isPlainObject(t))for(n in t)Se(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return a=le.getElementById(n[2]),a&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):Se(e)?void 0!==r.ready?r.ready(e):e(be):be.makeArray(e,this)}).prototype=be.fn,Ue=be(le);var De=/^(?:parents|prev(?:Until|All))/,Pe={children:!0,contents:!0,next:!0,prev:!0};be.fn.extend({has:function(e){var t=be(e,this),r=t.length;return this.filter(function(){for(var e=0;e<r;e++)if(be.contains(this,t[e]))return!0})},closest:function(e,t){var r,n=0,a=this.length,i=[],s="string"!=typeof e&&be(e);if(!ke.test(e))for(;n<a;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(s?s.index(r)>-1:1===r.nodeType&&be.find.matchesSelector(r,e))){i.push(r);break}return this.pushStack(i.length>1?be.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?ye.call(be(e),this[0]):ye.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(be.uniqueSort(be.merge(this.get(),be(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),be.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return we(e,"parentNode")},parentsUntil:function(e,t,r){return we(e,"parentNode",r)},next:function(e){return p(e,"nextSibling")},prev:function(e){return p(e,"previousSibling")},nextAll:function(e){return we(e,"nextSibling")},prevAll:function(e){return we(e,"previousSibling")},nextUntil:function(e,t,r){return we(e,"nextSibling",r)},prevUntil:function(e,t,r){return we(e,"previousSibling",r)},siblings:function(e){return Re((e.parentNode||{}).firstChild,e)},children:function(e){return Re(e.firstChild)},contents:function(e){return c(e,"iframe")?e.contentDocument:(c(e,"template")&&(e=e.content||e),be.merge([],e.childNodes))}},function(e,t){be.fn[e]=function(r,n){var a=be.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(a=be.filter(n,a)),this.length>1&&(Pe[e]||be.uniqueSort(a),De.test(e)&&a.reverse()),this.pushStack(a)}});var xe=/[^\x20\t\r\n\f]+/g;be.Callbacks=function(e){e="string"==typeof e?f(e):be.extend({},e);var t,r,n,a,i=[],s=[],u=-1,c=function(){for(a=a||e.once,n=t=!0;s.length;u=-1)for(r=s.shift();++u<i.length;)!1===i[u].apply(r[0],r[1])&&e.stopOnFalse&&(u=i.length,r=!1);e.memory||(r=!1),t=!1,a&&(i=r?[]:"")},l={add:function(){return i&&(r&&!t&&(u=i.length-1,s.push(r)),function t(r){be.each(r,function(r,n){Se(n)?e.unique&&l.has(n)||i.push(n):n&&n.length&&"string"!==o(n)&&t(n)})}(arguments),r&&!t&&c()),this},remove:function(){return be.each(arguments,function(e,t){for(var r;(r=be.inArray(t,i,r))>-1;)i.splice(r,1),r<=u&&u--}),this},has:function(e){return e?be.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return a=s=[],i=r="",this},disabled:function(){return!i},lock:function(){return a=s=[],r||t||(i=r=""),this},locked:function(){return!!a},fireWith:function(e,r){return a||(r=r||[],r=[e,r.slice?r.slice():r],s.push(r),t||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!n}};return l},be.extend({Deferred:function(e){var t=[["notify","progress",be.Callbacks("memory"),be.Callbacks("memory"),2],["resolve","done",be.Callbacks("once memory"),be.Callbacks("once memory"),0,"resolved"],["reject","fail",be.Callbacks("once memory"),be.Callbacks("once memory"),1,"rejected"]],n="pending",a={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return be.Deferred(function(r){be.each(t,function(t,n){var a=Se(e[n[4]])&&e[n[4]];i[n[1]](function(){var e=a&&a.apply(this,arguments);e&&Se(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[n[0]+"With"](this,a?[e]:arguments)})}),e=null}).promise()},then:function(e,n,a){function i(e,t,n,a){return function(){var o=this,u=arguments,c=function(){var r,c;if(!(e<s)){if((r=n.apply(o,u))===t.promise())throw new TypeError("Thenable self-resolution");c=r&&("object"==typeof r||"function"==typeof r)&&r.then,Se(c)?a?c.call(r,i(s,t,d,a),i(s,t,h,a)):(s++,c.call(r,i(s,t,d,a),i(s,t,h,a),i(s,t,d,t.notifyWith))):(n!==d&&(o=void 0,u=[r]),(a||t.resolveWith)(o,u))}},l=a?c:function(){try{c()}catch(r){be.Deferred.exceptionHook&&be.Deferred.exceptionHook(r,l.stackTrace),e+1>=s&&(n!==h&&(o=void 0,u=[r]),t.rejectWith(o,u))}};e?l():(be.Deferred.getStackHook&&(l.stackTrace=be.Deferred.getStackHook()),r.setTimeout(l))}}var s=0;return be.Deferred(function(r){t[0][3].add(i(0,r,Se(a)?a:d,r.notifyWith)),t[1][3].add(i(0,r,Se(e)?e:d)),t[2][3].add(i(0,r,Se(n)?n:h))}).promise()},promise:function(e){return null!=e?be.extend(e,a):a}},i={};return be.each(t,function(e,r){var s=r[2],o=r[5];a[r[1]]=s.add,o&&s.add(function(){n=o},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(r[3].fire),i[r[0]]=function(){return i[r[0]+"With"](this===i?void 0:this,arguments),this},i[r[0]+"With"]=s.fireWith}),a.promise(i),e&&e.call(i,i),i},when:function(e){var t=arguments.length,r=t,n=Array(r),a=fe.call(arguments),i=be.Deferred(),s=function(e){return function(r){n[e]=this,a[e]=arguments.length>1?fe.call(arguments):r,--t||i.resolveWith(n,a)}};if(t<=1&&(y(e,i.done(s(r)).resolve,i.reject,!t),"pending"===i.state()||Se(a[r]&&a[r].then)))return i.then();for(;r--;)y(a[r],s(r),i.reject);return i.promise()}});var Ve=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;be.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&Ve.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},be.readyException=function(e){r.setTimeout(function(){throw e})};var Oe=be.Deferred();be.fn.ready=function(e){return Oe.then(e).catch(function(e){be.readyException(e)}),this},be.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--be.readyWait:be.isReady)||(be.isReady=!0,!0!==e&&--be.readyWait>0||Oe.resolveWith(le,[be]))}}),be.ready.then=Oe.then,"complete"===le.readyState||"loading"!==le.readyState&&!le.documentElement.doScroll?r.setTimeout(be.ready):(le.addEventListener("DOMContentLoaded",g),r.addEventListener("load",g));var Ke=function(e,t,r,n,a,i,s){var u=0,c=e.length,l=null==r;if("object"===o(r)){a=!0;for(u in r)Ke(e,t,u,r[u],!0,i,s)}else if(void 0!==n&&(a=!0,Se(n)||(s=!0),l&&(s?(t.call(e,n),t=null):(l=t,t=function(e,t,r){return l.call(be(e),r)})),t))for(;u<c;u++)t(e[u],r,s?n:n.call(e[u],u,t(e[u],r)));return a?e:l?t.call(e):c?t(e[0],r):i},Me=/^-ms-/,Ge=/-([a-z])/g,Fe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};C.uid=1,C.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Fe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n,a=this.cache(e);if("string"==typeof t)a[v(t)]=r;else for(n in t)a[v(n)]=t[n];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][v(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n=e[this.expando];if(void 0!==n){if(void 0!==t){Array.isArray(t)?t=t.map(v):(t=v(t),t=t in n?[t]:t.match(xe)||[]),r=t.length;for(;r--;)delete n[t[r]]}(void 0===t||be.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!be.isEmptyObject(t)}};var qe=new C,je=new C,He=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Qe=/[A-Z]/g;be.extend({hasData:function(e){return je.hasData(e)||qe.hasData(e)},data:function(e,t,r){return je.access(e,t,r)},removeData:function(e,t){je.remove(e,t)},_data:function(e,t,r){return qe.access(e,t,r)},_removeData:function(e,t){qe.remove(e,t)}}),be.fn.extend({data:function(e,t){var r,n,a,i=this[0],s=i&&i.attributes;if(void 0===e){if(this.length&&(a=je.get(i),1===i.nodeType&&!qe.get(i,"hasDataAttrs"))){for(r=s.length;r--;)s[r]&&(n=s[r].name,0===n.indexOf("data-")&&(n=v(n.slice(5)),T(i,n,a[n])));qe.set(i,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each(function(){je.set(this,e)}):Ke(this,function(t){var r;if(i&&void 0===t){if(void 0!==(r=je.get(i,e)))return r;if(void 0!==(r=T(i,e)))return r}else this.each(function(){je.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){je.remove(this,e)})}}),be.extend({queue:function(e,t,r){var n;if(e)return t=(t||"fx")+"queue",n=qe.get(e,t),r&&(!n||Array.isArray(r)?n=qe.access(e,t,be.makeArray(r)):n.push(r)),n||[]},dequeue:function(e,t){t=t||"fx";var r=be.queue(e,t),n=r.length,a=r.shift(),i=be._queueHooks(e,t),s=function(){be.dequeue(e,t)};"inprogress"===a&&(a=r.shift(),n--),a&&("fx"===t&&r.unshift("inprogress"),delete i.stop,a.call(e,s,i)),!n&&i&&i.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return qe.get(e,r)||qe.access(e,r,{empty:be.Callbacks("once memory").add(function(){qe.remove(e,[t+"queue",r])})})}}),be.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?be.queue(this[0],e):void 0===t?this:this.each(function(){var r=be.queue(this,e,t);be._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&be.dequeue(this,e)})},dequeue:function(e){return this.each(function(){be.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,n=1,a=be.Deferred(),i=this,s=this.length,o=function(){--n||a.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(r=qe.get(i[s],e+"queueHooks"))&&r.empty&&(n++,r.empty.add(o));return o(),a.promise(t)}});var Xe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ze=new RegExp("^(?:([+-])=|)("+Xe+")([a-z%]*)$","i"),We=["Top","Right","Bottom","Left"],Ye=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&be.contains(e.ownerDocument,e)&&"none"===be.css(e,"display")},$e=function(e,t,r,n){var a,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];a=r.apply(e,n||[]);for(i in t)e.style[i]=s[i];return a},Ze={};be.fn.extend({show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ye(this)?be(this).show():be(this).hide()})}});var Je=/^(?:checkbox|radio)$/i,et=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,tt=/^$|^module$|\/(?:java|ecma)script/i,rt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};rt.optgroup=rt.option,rt.tbody=rt.tfoot=rt.colgroup=rt.caption=rt.thead,rt.th=rt.td;var nt=/<|&#?\w+;/;!function(){var e=le.createDocumentFragment(),t=e.appendChild(le.createElement("div")),r=le.createElement("input");r.setAttribute("type","radio"),r.setAttribute("checked","checked"),r.setAttribute("name","t"),t.appendChild(r),Te.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Te.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var at=le.documentElement,it=/^key/,st=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ot=/^([^.]*)(?:\.(.+)|)/;be.event={global:{},add:function(e,t,r,n,a){var i,s,o,u,c,l,p,f,d,h,y,g=qe.get(e);if(g)for(r.handler&&(i=r,r=i.handler,a=i.selector),a&&be.find.matchesSelector(at,a),r.guid||(r.guid=be.guid++),(u=g.events)||(u=g.events={}),(s=g.handle)||(s=g.handle=function(t){return void 0!==be&&be.event.triggered!==t.type?be.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(xe)||[""],c=t.length;c--;)o=ot.exec(t[c])||[],d=y=o[1],h=(o[2]||"").split(".").sort(),d&&(p=be.event.special[d]||{},d=(a?p.delegateType:p.bindType)||d,p=be.event.special[d]||{},l=be.extend({type:d,origType:y,data:n,handler:r,guid:r.guid,selector:a,needsContext:a&&be.expr.match.needsContext.test(a),namespace:h.join(".")},i),(f=u[d])||(f=u[d]=[],f.delegateCount=0,p.setup&&!1!==p.setup.call(e,n,h,s)||e.addEventListener&&e.addEventListener(d,s)),p.add&&(p.add.call(e,l),l.handler.guid||(l.handler.guid=r.guid)),a?f.splice(f.delegateCount++,0,l):f.push(l),be.event.global[d]=!0)},remove:function(e,t,r,n,a){var i,s,o,u,c,l,p,f,d,h,y,g=qe.hasData(e)&&qe.get(e);if(g&&(u=g.events)){for(t=(t||"").match(xe)||[""],c=t.length;c--;)if(o=ot.exec(t[c])||[],d=y=o[1],h=(o[2]||"").split(".").sort(),d){for(p=be.event.special[d]||{},d=(n?p.delegateType:p.bindType)||d,f=u[d]||[],o=o[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=i=f.length;i--;)l=f[i],!a&&y!==l.origType||r&&r.guid!==l.guid||o&&!o.test(l.namespace)||n&&n!==l.selector&&("**"!==n||!l.selector)||(f.splice(i,1),l.selector&&f.delegateCount--,p.remove&&p.remove.call(e,l));s&&!f.length&&(p.teardown&&!1!==p.teardown.call(e,h,g.handle)||be.removeEvent(e,d,g.handle),delete u[d])}else for(d in u)be.event.remove(e,d+t[c],r,n,!0);be.isEmptyObject(u)&&qe.remove(e,"handle events")}},dispatch:function(e){var t,r,n,a,i,s,o=be.event.fix(e),u=new Array(arguments.length),c=(qe.get(this,"events")||{})[o.type]||[],l=be.event.special[o.type]||{};for(u[0]=o,t=1;t<arguments.length;t++)u[t]=arguments[t];if(o.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,o)){for(s=be.event.handlers.call(this,o,c),t=0;(a=s[t++])&&!o.isPropagationStopped();)for(o.currentTarget=a.elem,r=0;(i=a.handlers[r++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!o.rnamespace.test(i.namespace)||(o.handleObj=i,o.data=i.data,void 0!==(n=((be.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,u))&&!1===(o.result=n)&&(o.preventDefault(),o.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,o),o.result}},handlers:function(e,t){var r,n,a,i,s,o=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(i=[],s={},r=0;r<u;r++)n=t[r],a=n.selector+" ",void 0===s[a]&&(s[a]=n.needsContext?be(a,this).index(c)>-1:be.find(a,this,null,[c]).length),s[a]&&i.push(n);i.length&&o.push({elem:c,handlers:i})}return c=this,u<t.length&&o.push({elem:c,handlers:t.slice(u)}),o},addProp:function(e,t){Object.defineProperty(be.Event.prototype,e,{enumerable:!0,configurable:!0,get:Se(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[be.expando]?e:new be.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==k()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===k()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&c(this,"input"))return this.click(),!1},_default:function(e){return c(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},be.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},be.Event=function(e,t){if(!(this instanceof be.Event))return new be.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?w:R,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&be.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[be.expando]=!0},be.Event.prototype={constructor:be.Event,isDefaultPrevented:R,isPropagationStopped:R,isImmediatePropagationStopped:R,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=w,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=w,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=w,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},be.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&it.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&st.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},be.event.addProp),be.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){be.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=this,a=e.relatedTarget,i=e.handleObj;return a&&(a===n||be.contains(n,a))||(e.type=i.origType,r=i.handler.apply(this,arguments),e.type=t),r}}}),be.fn.extend({on:function(e,t,r,n){return _(this,e,t,r,n)},one:function(e,t,r,n){return _(this,e,t,r,n,1)},off:function(e,t,r){var n,a;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,be(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=R),this.each(function(){be.event.remove(this,e,r,t)})}});var ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ct=/<script|<style|<link/i,lt=/checked\s*(?:[^=]|=\s*.checked.)/i,pt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;be.extend({htmlPrefilter:function(e){return e.replace(ut,"<$1></$2>")},clone:function(e,t,r){var n,a,i,s,o=e.cloneNode(!0),u=be.contains(e.ownerDocument,e);if(!(Te.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||be.isXMLDoc(e)))for(s=b(o),i=b(e),n=0,a=i.length;n<a;n++)x(i[n],s[n]);if(t)if(r)for(i=i||b(e),s=s||b(o),n=0,a=i.length;n<a;n++)P(i[n],s[n]);else P(e,o);return s=b(o,"script"),s.length>0&&N(s,!u&&b(e,"script")),o},cleanData:function(e){for(var t,r,n,a=be.event.special,i=0;void 0!==(r=e[i]);i++)if(Fe(r)){if(t=r[qe.expando]){if(t.events)for(n in t.events)a[n]?be.event.remove(r,n):be.removeEvent(r,n,t.handle);r[qe.expando]=void 0}r[je.expando]&&(r[je.expando]=void 0)}}}),be.fn.extend({detach:function(e){return O(this,e,!0)},remove:function(e){return O(this,e)},text:function(e){return Ke(this,function(e){return void 0===e?be.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return V(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){U(this,e).appendChild(e)}})},prepend:function(){return V(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=U(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return V(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return V(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(be.cleanData(b(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return be.clone(this,e,t)})},html:function(e){return Ke(this,function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ct.test(e)&&!rt[(et.exec(e)||["",""])[1].toLowerCase()]){e=be.htmlPrefilter(e);try{for(;r<n;r++)t=this[r]||{},1===t.nodeType&&(be.cleanData(b(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return V(this,arguments,function(t){var r=this.parentNode;be.inArray(this,e)<0&&(be.cleanData(b(this)),r&&r.replaceChild(t,this))},e)}}),be.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){be.fn[e]=function(e){for(var r,n=[],a=be(e),i=a.length-1,s=0;s<=i;s++)r=s===i?this:this.clone(!0),be(a[s])[t](r),he.apply(n,r.get());return this.pushStack(n)}});var ft=new RegExp("^("+Xe+")(?!px)[a-z%]+$","i"),dt=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},ht=new RegExp(We.join("|"),"i");!function(){function e(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",at.appendChild(u).appendChild(c);var e=r.getComputedStyle(c);n="1%"!==e.top,o=12===t(e.marginLeft),c.style.right="60%",s=36===t(e.right),a=36===t(e.width),c.style.position="absolute",i=36===c.offsetWidth||"absolute",at.removeChild(u),c=null}}function t(e){return Math.round(parseFloat(e))}var n,a,i,s,o,u=le.createElement("div"),c=le.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",Te.clearCloneStyle="content-box"===c.style.backgroundClip,be.extend(Te,{boxSizingReliable:function(){return e(),a},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),o},scrollboxSize:function(){return e(),i}}))}();var yt=/^(none|table(?!-c[ea]).+)/,gt=/^--/,mt={position:"absolute",visibility:"hidden",display:"block"},vt={letterSpacing:"0",fontWeight:"400"},Ct=["Webkit","Moz","ms"],Et=le.createElement("div").style;be.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=K(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,i,s,o=v(t),u=gt.test(t),c=e.style;if(u||(t=F(o)),s=be.cssHooks[t]||be.cssHooks[o],void 0===r)return s&&"get"in s&&void 0!==(a=s.get(e,!1,n))?a:c[t];i=typeof r,"string"===i&&(a=ze.exec(r))&&a[1]&&(r=S(e,t,a),i="number"),null!=r&&r===r&&("number"===i&&(r+=a&&a[3]||(be.cssNumber[o]?"":"px")),Te.clearCloneStyle||""!==r||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(r=s.set(e,r,n))||(u?c.setProperty(t,r):c[t]=r))}},css:function(e,t,r,n){var a,i,s,o=v(t);return gt.test(t)||(t=F(o)),s=be.cssHooks[t]||be.cssHooks[o],s&&"get"in s&&(a=s.get(e,!0,r)),void 0===a&&(a=K(e,t,n)),"normal"===a&&t in vt&&(a=vt[t]),""===r||r?(i=parseFloat(a),!0===r||isFinite(i)?i||0:a):a}}),be.each(["height","width"],function(e,t){be.cssHooks[t]={get:function(e,r,n){if(r)return!yt.test(be.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?H(e,t,n):$e(e,mt,function(){return H(e,t,n)})},set:function(e,r,n){var a,i=dt(e),s="border-box"===be.css(e,"boxSizing",!1,i),o=n&&j(e,t,n,s,i);return s&&Te.scrollboxSize()===i.position&&(o-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-j(e,t,"border",!1,i)-.5)),o&&(a=ze.exec(r))&&"px"!==(a[3]||"px")&&(e.style[t]=r,r=be.css(e,t)),q(e,r,o)}}}),be.cssHooks.marginLeft=M(Te.reliableMarginLeft,function(e,t){if(t)return(parseFloat(K(e,"marginLeft"))||e.getBoundingClientRect().left-$e(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),be.each({margin:"",padding:"",border:"Width"},function(e,t){be.cssHooks[e+t]={expand:function(r){for(var n=0,a={},i="string"==typeof r?r.split(" "):[r];n<4;n++)a[e+We[n]+t]=i[n]||i[n-2]||i[0];return a}},"margin"!==e&&(be.cssHooks[e+t].set=q)}),be.fn.extend({css:function(e,t){return Ke(this,function(e,t,r){var n,a,i={},s=0;if(Array.isArray(t)){for(n=dt(e),a=t.length;s<a;s++)i[t[s]]=be.css(e,t[s],!1,n);return i}return void 0!==r?be.style(e,t,r):be.css(e,t)},e,t,arguments.length>1)}}),be.Tween=Q,Q.prototype={constructor:Q,init:function(e,t,r,n,a,i){this.elem=e,this.prop=r,this.easing=a||be.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=i||(be.cssNumber[r]?"":"px")},cur:function(){var e=Q.propHooks[this.prop];return e&&e.get?e.get(this):Q.propHooks._default.get(this)},run:function(e){var t,r=Q.propHooks[this.prop];return this.options.duration?this.pos=t=be.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Q.propHooks._default.set(this),this}},Q.prototype.init.prototype=Q.prototype,Q.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=be.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){be.fx.step[e.prop]?be.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[be.cssProps[e.prop]]&&!be.cssHooks[e.prop]?e.elem[e.prop]=e.now:be.style(e.elem,e.prop,e.now+e.unit)}}},Q.propHooks.scrollTop=Q.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},be.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},be.fx=Q.prototype.init,be.fx.step={};var Tt,St,It=/^(?:toggle|show|hide)$/,At=/queueHooks$/;be.Animation=be.extend(J,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return S(r.elem,e,ze.exec(t),r),r}]},tweener:function(e,t){Se(e)?(t=e,e=["*"]):e=e.match(xe);for(var r,n=0,a=e.length;n<a;n++)r=e[n],J.tweeners[r]=J.tweeners[r]||[],J.tweeners[r].unshift(t)},prefilters:[$],prefilter:function(e,t){t?J.prefilters.unshift(e):J.prefilters.push(e)}}),be.speed=function(e,t,r){var n=e&&"object"==typeof e?be.extend({},e):{complete:r||!r&&t||Se(e)&&e,duration:e,easing:r&&t||t&&!Se(t)&&t};return be.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in be.fx.speeds?n.duration=be.fx.speeds[n.duration]:n.duration=be.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){Se(n.old)&&n.old.call(this),n.queue&&be.dequeue(this,n.queue)},n},be.fn.extend({fadeTo:function(e,t,r,n){return this.filter(Ye).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){var a=be.isEmptyObject(e),i=be.speed(t,r,n),s=function(){var t=J(this,be.extend({},e),i);(a||qe.get(this,"finish"))&&t.stop(!0)};return s.finish=s,a||!1===i.queue?this.each(s):this.queue(i.queue,s)},stop:function(e,t,r){var n=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",i=be.timers,s=qe.get(this);if(a)s[a]&&s[a].stop&&n(s[a]);else for(a in s)s[a]&&s[a].stop&&At.test(a)&&n(s[a]);for(a=i.length;a--;)i[a].elem!==this||null!=e&&i[a].queue!==e||(i[a].anim.stop(r),t=!1,i.splice(a,1));!t&&r||be.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,r=qe.get(this),n=r[e+"queue"],a=r[e+"queueHooks"],i=be.timers,s=n?n.length:0;for(r.finish=!0,be.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<s;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete r.finish})}}),be.each(["toggle","show","hide"],function(e,t){var r=be.fn[t];be.fn[t]=function(e,n,a){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(W(t,!0),e,n,a)}}),be.each({slideDown:W("show"),slideUp:W("hide"),slideToggle:W("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){be.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}}),be.timers=[],be.fx.tick=function(){var e,t=0,r=be.timers;for(Tt=Date.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||be.fx.stop(),Tt=void 0},be.fx.timer=function(e){be.timers.push(e),be.fx.start()},be.fx.interval=13,be.fx.start=function(){St||(St=!0,X())},be.fx.stop=function(){St=null},be.fx.speeds={slow:600,fast:200,_default:400},be.fn.delay=function(e,t){return e=be.fx?be.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var a=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(a)}})},function(){var e=le.createElement("input"),t=le.createElement("select"),r=t.appendChild(le.createElement("option"));e.type="checkbox",Te.checkOn=""!==e.value,Te.optSelected=r.selected,e=le.createElement("input"),e.value="t",e.type="radio",Te.radioValue="t"===e.value}();var bt,Nt=be.expr.attrHandle;be.fn.extend({attr:function(e,t){return Ke(this,be.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){be.removeAttr(this,e)})}}),be.extend({attr:function(e,t,r){var n,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?be.prop(e,t,r):(1===i&&be.isXMLDoc(e)||(a=be.attrHooks[t.toLowerCase()]||(be.expr.match.bool.test(t)?bt:void 0)),void 0!==r?null===r?void be.removeAttr(e,t):a&&"set"in a&&void 0!==(n=a.set(e,r,t))?n:(e.setAttribute(t,r+""),r):a&&"get"in a&&null!==(n=a.get(e,t))?n:(n=be.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set:function(e,t){if(!Te.radioValue&&"radio"===t&&c(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,n=0,a=t&&t.match(xe);if(a&&1===e.nodeType)for(;r=a[n++];)e.removeAttribute(r)}}),bt={set:function(e,t,r){return!1===t?be.removeAttr(e,r):e.setAttribute(r,r),r}},be.each(be.expr.match.bool.source.match(/\w+/g),function(e,t){var r=Nt[t]||be.find.attr;Nt[t]=function(e,t,n){var a,i,s=t.toLowerCase();return n||(i=Nt[s],Nt[s]=a,a=null!=r(e,t,n)?s:null,Nt[s]=i),a}});var Bt=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;be.fn.extend({prop:function(e,t){return Ke(this,be.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[be.propFix[e]||e]})}}),be.extend({prop:function(e,t,r){var n,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&be.isXMLDoc(e)||(t=be.propFix[t]||t,a=be.propHooks[t]),void 0!==r?a&&"set"in a&&void 0!==(n=a.set(e,r,t))?n:e[t]=r:a&&"get"in a&&null!==(n=a.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=be.find.attr(e,"tabindex");return t?parseInt(t,10):Bt.test(e.nodeName)||wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Te.optSelected||(be.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),be.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){be.propFix[this.toLowerCase()]=this}),be.fn.extend({addClass:function(e){var t,r,n,a,i,s,o,u=0;if(Se(e))return this.each(function(t){be(this).addClass(e.call(this,t,te(this)))});if(t=re(e),t.length)for(;r=this[u++];)if(a=te(r),n=1===r.nodeType&&" "+ee(a)+" "){for(s=0;i=t[s++];)n.indexOf(" "+i+" ")<0&&(n+=i+" ");o=ee(n),a!==o&&r.setAttribute("class",o)}return this},removeClass:function(e){var t,r,n,a,i,s,o,u=0;if(Se(e))return this.each(function(t){be(this).removeClass(e.call(this,t,te(this)))});if(!arguments.length)return this.attr("class","");if(t=re(e),t.length)for(;r=this[u++];)if(a=te(r),n=1===r.nodeType&&" "+ee(a)+" "){for(s=0;i=t[s++];)for(;n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");o=ee(n),a!==o&&r.setAttribute("class",o)}return this},toggleClass:function(e,t){var r=typeof e,n="string"===r||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):Se(e)?this.each(function(r){be(this).toggleClass(e.call(this,r,te(this),t),t)}):this.each(function(){var t,a,i,s;if(n)for(a=0,i=be(this),s=re(e);t=s[a++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==r||(t=te(this),t&&qe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":qe.get(this,"__className__")||""))})},hasClass:function(e){var t,r,n=0;for(t=" "+e+" ";r=this[n++];)if(1===r.nodeType&&(" "+ee(te(r))+" ").indexOf(t)>-1)return!0;return!1}});var Rt=/\r/g;be.fn.extend({val:function(e){var t,r,n,a=this[0];{if(arguments.length)return n=Se(e),this.each(function(r){var a;1===this.nodeType&&(a=n?e.call(this,r,be(this).val()):e,null==a?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=be.map(a,function(e){return null==e?"":e+""})),(t=be.valHooks[this.type]||be.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))});if(a)return(t=be.valHooks[a.type]||be.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(a,"value"))?r:(r=a.value,"string"==typeof r?r.replace(Rt,""):null==r?"":r)}}}),be.extend({valHooks:{option:{get:function(e){var t=be.find.attr(e,"value");return null!=t?t:ee(be.text(e))}},select:{get:function(e){var t,r,n,a=e.options,i=e.selectedIndex,s="select-one"===e.type,o=s?null:[],u=s?i+1:a.length;for(n=i<0?u:s?i:0;n<u;n++)if(r=a[n],(r.selected||n===i)&&!r.disabled&&(!r.parentNode.disabled||!c(r.parentNode,"optgroup"))){if(t=be(r).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var r,n,a=e.options,i=be.makeArray(t),s=a.length;s--;)n=a[s],(n.selected=be.inArray(be.valHooks.option.get(n),i)>-1)&&(r=!0);return r||(e.selectedIndex=-1),i}}}}),be.each(["radio","checkbox"],function(){be.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=be.inArray(be(e).val(),t)>-1}},Te.checkOn||(be.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Te.focusin="onfocusin"in r;var kt=/^(?:focusinfocus|focusoutblur)$/,_t=function(e){e.stopPropagation()};be.extend(be.event,{trigger:function(e,t,n,a){var i,s,o,u,c,l,p,f,d=[n||le],h=ve.call(e,"type")?e.type:e,y=ve.call(e,"namespace")?e.namespace.split("."):[];if(s=f=o=n=n||le,3!==n.nodeType&&8!==n.nodeType&&!kt.test(h+be.event.triggered)&&(h.indexOf(".")>-1&&(y=h.split("."),h=y.shift(),y.sort()),c=h.indexOf(":")<0&&"on"+h,e=e[be.expando]?e:new be.Event(h,"object"==typeof e&&e),e.isTrigger=a?2:3,e.namespace=y.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:be.makeArray(t,[e]),p=be.event.special[h]||{},a||!p.trigger||!1!==p.trigger.apply(n,t))){if(!a&&!p.noBubble&&!Ie(n)){for(u=p.delegateType||h,kt.test(u+h)||(s=s.parentNode);s;s=s.parentNode)d.push(s),o=s;o===(n.ownerDocument||le)&&d.push(o.defaultView||o.parentWindow||r)}for(i=0;(s=d[i++])&&!e.isPropagationStopped();)f=s,e.type=i>1?u:p.bindType||h,l=(qe.get(s,"events")||{})[e.type]&&qe.get(s,"handle"),l&&l.apply(s,t),(l=c&&s[c])&&l.apply&&Fe(s)&&(e.result=l.apply(s,t),!1===e.result&&e.preventDefault());return e.type=h,a||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(d.pop(),t)||!Fe(n)||c&&Se(n[h])&&!Ie(n)&&(o=n[c],o&&(n[c]=null),be.event.triggered=h,e.isPropagationStopped()&&f.addEventListener(h,_t),n[h](),e.isPropagationStopped()&&f.removeEventListener(h,_t),be.event.triggered=void 0,o&&(n[c]=o)),e.result}},simulate:function(e,t,r){var n=be.extend(new be.Event,r,{type:e,isSimulated:!0});be.event.trigger(n,null,t)}}),be.fn.extend({trigger:function(e,t){return this.each(function(){be.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r)return be.event.trigger(e,t,r,!0)}}),Te.focusin||be.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){be.event.simulate(t,e.target,be.event.fix(e))};be.event.special[t]={setup:function(){var n=this.ownerDocument||this,a=qe.access(n,t);a||n.addEventListener(e,r,!0),qe.access(n,t,(a||0)+1)},teardown:function(){var n=this.ownerDocument||this,a=qe.access(n,t)-1;a?qe.access(n,t,a):(n.removeEventListener(e,r,!0),qe.remove(n,t))}}});var Ut=r.location,Lt=Date.now(),Dt=/\?/;be.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||be.error("Invalid XML: "+e),t};var Pt=/\[\]$/,xt=/\r?\n/g,Vt=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;be.param=function(e,t){var r,n=[],a=function(e,t){var r=Se(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==r?"":r)};if(Array.isArray(e)||e.jquery&&!be.isPlainObject(e))be.each(e,function(){a(this.name,this.value)});else for(r in e)ne(r,e[r],t,a);return n.join("&")},be.fn.extend({serialize:function(){return be.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=be.prop(this,"elements");return e?be.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!be(this).is(":disabled")&&Ot.test(this.nodeName)&&!Vt.test(e)&&(this.checked||!Je.test(e))}).map(function(e,t){var r=be(this).val();return null==r?null:Array.isArray(r)?be.map(r,function(e){return{name:t.name,value:e.replace(xt,"\r\n")}}):{name:t.name,value:r.replace(xt,"\r\n")}}).get()}});var Kt=/%20/g,Mt=/#.*$/,Gt=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,qt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jt=/^(?:GET|HEAD)$/,Ht=/^\/\//,Qt={},Xt={},zt="*/".concat("*"),Wt=le.createElement("a");Wt.href=Ut.href,be.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ut.href,type:"GET",isLocal:qt.test(Ut.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":be.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?se(se(e,be.ajaxSettings),t):se(be.ajaxSettings,e)},ajaxPrefilter:ae(Qt),ajaxTransport:ae(Xt),ajax:function(e,t){function n(e,t,n,o){var c,f,d,E,T,S=t;l||(l=!0,u&&r.clearTimeout(u),a=void 0,s=o||"",I.readyState=e>0?4:0,c=e>=200&&e<300||304===e,n&&(E=oe(h,I,n)),E=ue(h,E,I,c),c?(h.ifModified&&(T=I.getResponseHeader("Last-Modified"),T&&(be.lastModified[i]=T),(T=I.getResponseHeader("etag"))&&(be.etag[i]=T)),204===e||"HEAD"===h.type?S="nocontent":304===e?S="notmodified":(S=E.state,f=E.data,d=E.error,c=!d)):(d=S,!e&&S||(S="error",e<0&&(e=0))),I.status=e,I.statusText=(t||S)+"",c?m.resolveWith(y,[f,S,I]):m.rejectWith(y,[I,S,d]),I.statusCode(C),C=void 0,p&&g.trigger(c?"ajaxSuccess":"ajaxError",[I,h,c?f:d]),v.fireWith(y,[I,S]),p&&(g.trigger("ajaxComplete",[I,h]),--be.active||be.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var a,i,s,o,u,c,l,p,f,d,h=be.ajaxSetup({},t),y=h.context||h,g=h.context&&(y.nodeType||y.jquery)?be(y):be.event,m=be.Deferred(),v=be.Callbacks("once memory"),C=h.statusCode||{},E={},T={},S="canceled",I={readyState:0,getResponseHeader:function(e){var t;if(l){if(!o)for(o={};t=Ft.exec(s);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return l?s:null},setRequestHeader:function(e,t){return null==l&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,E[e]=t),this},overrideMimeType:function(e){return null==l&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)I.always(e[I.status]);else for(t in e)C[t]=[C[t],e[t]];return this},abort:function(e){var t=e||S;return a&&a.abort(t),n(0,t),this}};if(m.promise(I),h.url=((e||h.url||Ut.href)+"").replace(Ht,Ut.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(xe)||[""],null==h.crossDomain){c=le.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=Wt.protocol+"//"+Wt.host!=c.protocol+"//"+c.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=be.param(h.data,h.traditional)),ie(Qt,h,t,I),l)return I;p=be.event&&h.global,p&&0==be.active++&&be.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!jt.test(h.type),i=h.url.replace(Mt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Kt,"+")):(d=h.url.slice(i.length),h.data&&(h.processData||"string"==typeof h.data)&&(i+=(Dt.test(i)?"&":"?")+h.data,delete h.data),!1===h.cache&&(i=i.replace(Gt,"$1"),d=(Dt.test(i)?"&":"?")+"_="+Lt+++d),h.url=i+d),h.ifModified&&(be.lastModified[i]&&I.setRequestHeader("If-Modified-Since",be.lastModified[i]),be.etag[i]&&I.setRequestHeader("If-None-Match",be.etag[i])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&I.setRequestHeader("Content-Type",h.contentType),I.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+zt+"; q=0.01":""):h.accepts["*"]);for(f in h.headers)I.setRequestHeader(f,h.headers[f]);if(h.beforeSend&&(!1===h.beforeSend.call(y,I,h)||l))return I.abort();if(S="abort",v.add(h.complete),I.done(h.success),I.fail(h.error),a=ie(Xt,h,t,I)){if(I.readyState=1,p&&g.trigger("ajaxSend",[I,h]),l)return I;h.async&&h.timeout>0&&(u=r.setTimeout(function(){I.abort("timeout")},h.timeout));try{l=!1,a.send(E,n)}catch(e){if(l)throw e;n(-1,e)}}else n(-1,"No Transport");return I},getJSON:function(e,t,r){return be.get(e,t,r,"json")},getScript:function(e,t){return be.get(e,void 0,t,"script")}}),be.each(["get","post"],function(e,t){be[t]=function(e,r,n,a){return Se(r)&&(a=a||n,n=r,r=void 0),be.ajax(be.extend({url:e,type:t,dataType:a,data:r,success:n},be.isPlainObject(e)&&e))}}),be._evalUrl=function(e){return be.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},be.fn.extend({wrapAll:function(e){var t;return this[0]&&(Se(e)&&(e=e.call(this[0])),t=be(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return Se(e)?this.each(function(t){be(this).wrapInner(e.call(this,t))}):this.each(function(){var t=be(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=Se(e);return this.each(function(r){be(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){be(this).replaceWith(this.childNodes)}),this}}),be.expr.pseudos.hidden=function(e){return!be.expr.pseudos.visible(e)},be.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},be.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},$t=be.ajaxSettings.xhr();Te.cors=!!$t&&"withCredentials"in $t,Te.ajax=$t=!!$t,be.ajaxTransport(function(e){var t,n;if(Te.cors||$t&&!e.crossDomain)return{send:function(a,i){var s,o=e.xhr();if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)o[s]=e.xhrFields[s];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest");for(s in a)o.setRequestHeader(s,a[s]);t=function(e){return function(){t&&(t=n=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===e?o.abort():"error"===e?"number"!=typeof o.status?i(0,"error"):i(o.status,o.statusText):i(Yt[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=t(),n=o.onerror=o.ontimeout=t("error"),void 0!==o.onabort?o.onabort=n:o.onreadystatechange=function(){4===o.readyState&&r.setTimeout(function(){t&&n()})},t=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),be.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),be.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return be.globalEval(e),e}}}),be.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),be.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(n,a){t=be("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&a("error"===e.type?404:200,e.type)}),le.head.appendChild(t[0])},abort:function(){r&&r()}}}});var Zt=[],Jt=/(=)\?(?=&|$)|\?\?/;be.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Zt.pop()||be.expando+"_"+Lt++;return this[e]=!0,e}}),be.ajaxPrefilter("json jsonp",function(e,t,n){var a,i,s,o=!1!==e.jsonp&&(Jt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jt.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return a=e.jsonpCallback=Se(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(Jt,"$1"+a):!1!==e.jsonp&&(e.url+=(Dt.test(e.url)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return s||be.error(a+" was not called"),s[0]},e.dataTypes[0]="json",i=r[a],r[a]=function(){s=arguments},n.always(function(){void 0===i?be(r).removeProp(a):r[a]=i,e[a]&&(e.jsonpCallback=t.jsonpCallback,Zt.push(a)),s&&Se(i)&&i(s[0]),s=i=void 0}),"script"}),Te.createHTMLDocument=function(){var e=le.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),be.parseHTML=function(e,t,r){if("string"!=typeof e)return[];"boolean"==typeof t&&(r=t,t=!1);var n,a,i;return t||(Te.createHTMLDocument?(t=le.implementation.createHTMLDocument(""),n=t.createElement("base"),n.href=le.location.href,t.head.appendChild(n)):t=le),a=_e.exec(e),i=!r&&[],a?[t.createElement(a[1])]:(a=B([e],t,i),i&&i.length&&be(i).remove(),be.merge([],a.childNodes))},be.fn.load=function(e,t,r){var n,a,i,s=this,o=e.indexOf(" ");return o>-1&&(n=ee(e.slice(o)),e=e.slice(0,o)),Se(t)?(r=t,t=void 0):t&&"object"==typeof t&&(a="POST"),s.length>0&&be.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){i=arguments,s.html(n?be("<div>").append(be.parseHTML(e)).find(n):e)}).always(r&&function(e,t){s.each(function(){r.apply(this,i||[e.responseText,t,e])})}),this},be.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){be.fn[t]=function(e){return this.on(t,e)}}),be.expr.pseudos.animated=function(e){return be.grep(be.timers,function(t){return e===t.elem}).length},be.offset={setOffset:function(e,t,r){var n,a,i,s,o,u,c,l=be.css(e,"position"),p=be(e),f={};"static"===l&&(e.style.position="relative"),o=p.offset(),i=be.css(e,"top"),u=be.css(e,"left"),c=("absolute"===l||"fixed"===l)&&(i+u).indexOf("auto")>-1,c?(n=p.position(),s=n.top,a=n.left):(s=parseFloat(i)||0,a=parseFloat(u)||0),Se(t)&&(t=t.call(e,r,be.extend({},o))),null!=t.top&&(f.top=t.top-o.top+s),null!=t.left&&(f.left=t.left-o.left+a),"using"in t?t.using.call(e,f):p.css(f)}},be.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){be.offset.setOffset(this,e,t)});var t,r,n=this[0];if(n)return n.getClientRects().length?(t=n.getBoundingClientRect(),r=n.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,r,n=this[0],a={top:0,left:0};if("fixed"===be.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),r=n.ownerDocument,e=n.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===be.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&(a=be(e).offset(),a.top+=be.css(e,"borderTopWidth",!0),a.left+=be.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-be.css(n,"marginTop",!0),left:t.left-a.left-be.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===be.css(e,"position");)e=e.offsetParent;return e||at})}}),be.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;be.fn[e]=function(n){return Ke(this,function(e,n,a){var i;if(Ie(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===a)return i?i[t]:e[n];i?i.scrollTo(r?i.pageXOffset:a,r?a:i.pageYOffset):e[n]=a},e,n,arguments.length)}}),be.each(["top","left"],function(e,t){be.cssHooks[t]=M(Te.pixelPosition,function(e,r){if(r)return r=K(e,t),ft.test(r)?be(e).position()[t]+"px":r})}),be.each({Height:"height",Width:"width"},function(e,t){be.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,n){be.fn[n]=function(a,i){var s=arguments.length&&(r||"boolean"!=typeof a),o=r||(!0===a||!0===i?"margin":"border");return Ke(this,function(t,r,a){var i;return Ie(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===a?be.css(t,r,o):be.style(t,r,a,o)},t,s?a:void 0,s)}})}),be.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){be.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}),be.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),be.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}}),be.proxy=function(e,t){var r,n,a;if("string"==typeof t&&(r=e[t],t=e,e=r),Se(e))return n=fe.call(arguments,2),a=function(){return e.apply(t||this,n.concat(fe.call(arguments)))},a.guid=e.guid=e.guid||be.guid++,a},be.holdReady=function(e){e?be.readyWait++:be.ready(!0)},be.isArray=Array.isArray,be.parseJSON=JSON.parse,be.nodeName=c,be.isFunction=Se,be.isWindow=Ie,be.camelCase=v,be.type=o,be.now=Date.now,be.isNumeric=function(e){var t=be.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},n=[],void 0!==(a=function(){return be}.apply(t,n))&&(e.exports=a);var er=r.jQuery,tr=r.$;return be.noConflict=function(e){return r.$===be&&(r.$=tr),e&&r.jQuery===be&&(r.jQuery=er),be},i||(r.jQuery=r.$=be),be})},function(e,t,r){e.exports={disableNativeCode:!1},r(9),r(114),r(3),r(15),r(16),r(62),r(17),r(12),r(121),r(63),r(5),r(61),r(29),r(13),r(122),r(30),r(59),r(51),r(31),r(54),r(32),r(4),r(55),r(123),r(124),r(49),r(2),r(56),r(57),r(125),r(64),r(58),r(33)},function(e,t,r){(function(e,t,n){function a(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(o.isArrayBuffer(e)||o.isArrayBufferView(e)){var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(e){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof a||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}function i(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=o.isArrayBuffer(e),n=o.isArrayBufferView(e);if(r||n)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==e&&void 0!==e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}var s=r(1),o=s.util=s.util||{};!function(){function r(e){if(e.source===window&&e.data===n){e.stopPropagation();var t=a.slice();a.length=0,t.forEach(function(e){e()})}}if(void 0!==e&&e.nextTick)return o.nextTick=e.nextTick,void(o.setImmediate="function"==typeof t?t:o.nextTick);if("function"==typeof t)return o.setImmediate=t,void(o.nextTick=function(e){return t(e)});if(o.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var n="forge.setImmediate",a=[];o.setImmediate=function(e){a.push(e),1===a.length&&window.postMessage(n,"*")},window.addEventListener("message",r,!0)}if("undefined"!=typeof MutationObserver){var i=Date.now(),s=!0,u=document.createElement("div"),a=[];new MutationObserver(function(){var e=a.slice();a.length=0,e.forEach(function(e){e()})}).observe(u,{attributes:!0});var c=o.setImmediate;o.setImmediate=function(e){Date.now()-i>15?(i=Date.now(),c(e)):(a.push(e),1===a.length&&u.setAttribute("a",s=!s))}}o.nextTick=o.setImmediate}(),o.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},o.isArrayBufferView=function(e){return e&&o.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},o.ByteBuffer=a,o.ByteStringBuffer=a;o.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},o.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},o.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},o.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},o.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},o.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},o.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(o.encodeUtf8(e))},o.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},o.ByteStringBuffer.prototype.destory=function(){this.data=0},o.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},o.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},o.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},o.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},o.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},o.ByteStringBuffer.prototype.putInt=function(e,t){var r="";do{t-=8,r+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(r)},o.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},o.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},o.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},o.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},o.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},o.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},o.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},o.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},o.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},o.ByteStringBuffer.prototype.getInt=function(e){var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},o.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},o.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},o.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},o.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},o.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},o.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},o.ByteStringBuffer.prototype.copy=function(){var e=o.createBuffer(this.data);return e.read=this.read,e},o.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},o.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},o.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},o.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},o.ByteStringBuffer.prototype.toString=function(){return o.decodeUtf8(this.bytes())},o.DataBuffer=i,o.DataBuffer.prototype.length=function(){return this.write-this.read},o.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},o.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},o.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},o.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},o.DataBuffer.prototype.putBytes=function(e,t){if(o.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var a=new Uint8Array(this.data.buffer,this.write);return a.set(r),this.write+=n,this}if(o.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var a=new Uint8Array(this.data.buffer);return a.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof o.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&o.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var a=new Uint8Array(e.data.byteLength,this.write);return a.set(r),this.write+=r.byteLength,this}if(e instanceof o.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"==typeof e){var i;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.hex.decode(e,i,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.base64.decode(e,i,this.write),this;if("utf8"===t?(e=o.encodeUtf8(e),t="binary"):"euc-kr"===t&&(msg=s.util.encodeEucKr(msg),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.raw.decode(i),this;if("utf16"===t)return this.accommodate(2*e.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=o.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},o.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},o.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},o.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},o.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},o.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},o.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},o.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},o.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},o.DataBuffer.prototype.putInt=function(e,t){this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},o.DataBuffer.prototype.putSignedInt=function(e,t){return this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},o.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},o.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},o.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},o.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},o.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},o.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},o.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},o.DataBuffer.prototype.getInt=function(e){var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},o.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},o.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},o.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},o.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},o.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},o.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},o.DataBuffer.prototype.copy=function(){return new o.DataBuffer(this)},o.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},o.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},o.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},o.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},o.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return o.binary.raw.encode(t);if("hex"===e)return o.binary.hex.encode(t);if("base64"===e)return o.binary.base64.encode(t);if("utf8"===e)return o.text.utf8.decode(t);if("utf16"===e)return o.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},o.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t?e=o.encodeUtf8(e):void 0!==e&&"euc-kr"===t&&(e=o.encodeEucKr(e)),new o.ByteBuffer(e)},o.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},o.xorBytes=function(e,t,r){for(var n="",a="",i="",s=0,o=0;r>0;--r,++s)a=e.charCodeAt(s)^t.charCodeAt(s),o>=10&&(n+=i,i="",o=0),i+=String.fromCharCode(a),++o;return n+=i},o.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},o.bytesToHex=function(e){return o.createBuffer(e).toHex()},o.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];o.encode64=function(e,t){for(var r,n,a,i="",s="",o=0;o<e.length;)r=e.charCodeAt(o++),n=e.charCodeAt(o++),a=e.charCodeAt(o++),i+=u.charAt(r>>2),i+=u.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=u.charAt((15&n)<<2|a>>6),i+=isNaN(a)?"=":u.charAt(63&a)),t&&i.length>t&&(s+=i.substr(0,t)+"\r\n",i=i.substr(t));return s+=i},o.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,a,i="",s=0;s<e.length;)t=c[e.charCodeAt(s++)-43],r=c[e.charCodeAt(s++)-43],n=c[e.charCodeAt(s++)-43],a=c[e.charCodeAt(s++)-43],void 0===n&&(n=64),void 0===a&&(a=64),i+=String.fromCharCode(t<<2|r>>4),64!==n&&(i+=String.fromCharCode((15&r)<<4|n>>2),64!==a&&(i+=String.fromCharCode((3&n)<<6|a)));return i},o.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},o.decodeUtf8=function(e){return decodeURIComponent(escape(e))},o.encodeEucKr=function(e){return encodeURIComponent(encodeURIComponent(e))},o.decodeEucKr=function(e){return decodeURIComponent(decodeURIComponent(e))},o.binary={raw:{},hex:{},base64:{}},o.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},o.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var a=r,i=0;i<e.length;++i)n[a++]=e.charCodeAt(i);return t?a-r:n},o.binary.hex.encode=o.bytesToHex,o.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var a=0,i=r;for(1&e.length&&(a=1,n[i++]=parseInt(e[0],16));a<e.length;a+=2)n[i++]=parseInt(e.substr(a,2),16);return t?i-r:n},o.binary.base64.encode=function(e,t){for(var r,n,a,i="",s="",o=0;o<e.byteLength;)r=e[o++],n=e[o++],a=e[o++],i+=u.charAt(r>>2),i+=u.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=u.charAt((15&n)<<2|a>>6),i+=isNaN(a)?"=":u.charAt(63&a)),t&&i.length>t&&(s+=i.substr(0,t)+"\r\n",i=i.substr(t));return s+=i},o.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var a,i,s,o,u=0,l=r;u<e.length;)a=c[e.charCodeAt(u++)-43],i=c[e.charCodeAt(u++)-43],s=c[e.charCodeAt(u++)-43],o=c[e.charCodeAt(u++)-43],n[l++]=a<<2|i>>4,64!==s&&(n[l++]=(15&i)<<4|s>>2,64!==o&&(n[l++]=(3&s)<<6|o));return t?l-r:n.subarray(0,l)},o.text={utf8:{},utf16:{}},o.text.utf8.encode=function(e,t,r){e=o.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var a=r,i=0;i<e.length;++i)n[a++]=e.charCodeAt(i);return t?a-r:n},o.text.utf8.decode=function(e){return o.decodeUtf8(String.fromCharCode.apply(null,e))},o.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));var a=new Uint16Array(n);r=r||0;for(var i=r,s=r,o=0;o<e.length;++o)a[s++]=e.charCodeAt(o),i+=2;return t?i-r:n},o.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e))},o.deflate=function(e,t,r){if(t=o.decode64(e.deflate(o.encode64(t)).rval),r){var n=2;32&t.charCodeAt(1)&&(n=6),t=t.substring(n,t.length-4)}return t},o.inflate=function(e,t,r){var n=e.inflate(o.encode64(t)).rval;return null===n?null:o.decode64(n)};var l=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(null===r?n=e.removeItem(t):(r=o.encode64(JSON.stringify(r)),n=e.setItem(t,r)),void 0!==n&&!0!==n.rval){var a=new Error(n.error.message);throw a.id=n.error.id,a.name=n.error.name,a}},p=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(o.decode64(r))),r},f=function(e,t,r,n){var a=p(e,t);null===a&&(a={}),a[r]=n,l(e,t,a)},d=function(e,t,r){var n=p(e,t);return null!==n&&(n=r in n?n[r]:null),n},h=function(e,t,r){var n=p(e,t);if(null!==n&&r in n){delete n[r];var a=!0;for(var i in n){a=!1;break}a&&(n=null),l(e,t,n)}},y=function(e,t){l(e,t,null)},g=function(e,t,r){var n=null;void 0===r&&(r=["web","flash"]);var a,i=!1,s=null;for(var o in r){a=r[o];try{if("flash"===a||"both"===a){if(null===t[0])throw new Error("Flash local storage not available.");n=e.apply(this,t),i="flash"===a}"web"!==a&&"both"!==a||(t[0]=localStorage,n=e.apply(this,t),i=!0)}catch(e){s=e}if(i)break}if(!i)throw s;return n};o.setItem=function(e,t,r,n,a){g(f,arguments,a)},o.getItem=function(e,t,r,n){return g(d,arguments,n)},o.removeItem=function(e,t,r,n){g(h,arguments,n)},o.clearItems=function(e,t,r){g(y,arguments,r)},o.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var r=t.exec(e),n=null===r?null:{full:e,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?80!==n.port&&"http"===n.scheme?n.fullHost+=":"+n.port:443!==n.port&&"https"===n.scheme&&(n.fullHost+=":"+n.port):"http"===n.scheme?n.port=80:"https"===n.scheme&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var m=null;o.getQueryVariables=function(e){var t,r=function(e){for(var t={},r=e.split("&"),n=0;n<r.length;n++){var a,i,s=r[n].indexOf("=");s>0?(a=r[n].substring(0,s),i=r[n].substring(s+1)):(a=r[n],i=null),a in t||(t[a]=[]),a in Object.prototype||null===i||t[a].push(unescape(i))}return t};return void 0===e?(null===m&&(m="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),t=m):t=r(e),t},o.parseFragment=function(e){var t=e,r="",n=e.indexOf("?");n>0&&(t=e.substring(0,n),r=e.substring(n+1));var a=t.split("/");return a.length>0&&""===a[0]&&a.shift(),{pathString:t,queryString:r,path:a,query:""===r?{}:o.getQueryVariables(r)}},o.makeRequest=function(e){var t=o.parseFragment(e),r={path:t.pathString,query:t.queryString,getPath:function(e){return void 0===e?t.path:t.path[e]},getQuery:function(e,r){var n;return void 0===e?n=t.query:(n=t.query[e])&&void 0!==r&&(n=n[r]),n},getQueryLast:function(e,t){var n=r.getQuery(e);return n?n[n.length-1]:t}};return r},o.makeLink=function(e,t,r){e=n.isArray(e)?e.join("/"):e;var a=n.param(t||{});return r=r||"",e+(a.length>0?"?"+a:"")+(r.length>0?"#"+r:"")},o.setPath=function(e,t,r){if("object"==typeof e&&null!==e)for(var n=0,a=t.length;n<a;){var i=t[n++];if(n==a)e[i]=r;else{var s=i in e;(!s||s&&"object"!=typeof e[i]||s&&null===e[i])&&(e[i]={}),e=e[i]}}},o.getPath=function(e,t,r){for(var n=0,a=t.length,i=!0;i&&n<a&&"object"==typeof e&&null!==e;){var s=t[n++];i=s in e,i&&(e=e[s])}return i?e:r},o.deletePath=function(e,t){if("object"==typeof e&&null!==e)for(var r=0,n=t.length;r<n;){var a=t[r++];if(r==n)delete e[a];else{if(!(a in e)||"object"!=typeof e[a]||null===e[a])break;e=e[a]}}},o.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},o.format=function(e){for(var t,r,n=/%./g,a=0,i=[],s=0;t=n.exec(e);){r=e.substring(s,n.lastIndex-2),r.length>0&&i.push(r),s=n.lastIndex;var o=t[0][1];switch(o){case"s":case"o":a<arguments.length?i.push(arguments[1+a++]):i.push("<?>");break;case"%":i.push("%");break;default:i.push("<%"+o+"?>")}}return i.push(e.substring(s)),i.join("")},o.formatNumber=function(e,t,r,n){var a=e,i=isNaN(t=Math.abs(t))?2:t,s=void 0===r?",":r,o=void 0===n?".":n,u=a<0?"-":"",c=parseInt(a=Math.abs(+a||0).toFixed(i),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+o:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+o)+(i?s+Math.abs(a-c).toFixed(i).slice(2):"")},o.formatSize=function(e){return e=e>=1073741824?o.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?o.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?o.formatNumber(e/1024,0)+" KiB":o.formatNumber(e,0)+" bytes"},o.bytesFromIP=function(e){return-1!==e.indexOf(".")?o.bytesFromIPv4(e):-1!==e.indexOf(":")?o.bytesFromIPv6(e):null},o.bytesFromIPv4=function(e){if(e=e.split("."),4!==e.length)return null;for(var t=o.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},o.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(e){return 0===e.length&&++t,!0});for(var r=2*(8-e.length+t),n=o.createBuffer(),a=0;a<8;++a)if(e[a]&&0!==e[a].length){var i=o.hexToBytes(e[a]);i.length<2&&n.putByte(0),n.putBytes(i)}else n.fillWithByte(0,r),r=0;return n.getBytes()},o.bytesToIP=function(e){return 4===e.length?o.bytesToIPv4(e):16===e.length?o.bytesToIPv6(e):null},o.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},o.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],r=[],n=0,a=0;a<e.length;a+=2){for(var i=o.bytesToHex(e[a]+e[a+1]);"0"===i[0]&&"0"!==i;)i=i.substr(1);if("0"===i){var s=r[r.length-1],u=t.length;s&&u===s.end+1?(s.end=u,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:u,end:u})}t.push(i)}if(r.length>0){var c=r[n];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),0===c.start&&t.unshift(""),7===c.end&&t.push(""))}return t.join(":")},o.estimateCores=function(e,t){function r(e,s,u){if(0===s){var c=Math.floor(e.reduce(function(e,t){return e+t},0)/e.length);return o.cores=Math.max(1,c),URL.revokeObjectURL(i),t(null,o.cores)}n(u,function(t,n){e.push(a(u,n)),r(e,s-1,u)})}function n(e,t){for(var r=[],n=[],a=0;a<e;++a){var s=new Worker(i);s.addEventListener("message",function(a){if(n.push(a.data),n.length===e){for(var i=0;i<e;++i)r[i].terminate();t(null,n)}}),r.push(s)}for(var a=0;a<e;++a)r[a].postMessage(a)}function a(e,t){for(var r=[],n=0;n<e;++n)for(var a=t[n],i=r[n]=[],s=0;s<e;++s)if(n!==s){var o=t[s];(a.st>o.st&&a.st<o.et||o.st>a.st&&o.st<a.et)&&i.push(s)}return r.reduce(function(e,t){return Math.max(e,t.length)},0)}if("function"==typeof e&&(t=e,e={}),e=e||{},"cores"in o&&!e.update)return t(null,o.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return o.cores=navigator.hardwareConcurrency,t(null,o.cores);if("undefined"==typeof Worker)return o.cores=1,t(null,o.cores);if("undefined"==typeof Blob)return o.cores=2,t(null,o.cores);var i=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(e){for(var t=Date.now(),r=t+4;Date.now()<r;);self.postMessage({st:t,et:r})})}.toString(),")()"],{type:"application/javascript"}));r([],5,16)},o.arrayIndexOf=function(e,t){var r=-1;for(var n in e)if(e[n]===t){r=n;break}return r}}).call(t,r(11),r(112).setImmediate,r(0))},function(e,t,r){function n(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}function a(e,t,r,i){var u;n(e,t,2);var c=e.getByte();t--;var l=192&c,p=31&c;u=e.length();var f=o(e,t);if(t-=u-e.length(),void 0!==f&&f>t){if(i.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=e.length(),d.remaining=t,d.requested=f,d}f=t}var h,y,g=32==(32&c);if(g)if(h=[],void 0===f)for(;;){if(n(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}u=e.length(),h.push(a(e,t,r+1,i)),t-=u-e.length()}else for(;f>0;)u=e.length(),h.push(a(e,f,r+1,i)),t-=u-e.length(),f-=u-e.length();if(void 0===h&&l===s.Class.UNIVERSAL&&p===s.Type.BITSTRING&&(y=e.bytes(f)),void 0===h&&i.decodeBitStrings&&l===s.Class.UNIVERSAL&&p===s.Type.BITSTRING&&f>1){var m=e.read,v=t,C=0;if(p===s.Type.BITSTRING&&(n(e,t,1),C=e.getByte(),t--),0===C)try{u=e.length();var E={verbose:i.verbose,strict:!0,decodeBitStrings:!0},T=a(e,t,r+1,E),S=u-e.length();t-=S,p==s.Type.BITSTRING&&S++;var I=T.tagClass;S!==f||I!==s.Class.UNIVERSAL&&I!==s.Class.CONTEXT_SPECIFIC||(h=[T])}catch(e){}void 0===h&&(e.read=m,t=v)}if(void 0===h){if(void 0===f){if(i.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=t}if(p===s.Type.BMPSTRING)for(h="";f>0;f-=2)n(e,t,2),h+=String.fromCharCode(e.getInt16()),t-=2;else h=e.getBytes(f)}var A=void 0===y?null:{bitStringContents:y};return s.create(l,p,g,h,A)}var i=r(1);r(2),r(7);var s=i.asn1=i.asn1||{};s.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},s.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},s.create=function(e,t,r,n,a){if(i.util.isArray(n)){for(var o=[],u=0;u<n.length;++u)void 0!==n[u]&&o.push(n[u]);n=o}var c={tagClass:e,type:t,constructed:r,composed:r||i.util.isArray(n),value:n};return a&&"bitStringContents"in a&&(c.bitStringContents=a.bitStringContents,c.original=s.copy(c)),c},s.copy=function(e,t){var r;if(i.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(s.copy(e[n],t));return r}return"string"==typeof e?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:s.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},s.equals=function(e,t,r){if(i.util.isArray(e)){if(!i.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)return!!s.equals(e[n],t[n])}if(typeof e!=typeof t)return!1;if("string"==typeof e)return e===t;var a=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&s.equals(e.value,t.value);return r&&r.includeBitStringContents&&(a=a&&e.bitStringContents===t.bitStringContents),a},s.getBerValueLength=function(e){var t=e.getByte();if(128!==t){return 128&t?e.getInt((127&t)<<3):t}};var o=function(e,t){var r=e.getByte();if(t--,128!==r){var a;if(128&r){var i=127&r;n(e,t,i),a=e.getInt(i<<3)}else a=r;if(a<0)throw new Error("Negative length: "+a);return a}};s.fromDer=function(e,t){return void 0===t&&(t={strict:!0,decodeBitStrings:!0}),"boolean"==typeof t&&(t={strict:t,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),"string"==typeof e&&(e=i.util.createBuffer(e)),a(e,e.length(),0,t)},s.toDer=function(e){var t=i.util.createBuffer(),r=e.tagClass|e.type,n=i.util.createBuffer(),a=!1;if("bitStringContents"in e&&(a=!0,e.original&&(a=s.equals(e,e.original))),a)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var o=0;o<e.value.length;++o)void 0!==e.value[o]&&n.putBuffer(s.toDer(e.value[o]))}else if(e.type===s.Type.BMPSTRING)for(var o=0;o<e.value.length;++o)n.putInt16(e.value.charCodeAt(o));else e.type===s.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0==(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128==(128&e.value.charCodeAt(1)))?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(127&n.length());else{var u=n.length(),c="";do{c+=String.fromCharCode(255&u),u>>>=8}while(u>0);t.putByte(128|c.length);for(var o=c.length-1;o>=0;--o)t.putByte(c.charCodeAt(o))}return t.putBuffer(n),t},s.oidToDer=function(e){var t=e.split("."),r=i.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,a,s,o,u=2;u<t.length;++u){n=!0,a=[],s=parseInt(t[u],10);do{o=127&s,s>>>=7,n||(o|=128),a.push(o),n=!1}while(s>0);for(var c=a.length-1;c>=0;--c)r.putByte(a[c])}return r},s.derToOid=function(e){var t;"string"==typeof e&&(e=i.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n<<=7,128&r?n+=127&r:(t+="."+(n+r),n=0);return t},s.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,a=parseInt(e.substr(4,2),10),i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var u=e.charAt(10),c=10;"+"!==u&&"-"!==u&&(o=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(r,n,a),t.setUTCHours(i,s,o,0),c&&("+"===(u=e.charAt(c))||"-"===u)){var l=parseInt(e.substr(c+1,2),10),p=parseInt(e.substr(c+4,2),10),f=60*l+p;f*=6e4,"+"===u?t.setTime(+t-f):t.setTime(+t+f)}return t},s.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,a=parseInt(e.substr(6,2),10),i=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),u=0,c=0,l=!1;"Z"===e.charAt(e.length-1)&&(l=!0);var p=e.length-5,f=e.charAt(p);if("+"===f||"-"===f){c=60*parseInt(e.substr(p+1,2),10)+parseInt(e.substr(p+4,2),10),c*=6e4,"+"===f&&(c*=-1),l=!0}return"."===e.charAt(14)&&(u=1e3*parseFloat(e.substr(14),10)),l?(t.setUTCFullYear(r,n,a),t.setUTCHours(i,s,o,u),t.setTime(+t+c)):(t.setFullYear(r,n,a),t.setHours(i,s,o,u)),t},s.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},s.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},s.integerToDer=function(e){var t=i.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},s.derToInteger=function(e){"string"==typeof e&&(e=i.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},s.validate=function(e,t,r,n){var a=!1;if(e.tagClass!==t.tagClass&&void 0!==t.tagClass||e.type!==t.type&&void 0!==t.type)n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||void 0===t.constructed){if(a=!0,t.value&&i.util.isArray(t.value))for(var o=0,u=0;a&&u<t.value.length;++u)a=t.value[u].optional||!1,e.value[o]&&(a=s.validate(e.value[o],t.value[u],r,n),a?++o:t.value[u].optional&&(a=!0)),!a&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(a&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var c=e.bitStringContents.charCodeAt(0);if(0!==c)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return a};var u=/[^\\u0000-\\u00ff]/;s.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+="\n");for(var a="",o=0;o<t*r;++o)a+=" ";switch(n+=a+"Tag: ",e.tagClass){case s.Class.UNIVERSAL:n+="Universal:";break;case s.Class.APPLICATION:n+="Application:";break;case s.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case s.Class.PRIVATE:n+="Private:"}if(e.tagClass===s.Class.UNIVERSAL)switch(n+=e.type,e.type){case s.Type.NONE:n+=" (None)";break;case s.Type.BOOLEAN:n+=" (Boolean)";break;case s.Type.INTEGER:n+=" (Integer)";break;case s.Type.BITSTRING:n+=" (Bit string)";break;case s.Type.OCTETSTRING:n+=" (Octet string)";break;case s.Type.NULL:n+=" (Null)";break;case s.Type.OID:n+=" (Object Identifier)";break;case s.Type.ODESC:n+=" (Object Descriptor)";break;case s.Type.EXTERNAL:n+=" (External or Instance of)";break;case s.Type.REAL:n+=" (Real)";break;case s.Type.ENUMERATED:n+=" (Enumerated)";break;case s.Type.EMBEDDED:n+=" (Embedded PDV)";break;case s.Type.UTF8:n+=" (UTF8)";break;case s.Type.ROID:n+=" (Relative Object Identifier)";break;case s.Type.SEQUENCE:n+=" (Sequence)";break;case s.Type.SET:n+=" (Set)";break;case s.Type.PRINTABLESTRING:n+=" (Printable String)";break;case s.Type.IA5String:n+=" (IA5String (ASCII))";break;case s.Type.UTCTIME:n+=" (UTC time)";break;case s.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case s.Type.BMPSTRING:n+=" (BMP String)"}else n+=e.type;if(n+="\n",n+=a+"Constructed: "+e.constructed+"\n",e.composed){for(var c=0,l="",o=0;o<e.value.length;++o)void 0!==e.value[o]&&(c+=1,l+=s.prettyPrint(e.value[o],t+1,r),o+1<e.value.length&&(l+=","));n+=a+"Sub values: "+c+l}else{if(n+=a+"Value: ",e.type===s.Type.OID){var p=s.derToOid(e.value);n+=p,i.pki&&i.pki.oids&&p in i.pki.oids&&(n+=" ("+i.pki.oids[p]+") ")}if(e.type===s.Type.INTEGER)try{n+=s.derToInteger(e.value)}catch(t){n+="0x"+i.util.bytesToHex(e.value)}else if(e.type===s.Type.BITSTRING){if(e.value.length>1?n+="0x"+i.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var f=e.value.charCodeAt(0);1==f?n+=" (1 unused bit shown)":f>1&&(n+=" ("+f+" unused bits shown)")}}else e.type===s.Type.OCTETSTRING?(u.test(e.value)||(n+="("+e.value+") "),n+="0x"+i.util.bytesToHex(e.value)):e.type===s.Type.UTF8?n+=i.util.decodeUtf8(e.value):e.type===s.Type.PRINTABLESTRING||e.type===s.Type.IA5String?n+=e.value:u.test(e.value)?n+="0x"+i.util.bytesToHex(e.value):0===e.value.length?n+="[null]":n+=e.value}return n}},function(e,t,r){(function(e,t){var n=r(1);r(9),r(5),r(54),r(2),function(e){function r(){var e=n.prng.create(a);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}var a={},i=new Array(4),s=n.util.createBuffer();a.formatKey=function(e){var t=n.util.createBuffer(e);return e=new Array(4),e[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),n.aes._expandKey(e,!1)},a.formatSeed=function(e){var t=n.util.createBuffer(e);return e=new Array(4),e[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},a.cipher=function(e,t){return n.aes._updateBlock(e,t,i,!1),s.putInt32(i[0]),s.putInt32(i[1]),s.putInt32(i[2]),s.putInt32(i[3]),s.getBytes()},a.increment=function(e){return++e[3],e},a.md=n.md.sha256;var o=r(),u=void 0!==t&&t.versions&&t.versions.node,c=null;if("undefined"!=typeof window){var l=window.crypto||window.msCrypto;l&&l.getRandomValues&&(c=function(e){return l.getRandomValues(e)})}if(n.disableNativeCode||!u&&!c){if("undefined"==typeof window||window.document,o.collectInt(+new Date,32),"undefined"!=typeof navigator){var p="";for(var f in navigator)try{"string"==typeof navigator[f]&&(p+=navigator[f])}catch(e){}o.collect(p),p=null}e&&(e().mousemove(function(e){o.collectInt(e.clientX,16),o.collectInt(e.clientY,16)}),e().keypress(function(e){o.collectInt(e.charCode,8)}))}if(n.random)for(var f in o)n.random[f]=o[f];else n.random=o;n.random.createInstance=r}(void 0!==e?e:null)}).call(t,r(0),r(11))},function(e,t,r){var n=r(1);r(50),r(22),r(115),r(116),n.md=n.md||{},n.md.algorithms={md5:n.md5,sha1:n.sha1,sha256:n.sha256},n.md.md5=n.md5,n.md.sha1=n.sha1,n.md.sha256=n.sha256},,function(e,t,r){var n=r(1);n.pki=n.pki||{};var a=n.pki.oids=n.oids=n.oids||{};a["1.2.840.113549.1.1.1"]="rsaEncryption",a.rsaEncryption="1.2.840.113549.1.1.1",a["1.2.410.200004.1.21"]="kcdsa1",a.kcdsa1="1.2.410.200004.1.21",a["1.2.840.113549.1.1.4"]="md5WithRSAEncryption",a.md5WithRSAEncryption="1.2.840.113549.1.1.4",a["1.2.840.113549.1.1.5"]="sha1WithRSAEncryption",a.sha1WithRSAEncryption="1.2.840.113549.1.1.5",a["1.2.840.113549.1.1.7"]="RSAES-OAEP",a["RSAES-OAEP"]="1.2.840.113549.1.1.7",a["1.2.840.113549.1.1.8"]="mgf1",a.mgf1="1.2.840.113549.1.1.8",a["1.2.840.113549.1.1.9"]="pSpecified",a.pSpecified="1.2.840.113549.1.1.9",a["1.2.840.113549.1.1.10"]="RSASSA-PSS",a["RSASSA-PSS"]="1.2.840.113549.1.1.10",a["1.2.840.113549.1.1.11"]="sha256WithRSAEncryption",a.sha256WithRSAEncryption="1.2.840.113549.1.1.11",a["1.2.840.113549.1.1.12"]="sha384WithRSAEncryption",a.sha384WithRSAEncryption="1.2.840.113549.1.1.12",a["1.2.840.113549.1.1.13"]="sha512WithRSAEncryption",a.sha512WithRSAEncryption="1.2.840.113549.1.1.13",a["1.3.14.3.2.7"]="desCBC",a.desCBC="1.3.14.3.2.7",a["1.3.14.3.2.26"]="sha1",a.sha1="1.3.14.3.2.26",a["2.16.840.1.101.3.4.2.1"]="sha256",a.sha256="2.16.840.1.101.3.4.2.1",a["2.16.840.1.101.3.4.2.2"]="sha384",a.sha384="2.16.840.1.101.3.4.2.2",a["2.16.840.1.101.3.4.2.3"]="sha512",a.sha512="2.16.840.1.101.3.4.2.3",a["1.2.840.113549.2.5"]="md5",a.md5="1.2.840.113549.2.5",a["1.2.840.113549.1.7.1"]="data",a.data="1.2.840.113549.1.7.1",a["1.2.840.113549.1.7.2"]="signedData",a.signedData="1.2.840.113549.1.7.2",a["1.2.840.113549.1.7.3"]="envelopedData",a.envelopedData="1.2.840.113549.1.7.3",a["1.2.840.113549.1.7.4"]="signedAndEnvelopedData",a.signedAndEnvelopedData="1.2.840.113549.1.7.4",a["1.2.840.113549.1.7.5"]="digestedData",a.digestedData="1.2.840.113549.1.7.5",a["1.2.840.113549.1.7.6"]="encryptedData",a.encryptedData="1.2.840.113549.1.7.6",a["1.2.840.113549.1.9.1"]="emailAddress",a.emailAddress="1.2.840.113549.1.9.1",a["1.2.840.113549.1.9.2"]="unstructuredName",a.unstructuredName="1.2.840.113549.1.9.2",a["1.2.840.113549.1.9.3"]="contentType",a.contentType="1.2.840.113549.1.9.3",a["1.2.840.113549.1.9.4"]="messageDigest",a.messageDigest="1.2.840.113549.1.9.4",a["1.2.840.113549.1.9.5"]="signingTime",a.signingTime="1.2.840.113549.1.9.5",a["1.2.840.113549.1.9.6"]="counterSignature",a.counterSignature="1.2.840.113549.1.9.6",a["1.2.840.113549.1.9.7"]="challengePassword",a.challengePassword="1.2.840.113549.1.9.7",a["1.2.840.113549.1.9.8"]="unstructuredAddress",a.unstructuredAddress="1.2.840.113549.1.9.8",a["1.2.840.113549.1.9.14"]="extensionRequest",a.extensionRequest="1.2.840.113549.1.9.14",a["1.2.840.113549.1.9.20"]="friendlyName",a.friendlyName="1.2.840.113549.1.9.20",a["1.2.840.113549.1.9.21"]="localKeyId",a.localKeyId="1.2.840.113549.1.9.21",a["1.2.840.113549.1.9.22.1"]="x509Certificate",a.x509Certificate="1.2.840.113549.1.9.22.1",a["1.2.840.113549.1.12.10.1.1"]="keyBag",a.keyBag="1.2.840.113549.1.12.10.1.1",a["1.2.840.113549.1.12.10.1.2"]="pkcs8ShroudedKeyBag",a.pkcs8ShroudedKeyBag="1.2.840.113549.1.12.10.1.2",a["1.2.840.113549.1.12.10.1.3"]="certBag",a.certBag="1.2.840.113549.1.12.10.1.3",a["1.2.840.113549.1.12.10.1.4"]="crlBag",a.crlBag="1.2.840.113549.1.12.10.1.4",a["1.2.840.113549.1.12.10.1.5"]="secretBag",a.secretBag="1.2.840.113549.1.12.10.1.5",a["1.2.840.113549.1.12.10.1.6"]="safeContentsBag",a.safeContentsBag="1.2.840.113549.1.12.10.1.6",a["1.2.840.113549.1.5.13"]="pkcs5PBES2",a.pkcs5PBES2="1.2.840.113549.1.5.13",a["1.2.840.113549.1.5.12"]="pkcs5PBKDF2",a.pkcs5PBKDF2="1.2.840.113549.1.5.12",a["1.2.840.113549.1.12.1.1"]="pbeWithSHAAnd128BitRC4",a.pbeWithSHAAnd128BitRC4="1.2.840.113549.1.12.1.1",a["1.2.840.113549.1.12.1.2"]="pbeWithSHAAnd40BitRC4",a.pbeWithSHAAnd40BitRC4="1.2.840.113549.1.12.1.2",a["1.2.840.113549.1.12.1.3"]="pbeWithSHAAnd3-KeyTripleDES-CBC",a["pbeWithSHAAnd3-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.3",a["1.2.840.113549.1.12.1.4"]="pbeWithSHAAnd2-KeyTripleDES-CBC",a["pbeWithSHAAnd2-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.4",a["1.2.840.113549.1.12.1.5"]="pbeWithSHAAnd128BitRC2-CBC",a["pbeWithSHAAnd128BitRC2-CBC"]="1.2.840.113549.1.12.1.5",a["1.2.840.113549.1.12.1.6"]="pbewithSHAAnd40BitRC2-CBC",a["pbewithSHAAnd40BitRC2-CBC"]="1.2.840.113549.1.12.1.6",a["1.2.410.200004.1.15"]="pbeWithSHA1AndSEED-CBC",a["pbeWithSHA1AndSEED-CBC"]="1.2.410.200004.1.15",a["1.2.410.200004.1.4"]="seed-CBC",a["seed-CBC"]="1.2.410.200004.1.4",a["1.2.410.200004.1.4.2"]="GPKIpbeWithSHA1AndSEED-CBC",a["GPKIpbeWithSHA1AndSEED-CBC"]="1.2.410.200004.1.4.2",a["1.2.410.100001.1.20"]="aria-CBC",a["aria-CBC"]="1.2.410.100001.1.20",a["1.3.6.1.4.1.7150.3.1"]="initech-encrypted-random",a["initech-encrypted-random"]="1.3.6.1.4.1.7150.3.1",a["1.3.6.1.4.1.7150.4.1"]="replay_attack",a.replay_attack="1.3.6.1.4.1.7150.4.1",a["1.2.840.113549.3.7"]="des-EDE3-CBC",a["des-EDE3-CBC"]="1.2.840.113549.3.7",a["2.16.840.1.101.3.4.1.2"]="aes128-CBC",a["aes128-CBC"]="2.16.840.1.101.3.4.1.2",a["2.16.840.1.101.3.4.1.22"]="aes192-CBC",a["aes192-CBC"]="2.16.840.1.101.3.4.1.22",a["2.16.840.1.101.3.4.1.42"]="aes256-CBC",a["aes256-CBC"]="2.16.840.1.101.3.4.1.42",a["2.5.4.3"]="commonName",a.commonName="2.5.4.3",a["2.5.4.5"]="serialName",a.serialName="2.5.4.5",a["2.5.4.6"]="countryName",a.countryName="2.5.4.6",a["2.5.4.7"]="localityName",a.localityName="2.5.4.7",a["2.5.4.8"]="stateOrProvinceName",a.stateOrProvinceName="2.5.4.8",a["2.5.4.10"]="organizationName",a.organizationName="2.5.4.10",a["2.5.4.11"]="organizationalUnitName",a.organizationalUnitName="2.5.4.11",a["2.16.840.1.113730.1.1"]="nsCertType",a.nsCertType="2.16.840.1.113730.1.1",a["2.5.29.1"]="authorityKeyIdentifier",a["2.5.29.2"]="keyAttributes",a["2.5.29.3"]="certificatePolicies",a["2.5.29.4"]="keyUsageRestriction",a["2.5.29.5"]="policyMapping",a["2.5.29.6"]="subtreesConstraint",a["2.5.29.7"]="subjectAltName",a["2.5.29.8"]="issuerAltName",a["2.5.29.9"]="subjectDirectoryAttributes",a["2.5.29.10"]="basicConstraints",a["2.5.29.11"]="nameConstraints",a["2.5.29.12"]="policyConstraints",a["2.5.29.13"]="basicConstraints",a["2.5.29.14"]="subjectKeyIdentifier",a.subjectKeyIdentifier="2.5.29.14",a["2.5.29.15"]="keyUsage",a.keyUsage="2.5.29.15",a["2.5.29.16"]="privateKeyUsagePeriod",a["2.5.29.17"]="subjectAltName",a.subjectAltName="2.5.29.17",a["2.5.29.18"]="issuerAltName",a.issuerAltName="2.5.29.18",a["2.5.29.19"]="basicConstraints",a.basicConstraints="2.5.29.19",a["2.5.29.20"]="cRLNumber",a["2.5.29.21"]="cRLReason",a["2.5.29.22"]="expirationDate",a["2.5.29.23"]="instructionCode",a["2.5.29.24"]="invalidityDate",a["2.5.29.25"]="cRLDistributionPoints",a["2.5.29.26"]="issuingDistributionPoint",a["2.5.29.27"]="deltaCRLIndicator",a["2.5.29.28"]="issuingDistributionPoint",a["2.5.29.29"]="certificateIssuer",a["2.5.29.30"]="nameConstraints",a["2.5.29.31"]="cRLDistributionPoints",a["2.5.29.32"]="certificatePolicies",a.certificatePolicies="2.5.29.32",a["2.5.29.33"]="policyMappings",a["2.5.29.34"]="policyConstraints",a["2.5.29.35"]="authorityKeyIdentifier",a["2.5.29.36"]="policyConstraints",a["2.5.29.37"]="extKeyUsage",a.extKeyUsage="2.5.29.37",a["2.5.29.46"]="freshestCRL",a["2.5.29.54"]="inhibitAnyPolicy",a["1.3.6.1.5.5.7.3.1"]="serverAuth",a.serverAuth="1.3.6.1.5.5.7.3.1",a["1.3.6.1.5.5.7.3.2"]="clientAuth",a.clientAuth="1.3.6.1.5.5.7.3.2",a["1.3.6.1.5.5.7.3.3"]="codeSigning",a.codeSigning="1.3.6.1.5.5.7.3.3",a["1.3.6.1.5.5.7.3.4"]="emailProtection",a.emailProtection="1.3.6.1.5.5.7.3.4",a["1.3.6.1.5.5.7.3.8"]="timeStamping",a.timeStamping="1.3.6.1.5.5.7.3.8",a["1.3.6.1.5.5.7.2.1"]="cps",a.cps="1.3.6.1.5.5.7.2.1",a["1.3.6.1.5.5.7.2.2"]="unotice",a.unotice="1.3.6.1.5.5.7.2.2",a["1.3.6.1.5.5.7.1.1"]="authorityInfoAccess",a.authorityInfoAccess="1.3.6.1.5.5.7.1.1",a["1.2.410.200005.1.1.1"]="범용(개인)",a["1.2.410.200005.1.1.4"]="은행/신용카드/보험(개인)",a["1.2.410.200005.1.1.5"]="범용(기업)",a["1.2.410.200005.1.1.2"]="은행/신용카드/보험(법인)";a["1.2.410.200005.1.1.6.2"]="신용카드용",a["1.2.410.200005.1.1.6.8"]="전자세금용",a["1.2.410.200005.1.1.6.1"]="기업뱅킹",a["1.2.410.200005.1.1.6.11"]="기업뱅킹",a["1.2.410.200012.1.1.1"]="범용(개인)",a["1.2.410.200012.1.1.101"]="은행/보험용",a["1.2.410.200012.1.1.105"]="신용카드용",a["1.2.410.200012.1.1.3"]="범용(법인)",a["1.2.410.200012.5.19.1.1"]="전자세금용",a["1.2.410.200012.1.1.4281"]="용도제한용",a["1.2.410.200012.1.1.4282"]="용도제한용",a["1.2.410.200004.5.1.1.5"]="범용(개인)",a["1.2.410.200004.5.1.1.7"]="범용(법인)",a["1.2.410.200004.5.1.1.9.2"]="신용카드용",a["1.2.410.200004.5.1.1.9"]="증권/보험(개인)",a["1.2.410.200004.1.1.12.902"]="전자세금용",a["1.2.410.200004.5.1.1.9.1"]="은행/보험용(개인)",a["1.2.410.200004.5.1.1.10"]="증권/보험용(개인)",a["1.2.410.200004.5.1.1.10.1"]="은행/보험용(개인)",a["1.2.410.200004.5.1.1.10.2"]="신용카드용(법인)",a["1.2.410.200004.5.2.1.2"]="1등급 개인",a["1.2.410.200004.5.2.1.1"]="1등급 법인",a["1.2.410.200004.5.2.1.7.1"]="은행/신용카드용/보험용",a["1.2.410.200004.5.2.1.7.3"]="신용카드용",a["1.2.410.200004.5.4.1.1"]="범용(개인)",a["1.2.410.200004.5.4.1.2"]="범용(법인)",a["1.2.410.200004.5.4.1.101"]="은행/보험용",a["1.2.410.200004.5.4.1.103"]="신용카드용",a["1.2.410.200004.5.4.2.80"]="전자세금용",a["1.2.410.200004.5.3.1.1"]="기관",a["1.2.410.200004.5.3.1.2"]="법인",a["1.2.410.200004.5.3.1.9"]="개인",a["1.2.410.200004.5.5.1.1"]="범용(개인)",a["1.2.410.200004.5.5.1.2"]="범용(기업)",a["1.2.410.200004.5.5.1.3.1"]="제휴기관용(개인)",a["1.2.410.200004.5.5.1.4.1"]="제휴기관용(기업)",a["1.2.410.200004.5.5.1.4.2"]="전자세금용(기업)",a["1.2.410.200004.5.5.1.4.4"]="이용기관용",a["1.2.410.200004.5.5.1.4.5"]="특수목적용(기업)",a["1.2.410.200004.5.1.1.12"]="일반인증서",a["1.2.410.100001.2"]="GPKI 인증정책",a["1.2.410.100001.2.1"]="기관용",a["1.2.410.100001.2.1.1"]="전자관인(기관용)",a["1.2.410.100001.2.1.2"]="컴퓨터용",a["1.2.410.100001.2.1.3"]="특수목적용",a["1.2.410.100001.2.1.4"]="공공/민간 전자관인",a["1.2.410.100001.2.1.5"]="공공/민간 컴퓨터용",a["1.2.410.100001.2.1.6"]="공공/민간 특수목적용",a["1.2.410.100001.2.2"]="개인용",a["1.2.410.100001.2.2.1"]="공무원 전자서명(개인용)",a["1.2.410.100001.2.2.2"]="공공/민간 전자서명(개인용)",a["1.2.410.100001.5.3.1.1"]="전자관인",a["1.2.410.100001.5.3.1.3"]="개인용",a["1.2.410.100001.5.3.1.5"]="특수목적용",a["1.2.410.100001.5.3.1.7"]="컴퓨터용",a["1.2.410.100001.5.3.1.9"]="SSL용",a.undefined="사설인증서";a["ENG_1.2.410.200005.1.1.1"]="Public(Individual)",a["ENG_1.2.410.200005.1.1.4"]="Banking/CreditCard(Individual)",a["ENG_1.2.410.200005.1.1.5"]="Public(Enterprise)",a["ENG_1.2.410.200005.1.1.2"]="Banking/CreditCard(Corporation)",a["ENG_1.2.410.200005.1.1.6.2"]="CreditCard",a["ENG_1.2.410.200005.1.1.6.8"]="E-Tax",a["ENG_1.2.410.200005.1.1.6.1"]="Banking(Enterprise)",a["ENG_1.2.410.200005.1.1.6.11"]="Banking(Enterprise)",a["ENG_1.2.410.200012.1.1.1"]="Public(Individual)",a["ENG_1.2.410.200012.1.1.101"]="Banking",a["ENG_1.2.410.200012.1.1.105"]="CreditCard",a["ENG_1.2.410.200012.1.1.3"]="Public(Corporation)",a["ENG_1.2.410.200012.5.19.1.1"]="E-Tax",a["ENG_1.2.410.200012.1.1.4281"]="Restricted use",a["ENG_1.2.410.200012.1.1.4282"]="Restricted use",a["ENG_1.2.410.200004.5.1.1.5"]="Public(Individual)",a["ENG_1.2.410.200004.5.1.1.7"]="Public(Corporation)",a["ENG_1.2.410.200004.5.1.1.9.2"]="CreditCard",a["ENG_1.2.410.200004.5.1.1.9"]="Securities(Private)",a["ENG_1.2.410.200004.1.1.12.902"]="E-Tax",a["ENG_1.2.410.200004.5.1.1.9.1"]="Bank(Private)",a["ENG_1.2.410.200004.5.1.1.10"]="Securities(Private)",a["ENG_1.2.410.200004.5.1.1.10.1"]="Bank(Private)",a["ENG_1.2.410.200004.5.1.1.10.2"]="Credit Cards(Coroporate)",a["ENG_1.2.410.200004.5.2.1.2"]="1Class(Individual)",a["ENG_1.2.410.200004.5.2.1.1"]="1Class(Corporation)",a["ENG_1.2.410.200004.5.2.1.7.1"]="Banking/CreditCard",a["ENG_1.2.410.200004.5.2.1.7.3"]="CreditCard",a["ENG_1.2.410.200004.5.4.1.1"]="Public(Individual)",a["ENG_1.2.410.200004.5.4.1.2"]="Public(Corporation)",a["ENG_1.2.410.200004.5.4.1.101"]="Banking",a["ENG_1.2.410.200004.5.4.1.103"]="CreditCard",a["ENG_1.2.410.200004.5.4.2.80"]="E-Tax",a["ENG_1.2.410.200004.5.3.1.1"]="Agency",a["ENG_1.2.410.200004.5.3.1.2"]="Corporation",a["ENG_1.2.410.200004.5.3.1.9"]="Individual",a["ENG_1.2.410.200004.5.5.1.1"]="Public(Individual)",a["ENG_1.2.410.200004.5.5.1.2"]="Public(Corporation)",a["ENG_1.2.410.200004.5.5.1.3.1"]="Alliance(Individual)",a["ENG_1.2.410.200004.5.5.1.4.1"]="Alliance(Corporation)",a["ENG_1.2.410.200004.5.5.1.4.2"]="E-Tax(Corporation)",a["ENG_1.2.410.200004.5.5.1.4.4"]="User institution",a["ENG_1.2.410.200004.5.5.1.4.5"]="Special purpose(Corporation)",a["ENG_1.2.410.200004.5.1.1.12"]="Public",a["ENG_1.2.410.100001.2"]="GPKI Authentication policy",a["ENG_1.2.410.100001.2.1"]="Department",a["ENG_1.2.410.100001.2.1.1"]="Department",a["ENG_1.2.410.100001.2.1.2"]="Computer",a["ENG_1.2.410.100001.2.1.3"]="Special",a["ENG_1.2.410.100001.2.1.4"]="Public Department",a["ENG_1.2.410.100001.2.1.5"]="Public Computer",a["ENG_1.2.410.100001.2.1.6"]="Public Special",a["ENG_1.2.410.100001.2.2"]="Personal",a["ENG_1.2.410.100001.2.2.1"]="Personal",a["ENG_1.2.410.100001.2.2.2"]="Public Personal",a["ENG_1.2.410.100001.5.3.1.1"]="CA",a["ENG_1.2.410.100001.5.3.1.3"]="Personal",a["ENG_1.2.410.100001.5.3.1.5"]="Special",a["ENG_1.2.410.100001.5.3.1.7"]="Computer",a["ENG_1.2.410.100001.5.3.1.9"]="SSL",a.ENG_undefined="General",a["1.3.6.1.5.5.7.48.1"]="OCSP",a.OCSP="1.3.6.1.5.5.7.48.1",a["1.2.410.200004.10.1.1.1"]="VID",a.VID="1.2.410.200004.10.1.1.1",a["1.2.410.200004.10.1.1"]="KISA_ID_DATA",a.KISA_ID_DATA="1.2.410.200004.10.1.1",a["1.2.410.200004.10.1.1.2"]="id-EncryptedVID",a["id-EncryptedVID"]="1.2.410.200004.10.1.1.2",a["1.2.410.200004.10.1.1.3"]="Random",a.Random="1.2.410.200004.10.1.1.3";var i=n.pki.bankCD=n.bankCD=n.bankCD||{};i["01"]="한국은행",i["02"]="산업은행",i["03"]="기업은행",i["04"]="국민은행",i["06"]="국민은행",i[19]="국민은행",i[29]="국민은행",i["05"]="외한은행",i["07"]="수협은행",i["08"]="수출입은행",i[10]="농협은행",i[11]="농협은행",i[12]="농협은행",i[13]="농협은행",i[14]="농협은행",i[15]="농협은행",i[16]="농협은행",i[17]="농협은행",i[20]="우리은행",i[22]="우리은행",i[24]="우리은행",i[83]="우리은행",i[84]="우리은행",i[21]="신한은행",i[26]="신한은행",i[28]="신한은행",i[88]="신한은행",i[23]="SC은행",i[25]="하나은행",i[33]="하나은행",i[81]="하나은행",i[82]="하나은행",i[27]="한국씨티",i[36]="한국씨티",i[53]="한국씨티",i[31]="대구은행",i[32]="부산은행",i[34]="광주은행",i[35]="제주은행",i[37]="전북은행",i[39]="경남은행",i[46]="새마을금고",i[47]="새마을금고",i[85]="새마을금고",i[86]="새마을금고",i[48]="신협은행",i[49]="신협은행",i[50]="상호저축은행",i[51]="외국은행",i[54]="HSBC은행",i[55]="도이치은행",i[56]="에이비엔암로은행",i[57]="UFJ은행",i[58]="미즈호코퍼레이트은행",i[59]="미쓰비시도쿄UFJ은행",i[60]="B.O.A",i[71]="우체국",i[72]="우체국",i[73]="우체국",i[74]="우체국",i[75]="우체국",i[76]="신용보증기금",i[77]="기술신용보증기금",i[95]="경찰청",i[91]="이니텍",i[99]="금융결제원",i.ENG_01="www.bok.or.kr",i.ENG_02="www.kdb.co.kr",i.ENG_03="www.kiupbank.co.kr",i.ENG_04="www.kbstar.com",i.ENG_06="www.kbstar.com",i.ENG_19="www.kbstar.com",i.ENG_29="www.kbstar.com",i.ENG_05="www.keb.co.kr",i.ENG_07="www.suhyup.co.kr",i.ENG_08="www.koreaexim.go.kr",i.ENG_10="www.nonghyup.com",i.ENG_11="www.nonghyup.com",i.ENG_12="www.nonghyup.com",i.ENG_13="www.nonghyup.com",i.ENG_14="www.nonghyup.com",i.ENG_15="www.nonghyup.com",i.ENG_16="www.nonghyup.com",i.ENG_17="www.nonghyup.com",i.ENG_20="www.wooribank.com",i.ENG_22="www.wooribank.com",i.ENG_24="www.wooribank.com",i.ENG_83="www.wooribank.com",i.ENG_84="www.wooribank.com",i.ENG_21="www.shinhan.com",i.ENG_26="www.shinhan.com",i.ENG_28="www.shinhan.com",i.ENG_88="www.shinhan.com",i.ENG_23="www.scfirstbank.com",i.ENG_25="www.hanabank.com",i.ENG_33="www.hanabank.com",i.ENG_81="www.hanabank.com",i.ENG_82="www.hanabank.com",i.ENG_27="www.citibank.co.kr",i.ENG_36="www.citibank.co.kr",i.ENG_53="www.citibank.co.kr",i.ENG_31="www.daegubank.co.kr",i.ENG_32="www.pusanbank.co.kr",i.ENG_34="www.kjbank.com",i.ENG_35="www.e-jejubank.com",i.ENG_37="www.jbbank.co.kr",i.ENG_39="www.kyongnambank.co.kr",i.ENG_46="www.kfcc.co.kr",i.ENG_47="www.kfcc.co.kr",i.ENG_85="www.kfcc.co.kr",i.ENG_86="www.kfcc.co.kr",i.ENG_48="www.cu.co.kr",i.ENG_49="www.cu.co.kr",i.ENG_50="www.fsb.or.kr",i.ENG_51="외국은행",i.ENG_54="kr.hsbc.com",i.ENG_55="www.db.com",i.ENG_56="www.abnamro.com",i.ENG_57="www.ufjbank.co.jp",i.ENG_58="www.mizuhobank.co.jp",i.ENG_59="www.bk.mufg.jp",i.ENG_60="www.bankofamerica.com",i.ENG_71="www.epost.go.kr",i.ENG_72="www.epost.go.kr",i.ENG_73="www.epost.go.kr",i.ENG_74="www.epost.go.kr",i.ENG_75="www.epost.go.kr",i.ENG_76="www.kodit.co.kr",i.ENG_77="www.kibo.or.kr",i.ENG_95="www.police.go.kr",i.ENG_91="www.initech.com",i.ENG_99="www.kftc.or.kr"},,function(e,t,r){function n(e,t){var r=function(){return new u.aes.Algorithm(e,t)};u.cipher.registerAlgorithm(e,r)}function a(){h=!0,p=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;c=new Array(256),l=new Array(256),f=new Array(4),d=new Array(4);for(var t=0;t<4;++t)f[t]=new Array(256),d[t]=new Array(256);for(var r,n,a,i,s,o,u,y=0,g=0,t=0;t<256;++t){i=g^g<<1^g<<2^g<<3^g<<4,i=i>>8^255&i^99,c[y]=i,l[i]=y,s=e[i],r=e[y],n=e[r],a=e[n],o=s<<24^i<<16^i<<8^i^s,u=(r^n^a)<<24^(y^a)<<16^(y^n^a)<<8^y^r^a;for(var m=0;m<4;++m)f[m][y]=o,d[m][i]=u,o=o<<24|o>>>8,u=u<<24|u>>>8;0===y?y=g=1:(y=r^e[e[e[r^a]]],g^=e[e[g]])}}function i(e,t){for(var r,n=e.slice(0),a=1,i=n.length,s=i+6+1,o=y*s,u=i;u<o;++u)r=n[u-1],u%i==0?(r=c[r>>>16&255]<<24^c[r>>>8&255]<<16^c[255&r]<<8^c[r>>>24]^p[a]<<24,a++):i>6&&u%i==4&&(r=c[r>>>24]<<24^c[r>>>16&255]<<16^c[r>>>8&255]<<8^c[255&r]),n[u]=n[u-i]^r;if(t){var l,f=d[0],h=d[1],g=d[2],m=d[3],v=n.slice(0);o=n.length;for(var u=0,C=o-y;u<o;u+=y,C-=y)if(0===u||u===o-y)v[u]=n[C],v[u+1]=n[C+3],v[u+2]=n[C+2],v[u+3]=n[C+1];else for(var E=0;E<y;++E)l=n[C+E],v[u+(3&-E)]=f[c[l>>>24]]^h[c[l>>>16&255]]^g[c[l>>>8&255]]^m[c[255&l]];n=v}return n}function s(e,t,r,n){var a,i,s,o,u,p=e.length/4-1;n?(a=d[0],i=d[1],s=d[2],o=d[3],u=l):(a=f[0],i=f[1],s=f[2],o=f[3],u=c);var h,y,g,m,v,C,E;h=t[0]^e[0],y=t[n?3:1]^e[1],g=t[2]^e[2],m=t[n?1:3]^e[3];for(var T=3,S=1;S<p;++S)v=a[h>>>24]^i[y>>>16&255]^s[g>>>8&255]^o[255&m]^e[++T],C=a[y>>>24]^i[g>>>16&255]^s[m>>>8&255]^o[255&h]^e[++T],E=a[g>>>24]^i[m>>>16&255]^s[h>>>8&255]^o[255&y]^e[++T],m=a[m>>>24]^i[h>>>16&255]^s[y>>>8&255]^o[255&g]^e[++T],h=v,y=C,g=E;r[0]=u[h>>>24]<<24^u[y>>>16&255]<<16^u[g>>>8&255]<<8^u[255&m]^e[++T],r[n?3:1]=u[y>>>24]<<24^u[g>>>16&255]<<16^u[m>>>8&255]<<8^u[255&h]^e[++T],r[2]=u[g>>>24]<<24^u[m>>>16&255]<<16^u[h>>>8&255]<<8^u[255&y]^e[++T],r[n?1:3]=u[m>>>24]<<24^u[h>>>16&255]<<16^u[y>>>8&255]<<8^u[255&g]^e[++T]}function o(e){e=e||{};var t,r=(e.mode||"CBC").toUpperCase(),n="AES-"+r;t=e.decrypt?u.cipher.createDecipher(n,e.key):u.cipher.createCipher(n,e.key);var a=t.start;return t.start=function(e,r){var n=null;r instanceof u.util.ByteBuffer&&(n=r,r={}),r=r||{},r.output=n,r.iv=e,a.call(t,r)},t}var u=r(1);r(15),r(16),r(2),u.aes=u.aes||{},u.aes.startEncrypting=function(e,t,r,n){var a=o({key:e,output:r,decrypt:!1,mode:n});return a.start(t),a},u.aes.createEncryptionCipher=function(e,t){return o({key:e,output:null,decrypt:!1,mode:t})},u.aes.startDecrypting=function(e,t,r,n){var a=o({key:e,output:r,decrypt:!0,mode:n});return a.start(t),a},u.aes.createDecryptionCipher=function(e,t){return o({key:e,output:null,decrypt:!0,mode:t})},u.aes.Algorithm=function(e,t){h||a();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return s(r._w,e,t,!1)},decrypt:function(e,t){return s(r._w,e,t,!0)}}}),r._init=!1},u.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(u.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){t=r,r=u.util.createBuffer();for(var n=0;n<t.length;++n)r.putByte(t[n])}}else r=u.util.createBuffer(r);if(!u.util.isArray(r)){t=r,r=[];var a=t.length();if(16===a||24===a||32===a){a>>>=2;for(var n=0;n<a;++n)r.push(t.getInt32())}}if(!u.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var s=this.mode.name,o=-1!==u.util.arrayIndexOf(["CFB","OFB","CTR","GCM"],s);this._w=i(r,e.decrypt&&!o),this._init=!0}},u.aes._expandKey=function(e,t){return h||a(),i(e,t)},u.aes._updateBlock=s,n("AES-ECB",u.cipher.modes.ecb),n("AES-CBC",u.cipher.modes.cbc),n("AES-CFB",u.cipher.modes.cfb),n("AES-OFB",u.cipher.modes.ofb),n("AES-CTR",u.cipher.modes.ctr),n("AES-GCM",u.cipher.modes.gcm);var c,l,p,f,d,h=!1,y=4},,function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function a(e){if(l===setTimeout)return setTimeout(e,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(p===clearTimeout)return clearTimeout(e);if((p===n||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function s(){y&&d&&(y=!1,d.length?h=d.concat(h):g=-1,h.length&&o())}function o(){if(!y){var e=a(s);y=!0;for(var t=h.length;t;){for(d=h,h=[];++g<t;)d&&d[g].run();g=-1,t=h.length}d=null,y=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,p,f=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{p="function"==typeof clearTimeout?clearTimeout:n}catch(e){p=n}}();var d,h=[],y=!1,g=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new u(e,t)),1!==h.length||y||a(o)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,r){var n=r(1);r(5),r(2),(n.hmac=n.hmac||{}).create=function(){var e=null,t=null,r=null,a=null,i={};return i.start=function(i,s){if(null!==i)if("string"==typeof i){if(!((i=i.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+i+'"');t=n.md.algorithms[i].create()}else t=i;if(null===s)s=e;else{if("string"==typeof s)s=n.util.createBuffer(s);else if(n.util.isArray(s)){var o=s;s=n.util.createBuffer();for(var u=0;u<o.length;++u)s.putByte(o[u])}var c=s.length();c>t.blockLength&&(t.start(),t.update(s.bytes()),s=t.digest()),r=n.util.createBuffer(),a=n.util.createBuffer(),c=s.length();for(var u=0;u<c;++u){var o=s.at(u);r.putByte(54^o),a.putByte(92^o)}if(c<t.blockLength)for(var o=t.blockLength-c,u=0;u<o;++u)r.putByte(54),a.putByte(92);e=s,r=r.bytes(),a=a.bytes()}t.start(),t.update(r)},i.update=function(e){t.update(e)},i.getMac=function(){var e=t.digest().bytes();return t.start(),t.update(a),t.update(e),t.digest()},i.digest=i.getMac,i}},function(e,t,r){function n(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},a=0;a<e.values.length;++a)r.push(e.values[a].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";for(var i=0,s=-1,a=0;a<t.length;++a,++i)if(i>65&&-1!==s){var o=t[s];","===o?(++s,t=t.substr(0,s)+"\r\n "+t.substr(s)):t=t.substr(0,s)+"\r\n"+o+t.substr(s+1),i=a-s-1,s=-1,++a}else" "!==t[a]&&"\t"!==t[a]&&","!==t[a]||(s=a);return t}function a(e){return e.replace(/^\s+/,"")}var i=r(1);r(2);var s=i.pem=i.pem||{};s.encode=function(e,t){t=t||{};var r,a="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},a+=n(r)),e.contentDomain&&(r={name:"Content-Domain",values:[e.contentDomain]},a+=n(r)),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),a+=n(r)),e.headers)for(var s=0;s<e.headers.length;++s)a+=n(e.headers[s]);return e.procType&&(a+="\r\n"),a+=i.util.encode64(e.body,t.maxline||64)+"\r\n",a+="-----END "+e.type+"-----\r\n"},s.decode=function(e){for(var t,r=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,s=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,o=/\r?\n/;;){if(!(t=n.exec(e)))break;var u={type:t[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:i.util.decode64(t[3])};if(r.push(u),t[2]){for(var c=t[2].split(o),l=0;t&&l<c.length;){for(var p=c[l].replace(/\s+$/,""),f=l+1;f<c.length;++f){var d=c[f];if(!/\s/.test(d[0]))break;p+=d,l=f}if(t=p.match(s)){for(var h={name:t[1],values:[]},y=t[2].split(","),g=0;g<y.length;++g)h.values.push(a(y[g]));if(u.procType)if(u.contentDomain||"Content-Domain"!==h.name)if(u.dekInfo||"DEK-Info"!==h.name)u.headers.push(h);else{if(0===h.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');u.dekInfo={algorithm:y[0],parameters:y[1]||null}}else u.contentDomain=y[0]||"";else{if("Proc-Type"!==h.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==h.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');u.procType={version:y[0],type:y[1]}}}++l}if("ENCRYPTED"===u.procType&&!u.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},,function(e,t,r){var n=r(1);r(2),n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(e,t){var r=e;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},n.cipher.createDecipher=function(e,t){var r=e;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},n.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),n.cipher.algorithms[e]=t},n.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in n.cipher.algorithms?n.cipher.algorithms[e]:null};var a=n.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};a.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=e.output||n.util.createBuffer(),this.mode.start(t)},a.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},a.prototype.destory=function(){this._input=0},a.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}},function(e,t,r){function n(e){if("string"==typeof e&&(e=s.util.createBuffer(e)),s.util.isArray(e)&&e.length>4){var t=e;e=s.util.createBuffer();for(var r=0;r<t.length;++r)e.putByte(t[r])}return s.util.isArray(e)||(e=[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]),e}function a(e){e[e.length-1]=e[e.length-1]+1&4294967295}function i(e){return[e/4294967296|0,4294967295&e]}var s=r(1);r(2),s.cipher=s.cipher||{};var o=s.cipher.modes=s.cipher.modes||{};o.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},o.ecb.prototype.start=function(e){},o.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},o.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},o.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},o.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},o.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},o.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=n(e.iv),this._prev=this._iv.slice(0)}},o.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},o.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},o.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},o.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},o.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=s.util.createBuffer(),this._partialBytes=0},o.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=n(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32()^this._outBlock[a],t.putInt32(this._inBlock[a]);else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32()^this._outBlock[a],this._partialOutput.putInt32(this._partialBlock[a]);if(i>0)e.read-=this.blockSize;else for(var a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32(),t.putInt32(this._inBlock[a]^this._outBlock[a]);else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[a]^this._outBlock[a]);if(i>0)e.read-=this.blockSize;else for(var a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=s.util.createBuffer(),this._partialBytes=0},o.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=n(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]),this._inBlock[a]=this._outBlock[a];else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(i>0)e.read-=this.blockSize;else for(var a=0;a<this._ints;++a)this._inBlock[a]=this._outBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.ofb.prototype.decrypt=o.ofb.prototype.encrypt,o.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=s.util.createBuffer(),this._partialBytes=0},o.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=n(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}a(this._inBlock)},o.ctr.prototype.decrypt=o.ctr.prototype.encrypt,o.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=s.util.createBuffer(),this._partialBytes=0,this._R=3774873600},o.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=s.util.createBuffer(e.iv);this._cipherLength=0;var r;if(r="additionalData"in e?s.util.createBuffer(e.additionalData):s.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=s.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(12===n)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(i(8*n)))}this._inBlock=this._j0.slice(0),a(this._inBlock),this._partialBytes=0,r=s.util.createBuffer(r),this._aDataLength=i(8*r.length());var o=r.length()%this.blockSize;for(o&&r.fillWithByte(0,this.blockSize-o),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])},o.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(0===s||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),a(this._inBlock)},o.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),a(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},o.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=s.util.createBuffer();var n=this._aDataLength.concat(i(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,n);var a=[];this.cipher.encrypt(this._j0,a);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^a[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},o.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),a=0;a<128;++a){e[a/32|0]&1<<31-a%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},o.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},o.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,a=e[n]>>>4*(7-r%8)&15,i=this._m[r][a];t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3]}return t},o.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},o.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,a=16*r,i=new Array(a),s=0;s<a;++s){var o=[0,0,0,0],u=s/n|0,c=(n-1-s%n)*t;o[u]=1<<t-1<<c,i[s]=this.generateSubHashTable(this.multiply(o,e),t)}return i},o.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,a=new Array(r);a[n]=e.slice(0);for(var i=n>>>1;i>0;)this.pow(a[2*i],a[i]=[]),i>>=1;for(i=2;i<n;){for(var s=1;s<i;++s){var o=a[i],u=a[s];a[i+s]=[o[0]^u[0],o[1]^u[1],o[2]^u[2],o[3]^u[3]]}i*=2}for(a[0]=[0,0,0,0],i=n+1;i<r;++i){var c=a[i^n];a[i]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return a}},function(e,t,r){function n(e,t){var r=function(){return new o.des.Algorithm(e,t)};o.cipher.registerAlgorithm(e,r)}function a(e){for(var t,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],a=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],p=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],d=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],y=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=e.length()>8?3:1,m=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],C=0,E=0;E<g;E++){var T=e.getInt32(),S=e.getInt32();t=252645135&(T>>>4^S),S^=t,T^=t<<4,t=65535&(S>>>-16^T),T^=t,S^=t<<-16,t=858993459&(T>>>2^S),S^=t,T^=t<<2,t=65535&(S>>>-16^T),T^=t,S^=t<<-16,t=1431655765&(T>>>1^S),S^=t,T^=t<<1,t=16711935&(S>>>8^T),T^=t,S^=t<<8,t=1431655765&(T>>>1^S),S^=t,T^=t<<1,t=T<<8|S>>>20&240,T=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=t;for(var I=0;I<v.length;++I){v[I]?(T=T<<2|T>>>26,S=S<<2|S>>>26):(T=T<<1|T>>>27,S=S<<1|S>>>27),T&=-15,S&=-15;var A=r[T>>>28]|n[T>>>24&15]|a[T>>>20&15]|i[T>>>16&15]|s[T>>>12&15]|o[T>>>8&15]|u[T>>>4&15],b=c[S>>>28]|l[S>>>24&15]|p[S>>>20&15]|f[S>>>16&15]|d[S>>>12&15]|h[S>>>8&15]|y[S>>>4&15];t=65535&(b>>>16^A),m[C++]=A^t,m[C++]=b^t<<16}}return m}function i(e,t,r,n){var a,i=32===e.length?3:9;a=3===i?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,o=t[0],g=t[1];s=252645135&(o>>>4^g),g^=s,o^=s<<4,s=65535&(o>>>16^g),g^=s,o^=s<<16,s=858993459&(g>>>2^o),o^=s,g^=s<<2,s=16711935&(g>>>8^o),o^=s,g^=s<<8,s=1431655765&(o>>>1^g),g^=s,o^=s<<1,o=o<<1|o>>>31,g=g<<1|g>>>31;for(var m=0;m<i;m+=3){for(var v=a[m+1],C=a[m+2],E=a[m];E!=v;E+=C){var T=g^e[E],S=(g>>>4|g<<28)^e[E+1];s=o,o=g,g=s^(c[T>>>24&63]|p[T>>>16&63]|d[T>>>8&63]|y[63&T]|u[S>>>24&63]|l[S>>>16&63]|f[S>>>8&63]|h[63&S])}s=o,o=g,g=s}o=o>>>1|o<<31,g=g>>>1|g<<31,s=1431655765&(o>>>1^g),g^=s,o^=s<<1,s=16711935&(g>>>8^o),o^=s,g^=s<<8,s=858993459&(g>>>2^o),o^=s,g^=s<<2,s=65535&(o>>>16^g),g^=s,o^=s<<16,s=252645135&(o>>>4^g),g^=s,o^=s<<4,r[0]=o,r[1]=g}function s(e){e=e||{};var t,r=(e.mode||"CBC").toUpperCase(),n="DES-"+r;t=e.decrypt?o.cipher.createDecipher(n,e.key):o.cipher.createCipher(n,e.key);var a=t.start;return t.start=function(e,r){var n=null;r instanceof o.util.ByteBuffer&&(n=r,r={}),r=r||{},r.output=n,r.iv=e,a.call(t,r)},t}var o=r(1);r(15),r(16),r(2),o.des=o.des||{},o.des.startEncrypting=function(e,t,r,n){var a=s({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return a.start(t),a},o.des.createEncryptionCipher=function(e,t){return s({key:e,output:null,decrypt:!1,mode:t})},o.des.startDecrypting=function(e,t,r,n){var a=s({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return a.start(t),a},o.des.createDecryptionCipher=function(e,t){return s({key:e,output:null,decrypt:!0,mode:t})},o.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return i(r._keys,e,t,!1)},decrypt:function(e,t){return i(r._keys,e,t,!0)}}}),r._init=!1},o.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=o.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=a(t),this._init=!0}},n("DES-ECB",o.cipher.modes.ecb),n("DES-CBC",o.cipher.modes.cbc),n("DES-CFB",o.cipher.modes.cfb),n("DES-OFB",o.cipher.modes.ofb),n("DES-CTR",o.cipher.modes.ctr),n("3DES-ECB",o.cipher.modes.ecb),n("3DES-CBC",o.cipher.modes.cbc),n("3DES-CFB",o.cipher.modes.cfb),n("3DES-OFB",o.cipher.modes.ofb),n("3DES-CTR",o.cipher.modes.ctr);var u=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],c=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],l=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],p=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],f=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],d=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],h=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],y=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696]},function(e,t,r){function n(e,t,r){var n=u.util.createBuffer(),a=Math.ceil(t.n.bitLength()/8);if(e.length>a-11){var i=new Error("Message is too long for PKCS#1 v1.5 padding.");throw i.length=e.length,i.max=a-11,i}n.putByte(0),n.putByte(r);var s,o=a-3-e.length;if(0===r||1===r){s=0===r?0:255;for(var c=0;c<o;++c)n.putByte(s)}else for(;o>0;){for(var l=0,p=u.random.getBytes(o),c=0;c<o;++c)s=p.charCodeAt(c),0===s?++l:n.putByte(s);o=l}return n.putByte(0),n.putBytes(e),n}function a(e,t,r,n){var a=Math.ceil(t.n.bitLength()/8),i=u.util.createBuffer(e),s=i.getByte(),o=i.getByte();if(0!==s||r&&0!==o&&1!==o||!r&&2!=o||r&&0===o&&void 0===n)throw new Error("Encryption block is invalid.");var c=0;if(0===o){c=a-3-n;for(var l=0;l<c;++l)if(0!==i.getByte())throw new Error("Encryption block is invalid.")}else if(1===o)for(c=0;i.length()>1;){if(255!==i.getByte()){--i.read;break}++c}else if(2===o)for(c=0;i.length()>1;){if(0===i.getByte()){--i.read;break}++c}if(0!==i.getByte()||c!==a-3-i.length())throw new Error("Encryption block is invalid.");return i.getBytes()}function i(e,t,r){function n(){a(e.pBits,function(t,n){return t?r(t):(e.p=n,null!==e.q?i(t,e.q):void a(e.qBits,i))})}function a(e,t){u.prime.generateProbablePrime(e,s,t)}function i(t,s){if(t)return r(t);if(e.q=s,e.p.compareTo(e.q)<0){var o=e.p;e.p=e.q,e.q=o}if(0!==e.p.subtract(c.ONE).gcd(e.e).compareTo(c.ONE))return e.p=null,void n();if(0!==e.q.subtract(c.ONE).gcd(e.e).compareTo(c.ONE))return e.q=null,void a(e.qBits,i);if(e.p1=e.p.subtract(c.ONE),e.q1=e.q.subtract(c.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(c.ONE))return e.p=e.q=null,void n();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void a(e.qBits,i);var u=e.e.modInverse(e.phi);e.keys={privateKey:p.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:p.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}"function"==typeof t&&(r=t,t={}),t=t||{};var s={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(s.prng=t.prng),n()}function s(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=u.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function o(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}var u=r(1);if(r(3),r(23),r(7),r(30),r(31),r(4),r(2),void 0===c)var c=u.jsbn.BigInteger;var l=u.asn1;u.pki=u.pki||{},u.pki.rsa=u.rsa=u.rsa||{};var p=u.pki,f=[6,4,2,4,2,4,6,2],d={name:"PrivateKeyInfo",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo.privateKey",tagClass:l.Class.UNIVERSAL,type:l.Type.OCTETSTRING,constructed:!1,capture:"privateKey"},{name:"PrivateKeyInfo.attributes",tagClass:l.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"PrivateKeyInfo.attributes.attribute",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.attributes.attribute.AttributeType",tagClass:l.Class.UNIVERSAL,type:l.Class.OID,constructed:!1,capture:"AttributeType"},{name:"PrivateKeyInfo.attributes.attribute.values",tagClass:l.Class.UNIVERSAL,type:l.Class.SET,constructed:!0,value:[{name:"PrivateKeyInfo.attributes.attribute.values.AttributeValue",tagClass:l.Class.UNIVERSAL,type:l.Class.BITSTRING,constructed:!1,capture:"AttributeValue"}]}]}]}]},h={name:"RSAPrivateKey",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},y={name:"RSAPublicKey",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},g=u.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:l.Class.UNIVERSAL,type:l.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},m=function(e){var t;if(!(e.algorithm in p.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=p.oids[e.algorithm];var n=l.oidToDer(t).getBytes(),a=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]),i=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[]);i.value.push(l.create(l.Class.UNIVERSAL,l.Type.OID,!1,n)),i.value.push(l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,""));var s=l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,e.digest().getBytes());return a.value.push(i),a.value.push(s),l.toDer(a).getBytes()},v=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(c.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(c.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do{n=new c(u.util.bytesToHex(u.random.getBytes(t.n.bitLength()/8)),16).mod(t.n)}while(n.equals(c.ZERO));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var a=e.mod(t.p).modPow(t.dP,t.p),i=e.mod(t.q).modPow(t.dQ,t.q);a.compareTo(i)<0;)a=a.add(t.p);var s=a.subtract(i).multiply(t.qInv).mod(t.p).multiply(t.q).add(i);return s=s.multiply(n.modInverse(t.n)).mod(t.n)};p.rsa.encrypt=function(e,t,r){var a,i=r,s=Math.ceil(t.n.bitLength()/8);!1!==r&&!0!==r?(i=2===r,a=n(e,t,r)):(a=u.util.createBuffer(),a.putBytes(e));for(var o=new c(a.toHex(),16),l=v(o,t,i),p=l.toString(16),f=u.util.createBuffer(),d=s-Math.ceil(p.length/2);d>0;)f.putByte(0),--d;return f.putBytes(u.util.hexToBytes(p)),f.getBytes()},p.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=i,s}var o=new c(u.util.createBuffer(e).toHex(),16);if(o.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=v(o,t,r),p=l.toString(16),f=u.util.createBuffer(),d=i-Math.ceil(p.length/2);d>0;)f.putByte(0),--d;return f.putBytes(u.util.hexToBytes(p)),!1!==n?a(f.getBytes(),t,r):f.getBytes()},p.rsa.createKeyPairGenerationState=function(e,t,r){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n,a=r.prng||u.random,i={nextBytes:function(e){for(var t=a.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},s=r.algorithm||"PRIMEINC";if("PRIMEINC"!==s)throw new Error("Invalid key generation algorithm: "+s);return n={algorithm:s,state:0,bits:e,rng:i,eInt:t||65537,e:new c(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},n.e.fromInt(n.eInt),n},p.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new c(null);r.fromInt(30);for(var n,a=0,i=function(e,t){return e|t},s=+new Date,u=0;null===e.keys&&(t<=0||u<t);){if(0===e.state){var l=null===e.p?e.pBits:e.qBits,d=l-1;0===e.pqState?(e.num=new c(l,e.rng),e.num.testBit(d)||e.num.bitwiseTo(c.ONE.shiftLeft(d),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),a=0,++e.pqState):1===e.pqState?e.num.bitLength()>l?e.pqState=0:e.num.isProbablePrime(o(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(f[a++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(c.ONE).gcd(e.e).compareTo(c.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(c.ONE),e.q1=e.q.subtract(c.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(c.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var h=e.e.modInverse(e.phi);e.keys={privateKey:p.rsa.setPrivateKey(e.n,e.e,h,e.p,e.q,h.mod(e.p1),h.mod(e.q1),e.q.modInverse(e.p)),publicKey:p.rsa.setPublicKey(e.n,e.e)}}n=+new Date,u+=n-s,s=n}return null!==e.keys},p.rsa.generateKeyPair=function(e,t,r,n){1===arguments.length?"object"==typeof e?(r=e,e=void 0):"function"==typeof e&&(n=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof t?(n=t,t=void 0):"number"!=typeof t&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof r&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537);var a=p.rsa.createKeyPairGenerationState(e,t,r);if(!n)return p.rsa.stepKeyPairGenerationState(a,0),a.keys;i(a,r,n)},p.setRsaPublicKey=p.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(e,t,a){if("string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return n(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return u.pkcs1.encode_rsa_oaep(t,e,a)}};else if(-1!==u.util.arrayIndexOf(["RAW","NONE","NULL",null],t))t={encode:function(e){return e}};else if("string"==typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var i=t.encode(e,r,!0);return p.rsa.encrypt(i,r,!0)},r.verify=function(e,t,n){"string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===n?n={verify:function(e,t){return t=a(t,r,!0),e===l.fromDer(t).value[1].value}}:"NONE"!==n&&"NULL"!==n&&null!==n||(n={verify:function(e,t){return t=a(t,r,!0),e===t}});var i=p.rsa.decrypt(t,r,!0,!1);return n.verify(e,i,r.n.bitLength())},r},p.setRsaPrivateKey=p.rsa.setPrivateKey=function(e,t,r,n,i,s,o,c){var l={n:e,e:t,d:r,p:n,q:i,dP:s,dQ:o,qInv:c};return l.decrypt=function(e,t,r){"string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var n=p.rsa.decrypt(e,l,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:a};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return u.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(-1===u.util.arrayIndexOf(["RAW","NONE","NULL",null],t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(n,l,!1)},l.sign=function(e,t){var r=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:m},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);var n=t.encode(e,l.n.bitLength());return p.rsa.encrypt(n,l,r)},l},p.wrapRsaPrivateKey=function(e){var t;10===e.value.length&&e.value[9].type==l.Type.BITSTRING&&(t=e.value[9].value,e.value.pop());var r=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(0).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.rsaEncryption).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,"")]),l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,l.toDer(e).getBytes())]);return t&&r.value.push(l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(u.pki.oids.Random).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SET,!0,[l.create(l.Class.UNIVERSAL,l.Type.BITSTRING,!1,t)])])])),r},p.rsaPrivateKeyFromAsn1=function(e){var t={},r=[];l.validate(e,d,t,r)&&(e=l.fromDer(u.util.createBuffer(t.privateKey)));var n;if(t.AttributeType&&"1.2.410.200004.10.1.1.3"===l.derToOid(t.AttributeType))if("string"==typeof t.AttributeValue){var a=u.util.createBuffer(t.AttributeValue),i=a.getByte();if(0!==i)throw new TypeError("VID Format Error ["+i+"]");n=a.getBytes()}else{if(t.AttributeValue.constructor!=Array)throw new TypeError("VID Format Error");n=u.asn1.toDer(t.AttributeValue[0]).getBytes()}if(t={},r=[],!l.validate(e,h,t,r)){var s=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw s.errors=r,s}var o,f,y,g,m,v,C,E;o=u.util.createBuffer(t.privateKeyModulus).toHex(),f=u.util.createBuffer(t.privateKeyPublicExponent).toHex(),y=u.util.createBuffer(t.privateKeyPrivateExponent).toHex(),g=u.util.createBuffer(t.privateKeyPrime1).toHex(),m=u.util.createBuffer(t.privateKeyPrime2).toHex(),v=u.util.createBuffer(t.privateKeyExponent1).toHex(),C=u.util.createBuffer(t.privateKeyExponent2).toHex(),E=u.util.createBuffer(t.privateKeyCoefficient).toHex();var T=p.setRsaPrivateKey(new c(o,16),new c(f,16),new c(y,16),new c(g,16),new c(m,16),new c(v,16),new c(C,16),new c(E,16));return n&&(T.vidRandom=n),T},p.privateKeyToRSAPrivateKey=function(e){var t=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(0).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,s(e.n)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,s(e.e)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,s(e.d)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,s(e.p)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,s(e.q)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,s(e.dP)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,s(e.dQ)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,s(e.qInv))]);if(e.vidRandom){var r=String.fromCharCode(0)+e.vidRandom;t.value.push(l.create(l.Class.UNIVERSAL,l.Type.BITSTRING,!1,r))}return t},p.rsa.publicKeyFromAsn1=function(e){var t={},r=[];if(l.validate(e,g,t,r)){var n=l.derToOid(t.publicKeyOid);if(n!==p.oids.rsaEncryption){var a=new Error("Cannot read public key. Unknown OID.");throw a.oid=n,a}e=t.rsaPublicKey}if(r=[],!l.validate(e,y,t,r)){var a=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw a.errors=r,a}var i=u.util.createBuffer(t.publicKeyModulus).toHex(),s=u.util.createBuffer(t.publicKeyExponent).toHex();return p.setRsaPublicKey(new c(i,16),new c(s,16))},p.rsa.rsaPublicKeyToAsn1=p.publicKeyToSubjectPublicKeyInfo=function(e){return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.rsaEncryption).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,"")]),l.create(l.Class.UNIVERSAL,l.Type.BITSTRING,!1,[p.publicKeyToRSAPublicKey(e)])])},p.publicKeyToRSAPublicKey=function(e){return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,s(e.n)),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,s(e.e))])}},,,function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){function n(){o=String.fromCharCode(128),o+=i.util.fillString(String.fromCharCode(0),64),u=!0}function a(e,t,r){for(var n,a,i,s,o,u,c,l,p=r.length();p>=64;){for(a=e.h0,i=e.h1,s=e.h2,o=e.h3,u=e.h4,l=0;l<16;++l)n=r.getInt32(),t[l]=n,c=o^i&(s^o),n=(a<<5|a>>>27)+c+u+1518500249+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;for(;l<20;++l)n=t[l-3]^t[l-8]^t[l-14]^t[l-16],n=n<<1|n>>>31,t[l]=n,c=o^i&(s^o),n=(a<<5|a>>>27)+c+u+1518500249+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;for(;l<32;++l)n=t[l-3]^t[l-8]^t[l-14]^t[l-16],n=n<<1|n>>>31,t[l]=n,c=i^s^o,n=(a<<5|a>>>27)+c+u+1859775393+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;for(;l<40;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,c=i^s^o,n=(a<<5|a>>>27)+c+u+1859775393+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;for(;l<60;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,c=i&s|o&(i^s),n=(a<<5|a>>>27)+c+u+2400959708+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;for(;l<80;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,c=i^s^o,n=(a<<5|a>>>27)+c+u+3395469782+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;e.h0=e.h0+a|0,e.h1=e.h1+i|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,e.h4=e.h4+u|0,p-=64}}var i=r(1);r(2);var s=i.sha1=i.sha1||{};i.md=i.md||{},i.md.algorithms=i.md.algorithms||{},i.md.sha1=i.md.algorithms.sha1=s,s.create=function(){u||n();var e=null,t=i.util.createBuffer(),r=new Array(80),s={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return s.start=function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var r=s.messageLengthSize/4,n=0;n<r;++n)s.fullMessageLength.push(0);return t=i.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},s},s.start(),s.update=function(n,o){"utf8"===o&&(n=i.util.encodeUtf8(n));var u=n.length;s.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var c=s.fullMessageLength.length-1;c>=0;--c)s.fullMessageLength[c]+=u[1],u[1]=u[0]+(s.fullMessageLength[c]/4294967296>>>0),s.fullMessageLength[c]=s.fullMessageLength[c]>>>0,u[0]=u[1]/4294967296>>>0;return t.putBytes(n),a(e,r,t),(t.read>2048||0===t.length())&&t.compact(),s},s.digest=function(){var n=i.util.createBuffer();n.putBytes(t.bytes());var u=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize,c=u&s.blockLength-1;n.putBytes(o.substr(0,s.blockLength-c));for(var l,p,f=8*s.fullMessageLength[0],d=0;d<s.fullMessageLength.length-1;++d)l=8*s.fullMessageLength[d+1],p=l/4294967296>>>0,f+=p,n.putInt32(f>>>0),f=l>>>0;n.putInt32(f);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};a(h,r,n);var y=i.util.createBuffer();return y.putInt32(h.h0),y.putInt32(h.h1),y.putInt32(h.h2),y.putInt32(h.h3),y.putInt32(h.h4),y},s};var o=null,u=!1},function(e,t,r){function n(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function a(){return new n(null)}function i(e,t,r,n,a,i){for(;--i>=0;){var s=t*this.data[e++]+r.data[n]+a;a=Math.floor(s/67108864),r.data[n++]=67108863&s}return a}function s(e,t,r,n,a,i){for(var s=32767&t,o=t>>15;--i>=0;){var u=32767&this.data[e],c=this.data[e++]>>15,l=o*u+c*s;u=s*u+((32767&l)<<15)+r.data[n]+(1073741823&a),a=(u>>>30)+(l>>>15)+o*c+(a>>>30),r.data[n++]=1073741823&u}return a}function o(e,t,r,n,a,i){for(var s=16383&t,o=t>>14;--i>=0;){var u=16383&this.data[e],c=this.data[e++]>>14,l=o*u+c*s;u=s*u+((16383&l)<<14)+r.data[n]+a,a=(u>>28)+(l>>14)+o*c,r.data[n++]=268435455&u}return a}function u(e){return it.charAt(e)}function c(e,t){var r=st[e.charCodeAt(t)];return null==r?-1:r}function l(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function p(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function f(e){var t=a();return t.fromInt(e),t}function d(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var a=e.length,i=!1,s=0;--a>=0;){var o=8==r?255&e[a]:c(e,a);o<0?"-"==e.charAt(a)&&(i=!0):(i=!1,0==s?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&n.ZERO.subTo(this,this)}function h(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function y(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,a=!1,i="",s=this.t,o=this.DB-s*this.DB%t;if(s-- >0)for(o<this.DB&&(r=this.data[s]>>o)>0&&(a=!0,i=u(r));s>=0;)o<t?(r=(this.data[s]&(1<<o)-1)<<t-o,r|=this.data[--s]>>(o+=this.DB-t)):(r=this.data[s]>>(o-=t)&n,o<=0&&(o+=this.DB,--s)),r>0&&(a=!0),a&&(i+=u(r));return a?i:"0"}function g(){var e=a();return n.ZERO.subTo(this,e),e}function m(){return this.s<0?this.negate():this}function v(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0}function C(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function E(){return this.t<=0?0:this.DB*(this.t-1)+C(this.data[this.t-1]^this.s&this.DM)}function T(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function S(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function I(e,t){var r,n=e%this.DB,a=this.DB-n,i=(1<<a)-1,s=Math.floor(e/this.DB),o=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+s+1]=this.data[r]>>a|o,o=(this.data[r]&i)<<n;for(r=s-1;r>=0;--r)t.data[r]=0;t.data[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()}function A(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)return void(t.t=0);var n=e%this.DB,a=this.DB-n,i=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)t.data[s-r-1]|=(this.data[s]&i)<<a,t.data[s-r]=this.data[s]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&i)<<a),t.t=this.t-r,t.clamp()}function b(e,t){for(var r=0,n=0,a=Math.min(e.t,this.t);r<a;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function N(e,t){var r=this.abs(),a=e.abs(),i=r.t;for(t.t=i+a.t;--i>=0;)t.data[i]=0;for(i=0;i<a.t;++i)t.data[i+r.t]=r.am(0,a.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&n.ZERO.subTo(t,t)}function B(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function w(e,t,r){var i=e.abs();if(!(i.t<=0)){var s=this.abs();if(s.t<i.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=a());var o=a(),u=this.s,c=e.s,l=this.DB-C(i.data[i.t-1]);l>0?(i.lShiftTo(l,o),s.lShiftTo(l,r)):(i.copyTo(o),s.copyTo(r));var p=o.t,f=o.data[p-1];if(0!=f){var d=f*(1<<this.F1)+(p>1?o.data[p-2]>>this.F2:0),h=this.FV/d,y=(1<<this.F1)/d,g=1<<this.F2,m=r.t,v=m-p,E=null==t?a():t;for(o.dlShiftTo(v,E),r.compareTo(E)>=0&&(r.data[r.t++]=1,r.subTo(E,r)),n.ONE.dlShiftTo(p,E),E.subTo(o,o);o.t<p;)o.data[o.t++]=0;for(;--v>=0;){var T=r.data[--m]==f?this.DM:Math.floor(r.data[m]*h+(r.data[m-1]+g)*y);if((r.data[m]+=o.am(0,T,r,v,0,p))<T)for(o.dlShiftTo(v,E),r.subTo(E,r);r.data[m]<--T;)r.subTo(E,r)}null!=t&&(r.drShiftTo(p,t),u!=c&&n.ZERO.subTo(t,t)),r.t=p,r.clamp(),l>0&&r.rShiftTo(l,r),u<0&&n.ZERO.subTo(r,r)}}}function R(e){var t=a();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(n.ZERO)>0&&e.subTo(t,t),t}function k(e){this.m=e}function _(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function U(e){return e}function L(e){e.divRemTo(this.m,null,e)}function D(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function P(e,t){e.squareTo(t),this.reduce(t)}function x(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function V(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function O(e){var t=a();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(n.ZERO)>0&&this.m.subTo(t,t),t}function K(e){var t=a();return e.copyTo(t),this.reduce(t),t}function M(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function G(e,t){e.squareTo(t),this.reduce(t)}function F(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function q(){return 0==(this.t>0?1&this.data[0]:this.s)}function j(e,t){if(e>4294967295||e<1)return n.ONE;var r=a(),i=a(),s=t.convert(this),o=C(e)-1;for(s.copyTo(r);--o>=0;)if(t.sqrTo(r,i),(e&1<<o)>0)t.mulTo(i,s,r);else{var u=r;r=i,i=u}return t.revert(r)}function H(e,t){var r;return r=e<256||t.isEven()?new k(t):new V(t),this.exp(e,r)}function Q(){var e=a();return this.copyTo(e),e}function X(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function z(){return 0==this.t?this.s:this.data[0]<<24>>24}function W(){return 0==this.t?this.s:this.data[0]<<16>>16}function Y(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function $(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function Z(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=f(r),i=a(),s=a(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(e).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(e)+o}function J(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),a=Math.pow(t,r),i=!1,s=0,o=0,u=0;u<e.length;++u){var l=c(e,u);l<0?"-"==e.charAt(u)&&0==this.signum()&&(i=!0):(o=t*o+l,++s>=r&&(this.dMultiply(a),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(o,0)),i&&n.ZERO.subTo(this,this)}function ee(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(n.ONE.shiftLeft(e-1),ue,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(n.ONE.shiftLeft(e-1),this);else{var a=new Array,i=7&e;a.length=1+(e>>3),t.nextBytes(a),i>0?a[0]&=(1<<i)-1:a[0]=0,this.fromString(a,256)}}function te(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,a=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[a++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==a&&(128&this.s)!=(128&r)&&++a,(a>0||r!=this.s)&&(t[a++]=r);return t}function re(e){return 0==this.compareTo(e)}function ne(e){return this.compareTo(e)<0?this:e}function ae(e){return this.compareTo(e)>0?this:e}function ie(e,t,r){var n,a,i=Math.min(e.t,this.t);for(n=0;n<i;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(a=e.s&this.DM,n=i;n<this.t;++n)r.data[n]=t(this.data[n],a);r.t=this.t}else{for(a=this.s&this.DM,n=i;n<e.t;++n)r.data[n]=t(a,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function se(e,t){return e&t}function oe(e){var t=a();return this.bitwiseTo(e,se,t),t}function ue(e,t){return e|t}function ce(e){var t=a();return this.bitwiseTo(e,ue,t),t}function le(e,t){return e^t}function pe(e){var t=a();return this.bitwiseTo(e,le,t),t}function fe(e,t){return e&~t}function de(e){var t=a();return this.bitwiseTo(e,fe,t),t}function he(){for(var e=a(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function ye(e){var t=a();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function ge(e){var t=a();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function me(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function ve(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+me(this.data[e]);return this.s<0?this.t*this.DB:-1}function Ce(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function Ee(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=Ce(this.data[r]^t);return e}function Te(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)}function Se(e,t){var r=n.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function Ie(e){return this.changeBit(e,ue)}function Ae(e){return this.changeBit(e,fe)}function be(e){return this.changeBit(e,le)}function Ne(e,t){for(var r=0,n=0,a=Math.min(e.t,this.t);r<a;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function Be(e){var t=a();return this.addTo(e,t),t}function we(e){var t=a();return this.subTo(e,t),t}function Re(e){var t=a();return this.multiplyTo(e,t),t}function ke(e){var t=a();return this.divRemTo(e,t,null),t}function _e(e){var t=a();return this.divRemTo(e,null,t),t}function Ue(e){var t=a(),r=a();return this.divRemTo(e,t,r),new Array(t,r)}function Le(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function De(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Pe(){}function xe(e){return e}function Ve(e,t,r){e.multiplyTo(t,r)}function Oe(e,t){e.squareTo(t)}function Ke(e){return this.exp(e,new Pe)}function Me(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var a;for(a=r.t-this.t;n<a;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(a=Math.min(e.t,t);n<a;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function Ge(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Fe(e){this.r2=a(),this.q3=a(),n.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function qe(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=a();return e.copyTo(t),this.reduce(t),t}function je(e){return e}function He(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Qe(e,t){e.squareTo(t),this.reduce(t)}function Xe(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function ze(e,t){var r,n,i=e.bitLength(),s=f(1);if(i<=0)return s;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new k(t):t.isEven()?new Fe(t):new V(t);var o=new Array,u=3,c=r-1,l=(1<<r)-1;if(o[1]=n.convert(this),r>1){var p=a();for(n.sqrTo(o[1],p);u<=l;)o[u]=a(),n.mulTo(p,o[u-2],o[u]),u+=2}var d,h,y=e.t-1,g=!0,m=a();for(i=C(e.data[y])-1;y>=0;){for(i>=c?d=e.data[y]>>i-c&l:(d=(e.data[y]&(1<<i+1)-1)<<c-i,y>0&&(d|=e.data[y-1]>>this.DB+i-c)),u=r;0==(1&d);)d>>=1,--u;if((i-=u)<0&&(i+=this.DB,--y),g)o[d].copyTo(s),g=!1;else{for(;u>1;)n.sqrTo(s,m),n.sqrTo(m,s),u-=2;u>0?n.sqrTo(s,m):(h=s,s=m,m=h),n.mulTo(m,o[d],s)}for(;y>=0&&0==(e.data[y]&1<<i);)n.sqrTo(s,m),h=s,s=m,m=h,--i<0&&(i=this.DB-1,--y)}return n.revert(s)}function We(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var a=t.getLowestSetBit(),i=r.getLowestSetBit();if(i<0)return t;for(a<i&&(i=a),i>0&&(t.rShiftTo(i,t),r.rShiftTo(i,r));t.signum()>0;)(a=t.getLowestSetBit())>0&&t.rShiftTo(a,t),(a=r.getLowestSetBit())>0&&r.rShiftTo(a,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return i>0&&r.lShiftTo(i,r),r}function Ye(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function $e(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return n.ZERO;for(var r=e.clone(),a=this.clone(),i=f(1),s=f(0),o=f(0),u=f(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;a.isEven();)a.rShiftTo(1,a),t?(o.isEven()&&u.isEven()||(o.addTo(this,o),u.subTo(e,u)),o.rShiftTo(1,o)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);r.compareTo(a)>=0?(r.subTo(a,r),t&&i.subTo(o,i),s.subTo(u,s)):(a.subTo(r,a),t&&o.subTo(i,o),u.subTo(s,u))}return 0!=a.compareTo(n.ONE)?n.ZERO:u.compareTo(e)>=0?u.subtract(e):u.signum()<0?(u.addTo(e,u),u.signum()<0?u.add(e):u):u}function Ze(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=ot[ot.length-1]){for(t=0;t<ot.length;++t)if(r.data[0]==ot[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<ot.length;){for(var n=ot[t],a=t+1;a<ot.length&&n<ut;)n*=ot[a++];for(n=r.modInt(n);t<a;)if(n%ot[t++]==0)return!1}return r.millerRabin(e)}function Je(e){var t=this.subtract(n.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var a,i=t.shiftRight(r),s=et(),o=0;o<e;++o){do{a=new n(this.bitLength(),s)}while(a.compareTo(n.ONE)<=0||a.compareTo(t)>=0);var u=a.modPow(i,this);if(0!=u.compareTo(n.ONE)&&0!=u.compareTo(t)){for(var c=1;c++<r&&0!=u.compareTo(t);)if(u=u.modPowInt(2,this),0==u.compareTo(n.ONE))return!1;if(0!=u.compareTo(t))return!1}}return!0}function et(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}}}var tt,rt=r(1);"undefined"==typeof navigator?(n.prototype.am=o,tt=28):"Microsoft Internet Explorer"==navigator.appName?(n.prototype.am=s,tt=30):"Netscape"!=navigator.appName?(n.prototype.am=i,tt=26):(n.prototype.am=o,tt=28),n.prototype.DB=tt,n.prototype.DM=(1<<tt)-1,n.prototype.DV=1<<tt;n.prototype.FV=Math.pow(2,52),n.prototype.F1=52-tt,n.prototype.F2=2*tt-52;var nt,at,it="0123456789abcdefghijklmnopqrstuvwxyz",st=new Array;for(nt="0".charCodeAt(0),at=0;at<=9;++at)st[nt++]=at;for(nt="a".charCodeAt(0),at=10;at<36;++at)st[nt++]=at;for(nt="A".charCodeAt(0),at=10;at<36;++at)st[nt++]=at;k.prototype.convert=_,k.prototype.revert=U,k.prototype.reduce=L,k.prototype.mulTo=D,k.prototype.sqrTo=P,V.prototype.convert=O,V.prototype.revert=K,V.prototype.reduce=M,V.prototype.mulTo=F,V.prototype.sqrTo=G,n.prototype.copyTo=l,n.prototype.fromInt=p,n.prototype.fromString=d,n.prototype.clamp=h,n.prototype.dlShiftTo=T,n.prototype.drShiftTo=S,n.prototype.lShiftTo=I,n.prototype.rShiftTo=A,n.prototype.subTo=b,n.prototype.multiplyTo=N,n.prototype.squareTo=B,n.prototype.divRemTo=w,n.prototype.invDigit=x,n.prototype.isEven=q,n.prototype.exp=j,n.prototype.toString=y,n.prototype.negate=g,n.prototype.abs=m,n.prototype.compareTo=v,n.prototype.bitLength=E,n.prototype.mod=R,n.prototype.modPowInt=H,n.ZERO=f(0),n.ONE=f(1),Pe.prototype.convert=xe,Pe.prototype.revert=xe,Pe.prototype.mulTo=Ve,Pe.prototype.sqrTo=Oe,Fe.prototype.convert=qe,Fe.prototype.revert=je,Fe.prototype.reduce=He,Fe.prototype.mulTo=Xe,Fe.prototype.sqrTo=Qe;var ot=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],ut=(1<<26)/ot[ot.length-1];n.prototype.chunkSize=Y,n.prototype.toRadix=Z,n.prototype.fromRadix=J,n.prototype.fromNumber=ee,n.prototype.bitwiseTo=ie,n.prototype.changeBit=Se,n.prototype.addTo=Ne,n.prototype.dMultiply=Le,n.prototype.dAddOffset=De,n.prototype.multiplyLowerTo=Me,n.prototype.multiplyUpperTo=Ge,n.prototype.modInt=Ye,n.prototype.millerRabin=Je,n.prototype.clone=Q,n.prototype.intValue=X,n.prototype.byteValue=z,n.prototype.shortValue=W,n.prototype.signum=$,n.prototype.toByteArray=te,n.prototype.equals=re,n.prototype.min=ne,n.prototype.max=ae,n.prototype.and=oe,n.prototype.or=ce,n.prototype.xor=pe,n.prototype.andNot=de,n.prototype.not=he,n.prototype.shiftLeft=ye,n.prototype.shiftRight=ge,n.prototype.getLowestSetBit=ve,n.prototype.bitCount=Ee,n.prototype.testBit=Te,n.prototype.setBit=Ie,n.prototype.clearBit=Ae,n.prototype.flipBit=be,n.prototype.add=Be,n.prototype.subtract=we,n.prototype.multiply=Re,n.prototype.divide=ke,n.prototype.remainder=_e,n.prototype.divideAndRemainder=Ue,n.prototype.modPow=ze,n.prototype.modInverse=$e,n.prototype.pow=Ke,n.prototype.gcd=We,n.prototype.isProbablePrime=Ze,rt.jsbn=rt.jsbn||{},rt.jsbn.BigInteger=n},function(e,t,r){function n(e,t){"string"==typeof t&&(t={shortName:t});for(var r,n=null,a=0;null===n&&a<e.attributes.length;++a)r=e.attributes[a],t.type&&t.type===r.type?n=r:t.name&&t.name===r.name?n=r:t.shortName&&t.shortName===r.shortName&&(n=r);return n}function a(e){for(var t,r,n=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]),a=e.attributes,i=0;i<a.length;++i){t=a[i];var s=t.value,o=y.Type.PRINTABLESTRING;"valueTagClass"in t&&(o=t.valueTagClass),r=y.create(y.Class.UNIVERSAL,y.Type.SET,!0,[y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(t.type).getBytes()),y.create(y.Class.UNIVERSAL,o,!1,s)])]),n.value.push(r)}return n}function s(e){for(var t,r=0;r<e.length;++r){if(t=e[r],void 0===t.name&&(t.type&&t.type in g.oids?t.name=g.oids[t.type]:t.shortName&&t.shortName in v&&(t.name=g.oids[v[t.shortName]])),void 0===t.type){if(!(t.name&&t.name in g.oids)){var n=new Error("Attribute type not specified.");throw n.attribute=t,n}t.type=g.oids[t.name]}if(void 0===t.shortName&&t.name&&t.name in v&&(t.shortName=v[t.name]),t.type===m.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=y.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var a=0;a<t.extensions.length;++a)t.value.push(g.certificateExtensionToAsn1(o(t.extensions[a])))}if(void 0===t.value){var n=new Error("Attribute value not specified.");throw n.attribute=t,n}}}function o(e,t){if(t=t||{},void 0===e.name&&e.id&&e.id in g.oids&&(e.name=g.oids[e.id]),void 0===e.id){if(!(e.name&&e.name in g.oids)){var r=new Error("Extension ID not specified.");throw r.extension=e,r}e.id=g.oids[e.name]}if(void 0!==e.value)return e;if("keyUsage"===e.name){var n=0,a=0,i=0;e.digitalSignature&&(a|=128,n=7),e.nonRepudiation&&(a|=64,n=6),e.keyEncipherment&&(a|=32,n=5),e.dataEncipherment&&(a|=16,n=4),e.keyAgreement&&(a|=8,n=3),e.keyCertSign&&(a|=4,n=2),e.cRLSign&&(a|=2,n=1),e.encipherOnly&&(a|=1,n=0),e.decipherOnly&&(i|=128,n=7);var s=String.fromCharCode(n);0!==i?s+=String.fromCharCode(a)+String.fromCharCode(i):0!==a&&(s+=String.fromCharCode(a)),e.value=y.create(y.Class.UNIVERSAL,y.Type.BITSTRING,!1,s)}else if("basicConstraints"===e.name)e.value=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(y.create(y.Class.UNIVERSAL,y.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]);var o=e.value.value;for(var u in e)!0===e[u]&&(u in m?o.push(y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(m[u]).getBytes())):-1!==u.indexOf(".")&&o.push(y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(u).getBytes())))}else if("nsCertType"===e.name){var n=0,a=0;e.client&&(a|=128,n=7),e.server&&(a|=64,n=6),e.email&&(a|=32,n=5),e.objsign&&(a|=16,n=4),e.reserved&&(a|=8,n=3),e.sslCA&&(a|=4,n=2),e.emailCA&&(a|=2,n=1),e.objCA&&(a|=1,n=0);var s=String.fromCharCode(n);0!==a&&(s+=String.fromCharCode(a)),e.value=y.create(y.Class.UNIVERSAL,y.Type.BITSTRING,!1,s)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]);for(var c,l=0;l<e.altNames.length;++l){c=e.altNames[l];var s=c.value;if(7===c.type&&c.ip){if(null===(s=h.util.bytesFromIP(c.ip))){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else 8===c.type&&(s=c.oid?y.oidToDer(y.oidToDer(c.oid)):y.oidToDer(s));e.value.value.push(y.create(y.Class.CONTEXT_SPECIFIC,c.type,!1,s))}}else if("subjectKeyIdentifier"===e.name&&t.cert){var p=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=p.toHex(),e.value=y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,p.getBytes())}if(void 0===e.value){var r=new Error("Extension value not specified.");throw r.extension=e,r}return e}function u(e,t){switch(e){case m["RSASSA-PSS"]:var r=[];return void 0!==t.hash.algorithmOid&&r.push(y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(t.hash.algorithmOid).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&r.push(y.create(y.Class.CONTEXT_SPECIFIC,1,!0,[y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(t.mgf.algorithmOid).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(t.mgf.hash.algorithmOid).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&r.push(y.create(y.Class.CONTEXT_SPECIFIC,2,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(t.saltLength).getBytes())])),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,r);default:return y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")}}function l(e){var t=y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var r=e.attributes,n=0;n<r.length;++n){var a=r[n],i=a.value,s=y.Type.UTF8;"valueTagClass"in a&&(s=a.valueTagClass),s===y.Type.UTF8&&(i=h.util.encodeUtf8(i));var o=!1;"valueConstructed"in a&&(o=a.valueConstructed);var u=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(a.type).getBytes()),y.create(y.Class.UNIVERSAL,y.Type.SET,!0,[y.create(y.Class.UNIVERSAL,s,o,i)])]);t.value.push(u)}return t}function p(e){for(var t="",r=0;r<e.value.length;r++){var n=e.value[r].value[0].value[0],a=e.value[r].value[0].value[1];n.type===h.asn1.Type.OID&&(n=h.asn1.derToOid(n.value),n===h.pki.oids.commonName?(n=v.commonName,t=n+"="+a.value+"\n"+t):n===h.pki.oids.countryName?(n=v.countryName,t=n+"="+a.value+"\n"+t):n===h.pki.oids.localityName?(n=v.localityName,t=n+"="+a.value+"\n"+t):n===h.pki.oids.stateOrProvinceName?(n=v.stateOrProvinceName,t=n+"="+a.value+"\n"+t):n===h.pki.oids.organizationName?(n=v.organizationName,t=n+"="+a.value+"\n"+t):n===h.pki.oids.organizationalUnitName?(n=v.organizationalUnitName,t=n+"="+a.value+"\n"+t):n===h.pki.oids.emailAddress&&(n=v.emailAddress,t=n+"="+a.value+"\n"+t))}return t}function f(e){var t,r,n=e.policyQualifiers,a="[1]Certificate Policy:\n     Policy Identifier="+e.oid+"\n";for(i=0;i<n.length;i++){"unotice"===n[i].name?(t="사용자 알림",r="Notice Text="):(t=n[i].name,r="");d(n[i].value)||(n[i].value=h.util.decodeUtf8(n[i].value)),a+="     [1,"+(i+1)+"]Policy Qualifier Info:\n          Policy Qualifier Id=",a+=t+"\n          Qualifier:\n               "+r+n[i].value+"\n"}return a}function d(e){return c=e.charCodeAt(0),4352<=c&&c<=4607||(12592<=c&&c<=12687||44032<=c&&c<=55203)}var h=r(1);r(9),r(3),r(17),r(5),r(120),r(7),r(13),r(32),r(18),r(2),r(33);var y=h.asn1,g=h.pki=h.pki||{},m=g.oids,v={};v.CN=m.commonName,v.commonName="CN",v.C=m.countryName,v.countryName="C",v.L=m.localityName,v.localityName="L",v.ST=m.stateOrProvinceName,v.stateOrProvinceName="ST",v.O=m.organizationName,v.organizationName="O",v.OU=m.organizationalUnitName,v.organizationalUnitName="OU",v.E=m.emailAddress,v.emailAddress="E";var C={name:"SubjectPublicKeyInfo",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:y.Class.UNIVERSAL,type:y.Type.BITSTRING,constructed:!1}]},E={name:"Certificate",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:y.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:y.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:y.Class.UNIVERSAL,type:y.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:y.Class.UNIVERSAL,type:y.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:y.Class.UNIVERSAL,type:y.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:y.Class.UNIVERSAL,type:y.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},C,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:y.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:y.Class.UNIVERSAL,type:y.Type.BITSTRING,constructed:!1,capture:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:y.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:y.Class.UNIVERSAL,type:y.Type.BITSTRING,constructed:!1,capture:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:y.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:y.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:y.Class.UNIVERSAL,type:y.Type.BITSTRING,constructed:!1,capture:"certSignature"}]},T={name:"rsapss",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:y.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:y.Class.UNIVERSAL,type:y.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:y.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:y.Class.UNIVERSAL,type:y.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:y.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:y.Class.UNIVERSAL,type:y.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:y.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:y.Class.UNIVERSAL,type:y.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},S={name:"CertificationRequestInfo",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:y.Class.UNIVERSAL,type:y.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},C,{name:"CertificationRequestInfo.attributes",tagClass:y.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:y.Class.UNIVERSAL,type:y.Type.SET,constructed:!0}]}]}]},I={name:"CertificationRequest",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[S,{name:"CertificationRequest.signatureAlgorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:y.Class.UNIVERSAL,type:y.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:y.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:y.Class.UNIVERSAL,type:y.Type.BITSTRING,constructed:!1,capture:"csrSignature"}]};g.RDNAttributesAsArray=function(e,t){for(var r,n,a,i=[],s=0;s<e.value.length;++s){r=e.value[s];for(var o=0;o<r.value.length;++o)a={},n=r.value[o],a.type=y.derToOid(n.value[0].value),a.value=n.value[1].value,a.valueTagClass=n.value[1].type,a.type in m&&(a.name=m[a.type],a.name in v&&(a.shortName=v[a.name])),t&&(t.update(a.type),t.update(a.value)),i.push(a)}return i},g.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],a=y.derToOid(n.value[0].value),i=n.value[1].value,s=0;s<i.length;++s){var o={};if(o.type=a,o.value=i[s].value,o.valueTagClass=i[s].type,o.type in m&&(o.name=m[o.type],o.name in v&&(o.shortName=v[o.name])),o.type===m.extensionRequest){o.extensions=[];for(var u=0;u<o.value.length;++u)o.extensions.push(g.certificateExtensionFromAsn1(o.value[u]))}t.push(o)}return t};var A=function(e,t,r){var n={};if(e!==m["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:m.sha1},mgf:{algorithmOid:m.mgf1,hash:{algorithmOid:m.sha1}},saltLength:20});var a={},i=[];if(!y.validate(t,T,a,i)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=i,s}return void 0!==a.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=y.derToOid(a.hashOid)),void 0!==a.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=y.derToOid(a.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=y.derToOid(a.maskGenHashOid)),void 0!==a.saltLength&&(n.saltLength=a.saltLength.charCodeAt(0)),n};g.certificateFromPem=function(e,t,r){var n=h.pem.decode(e)[0];if("CERTIFICATE"!==n.type&&"X509 CERTIFICATE"!==n.type&&"TRUSTED CERTIFICATE"!==n.type){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=n.type,a}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var i=y.fromDer(n.body,r);return g.certificateFromAsn1(i,t)},g.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:y.toDer(g.certificateToAsn1(e)).getBytes()};return h.pem.encode(r,{maxline:t})},g.publicKeyFromPem=function(e){var t=h.pem.decode(e)[0];if("PUBLIC KEY"!==t.type&&"RSA PUBLIC KEY"!==t.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=y.fromDer(t.body);return g.publicKeyFromAsn1(n)},g.publicKeyToAsn1=function(e){if(e)return e.n?g.rsa.rsaPublicKeyToAsn1(e):g.kcdsa.KCDSApublicKeyToAsn1(e);throw new Error("Could not convert public key from Asn1.")},g.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:y.toDer(g.publicKeyToAsn1(e)).getBytes()};return h.pem.encode(r,{maxline:t})},g.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:y.toDer(g.publicKeyToRSAPublicKey(e)).getBytes()};return h.pem.encode(r,{maxline:t})},g.getPublicKeyFingerprint=function(e,t){t=t||{};var r,n=t.md||h.md.sha1.create(),a=t.type||"RSAPublicKey";switch(a){case"RSAPublicKey":r=y.toDer(g.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":r=y.toDer(g.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}n.start(),n.update(r);var i=n.digest();if("hex"===t.encoding){var s=i.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}if("binary"===t.encoding)return i.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return i},g.certificationRequestFromPem=function(e,t,r){var n=h.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==n.type){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=n.type,a}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var i=y.fromDer(n.body,r);return g.certificationRequestFromAsn1(i,t)},g.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:y.toDer(g.certificationRequestToAsn1(e)).getBytes()};return h.pem.encode(r,{maxline:t})},g.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return n(e.issuer,t)},e.issuer.addField=function(t){s([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return n(e.subject,t)},e.subject.addField=function(t){s([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.publicKeyOid=null,e.setSubject=function(t,r){s(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){s(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)o(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){"string"==typeof t&&(t={name:t});for(var r,n=null,a=0;null===n&&a<e.extensions.length;++a)r=e.extensions[a],t.id&&r.id===t.id?n=r:t.name&&r.name===t.name&&(n=r);return n},e.sign=function(t,r){e.md=r||h.md.sha1.create();var n=m[e.md.algorithm+"WithRSAEncryption"];if(!n){var a=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw a.algorithm=e.md.algorithm,a}e.signatureOid=e.siginfo.algorithmOid=n,e.tbsCertificate=g.getTBSCertificate(e);var i=y.toDer(e.tbsCertificate);e.md.update(i.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,a=e.subject,i=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw i.expectedIssuer=n.attributes,i.actualIssuer=a.attributes,i}var s=t.md;if(null===s){if(t.signatureOid in m){switch(m[t.signatureOid]){case"sha1WithRSAEncryption":s=h.md.sha1.create();break;case"md5WithRSAEncryption":s=h.md.md5.create();break;case"sha256WithRSAEncryption":case"RSASSA-PSS":s=h.md.sha256.create()}}if(null===s){var i=new Error("Could not compute certificate digest. Unknown signature OID.");throw i.signatureOid=t.signatureOid,i}var o=t.tbsCertificate||g.getTBSCertificate(t),u=y.toDer(o);s.update(u.getBytes())}if(null!==s){var c;switch(t.signatureOid){case m.sha1WithRSAEncryption:c=void 0;break;case m["RSASSA-PSS"]:var l,p;if(void 0===(l=m[t.signatureParameters.mgf.hash.algorithmOid])||void 0===h.md[l]){var i=new Error("Unsupported MGF hash function.");throw i.oid=t.signatureParameters.mgf.hash.algorithmOid,i.name=l,i}if(void 0===(p=m[t.signatureParameters.mgf.algorithmOid])||void 0===h.mgf[p]){var i=new Error("Unsupported MGF function.");throw i.oid=t.signatureParameters.mgf.algorithmOid,i.name=p,i}if(p=h.mgf[p].create(h.md[l].create()),void 0===(l=m[t.signatureParameters.hash.algorithmOid])||void 0===h.md[l])throw{message:"Unsupported RSASSA-PSS hash function.",oid:t.signatureParameters.hash.algorithmOid,name:l};c=h.pss.create(h.md[l].create(),p,t.signatureParameters.saltLength)}r=e.publicKey.verify(s.digest().getBytes(),t.signature,c)}return r},e.isIssuer=function(t){var r=!1,n=e.issuer,a=t.subject;if(n.hash&&a.hash)r=n.hash===a.hash;else if(n.attributes.length===a.attributes.length){r=!0;for(var i,s,o=0;r&&o<n.attributes.length;++o)i=n.attributes[o],s=a.attributes[o],i.type===s.type&&i.value===s.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return g.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=m.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var n=e.extensions[r];if(n.id===t){var a=e.generateSubjectKeyIdentifier().getBytes();return h.util.hexToBytes(n.subjectKeyIdentifier)===a}}return!1},e},g.publicKeyFromAsn1=function(e){var t,r,n={},a=[];if(y.validate(e,C,n,a))if((t=y.derToOid(n.publicKeyOid))===g.oids.rsaEncryption)r=g.rsa.publicKeyFromAsn1(e);else{if(t!==g.oids.kcdsa1){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=t,i}r=g.kcdsa.publicKeyFromAsn1(e)}else r=g.rsa.publicKeyFromAsn1(e);return r},g.certificateFromAsn1=function(e,t){var r={},a=[];if(!y.validate(e,E,r,a)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=a,i}if("string"!=typeof r.certSignature){for(var o="\0",u=0;u<r.certSignature.length;++u)o+=y.toDer(r.certSignature[u]).getBytes();r.certSignature=o}var c=y.derToOid(r.publicKeyOid);if(c!==g.oids.rsaEncryption&&c!==g.oids.kcdsa1)throw new Error("Cannot read public key. OID is not RSA.");var l=g.createCertificate();l.version=r.certVersion?r.certVersion.charCodeAt(0):0;var p=h.util.createBuffer(r.certSerialNumber);l.serialNumber=p.toHex(),l.signatureOid=h.asn1.derToOid(r.certSignatureOid),l.signatureParameters=A(l.signatureOid,r.certSignatureParams,!0),l.siginfo.algorithmOid=h.asn1.derToOid(r.certinfoSignatureOid),l.siginfo.parameters=A(l.siginfo.algorithmOid,r.certinfoSignatureParams,!1);var f=h.util.createBuffer(r.certSignature);++f.read,l.signature=f.getBytes();var d=[];if(void 0!==r.certValidity1UTCTime&&d.push(y.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&d.push(y.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&d.push(y.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&d.push(y.generalizedTimeToDate(r.certValidity4GeneralizedTime)),d.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(d.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(l.validity.notBefore=d[0],l.validity.notAfter=d[1],l.tbsCertificate=r.tbsCertificate,t){if(l.md=null,l.signatureOid in m){var c=m[l.signatureOid];switch(c){case"sha1WithRSAEncryption":l.md=h.md.sha1.create();break;case"md5WithRSAEncryption":l.md=h.md.md5.create();break;case"sha256WithRSAEncryption":case"RSASSA-PSS":l.md=h.md.sha256.create()}}if(null===l.md){var i=new Error("Could not compute certificate digest. Unknown signature OID.");throw i.signatureOid=l.signatureOid,i}var v=y.toDer(l.tbsCertificate);l.md.update(v.getBytes())}var C=h.md.sha1.create();l.issuer.getField=function(e){return n(l.issuer,e)},l.issuer.addField=function(e){s([e]),l.issuer.attributes.push(e)},l.issuer.attributes=g.RDNAttributesAsArray(r.certIssuer,C),r.certIssuerUniqueId&&(l.issuer.uniqueId=r.certIssuerUniqueId),l.issuer.hash=C.digest().toHex();var T=h.md.sha1.create();return l.subject.getField=function(e){return n(l.subject,e)},l.subject.addField=function(e){s([e]),l.subject.attributes.push(e)},l.subject.attributes=g.RDNAttributesAsArray(r.certSubject,T),r.certSubjectUniqueId&&(l.subject.uniqueId=r.certSubjectUniqueId),l.subject.hash=T.digest().toHex(),r.certExtensions?l.extensions=g.certificateExtensionsFromAsn1(r.certExtensions):l.extensions=[],l.publicKey=g.publicKeyFromAsn1(r.subjectPublicKeyInfo),l.publicKeyOid=c,l},g.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],a=0;a<n.value.length;++a)t.push(g.certificateExtensionFromAsn1(n.value[a]));return t},g.certificateExtensionFromAsn1=function(e){var t={};if(t.id=y.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===y.Type.BOOLEAN?(t.critical=0!==e.value[1].value.charCodeAt(0),t.value=e.value[2].value):t.value=e.value[1].value,t.id in m)if(t.name=m[t.id],"keyUsage"===t.name){var r=y.fromDer(t.value),n=0,a=0;r.value.length>1&&(n=r.value.charCodeAt(1),a=r.value.length>2?r.value.charCodeAt(2):0),t.digitalSignature=128==(128&n),t.nonRepudiation=64==(64&n),t.keyEncipherment=32==(32&n),t.dataEncipherment=16==(16&n),t.keyAgreement=8==(8&n),t.keyCertSign=4==(4&n),t.cRLSign=2==(2&n),t.encipherOnly=1==(1&n),t.decipherOnly=128==(128&a)}else if("basicConstraints"===t.name){var r=y.fromDer(t.value);r.value.length>0&&r.value[0].type===y.Type.BOOLEAN?t.cA=0!==r.value[0].value.charCodeAt(0):t.cA=!1;var i=null;r.value.length>0&&r.value[0].type===y.Type.INTEGER?i=r.value[0].value:r.value.length>1&&(i=r.value[1].value),null!==i&&(t.pathLenConstraint=y.derToInteger(i))}else if("extKeyUsage"===t.name)for(var r=y.fromDer(t.value),s=0;s<r.value.length;++s){var o=y.derToOid(r.value[s].value);o in m?t[m[o]]=!0:t[o]=!0}else if("nsCertType"===t.name){var r=y.fromDer(t.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),t.client=128==(128&n),t.server=64==(64&n),t.email=32==(32&n),t.objsign=16==(16&n),t.reserved=8==(8&n),t.sslCA=4==(4&n),t.emailCA=2==(2&n),t.objCA=1==(1&n)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.altNames=[];for(var u,r=y.fromDer(t.value),c=0;c<r.value.length;++c){u=r.value[c];var l={type:u.type,value:u.value};switch(t.altNames.push(l),u.type){case 1:case 2:case 6:break;case 7:l.ip=h.util.bytesToIP(u.value);break;case 8:l.oid=y.derToOid(u.value)}}}else if("subjectKeyIdentifier"===t.name){var r=y.fromDer(t.value);t.subjectKeyIdentifier=h.util.bytesToHex(r.value)}else if("certificatePolicies"==t.name){var r=y.fromDer(t.value),p=r.value[0].value,f=y.derToOid(p[0].value),d=[];t.oid=f;for(var g=0;p.length>1&&g<p[1].value.length;g++){var v=p[1].value[g],C=v.value[0],E=v.value[1];E.constructed&&(E=E.value[0]),d[g]=[],d[g].id=y.derToOid(C.value),d[g].name=m[d[g].id],d[g].value=E.value}t.policyQualifiers=d}return t},g.certificationRequestFromAsn1=function(e,t){var r={},a=[];if(!y.validate(e,I,r,a)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=a,i}if("string"!=typeof r.csrSignature){for(var o="\0",u=0;u<r.csrSignature.length;++u)o+=y.toDer(r.csrSignature[u]).getBytes();r.csrSignature=o}var c=y.derToOid(r.publicKeyOid);if(c!==g.oids.rsaEncryption&&c!==g.oids.kcdsa1)throw new Error("Cannot read public key. OID is not RSA.");var l=g.createCertificationRequest();l.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,l.signatureOid=h.asn1.derToOid(r.csrSignatureOid),l.signatureParameters=A(l.signatureOid,r.csrSignatureParams,!0),l.siginfo.algorithmOid=h.asn1.derToOid(r.csrSignatureOid),l.siginfo.parameters=A(l.siginfo.algorithmOid,r.csrSignatureParams,!1);var p=h.util.createBuffer(r.csrSignature);if(++p.read,l.signature=p.getBytes(),l.certificationRequestInfo=r.certificationRequestInfo,t){if(l.md=null,l.signatureOid in m){var c=m[l.signatureOid];switch(c){case"sha1WithRSAEncryption":l.md=h.md.sha1.create();break;case"md5WithRSAEncryption":l.md=h.md.md5.create();break;case"sha256WithRSAEncryption":case"RSASSA-PSS":l.md=h.md.sha256.create()}}if(null===l.md){var i=new Error("Could not compute certification request digest. Unknown signature OID.");throw i.signatureOid=l.signatureOid,i}var f=y.toDer(l.certificationRequestInfo);l.md.update(f.getBytes())}var d=h.md.sha1.create();return l.subject.getField=function(e){return n(l.subject,e)},l.subject.addField=function(e){s([e]),l.subject.attributes.push(e)},l.subject.attributes=g.RDNAttributesAsArray(r.certificationRequestInfoSubject,d),l.subject.hash=d.digest().toHex(),l.publicKey=g.publicKeyFromAsn1(r.subjectPublicKeyInfo),l.getAttribute=function(e){return n(l,e)},l.addAttribute=function(e){s([e]),l.attributes.push(e)},l.attributes=g.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),l},g.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return n(e.subject,t)},e.subject.addField=function(t){s([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return n(e,t)},e.addAttribute=function(t){s([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){s(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){s(t),e.attributes=t},e.sign=function(t,r){e.md=r||h.md.sha1.create();var n=m[e.md.algorithm+"WithRSAEncryption"];if(!n){var a=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw a.algorithm=e.md.algorithm,a}e.signatureOid=e.siginfo.algorithmOid=n,e.certificationRequestInfo=g.getCertificationRequestInfo(e);var i=y.toDer(e.certificationRequestInfo);e.md.update(i.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(null===r){if(e.signatureOid in m){switch(m[e.signatureOid]){case"sha1WithRSAEncryption":r=h.md.sha1.create();break;case"md5WithRSAEncryption":r=h.md.md5.create();break;case"sha256WithRSAEncryption":case"RSASSA-PSS":r=h.md.sha256.create()}}if(null===r){var n=new Error("Could not compute certification request digest. Unknown signature OID.");throw n.signatureOid=e.signatureOid,n}var a=e.certificationRequestInfo||g.getCertificationRequestInfo(e),i=y.toDer(a);r.update(i.getBytes())}if(null!==r){var s;switch(e.signatureOid){case m.sha1WithRSAEncryption:break;case m["RSASSA-PSS"]:var o,u;if(void 0===(o=m[e.signatureParameters.mgf.hash.algorithmOid])||void 0===h.md[o]){var n=new Error("Unsupported MGF hash function.");throw n.oid=e.signatureParameters.mgf.hash.algorithmOid,n.name=o,n}if(void 0===(u=m[e.signatureParameters.mgf.algorithmOid])||void 0===h.mgf[u]){var n=new Error("Unsupported MGF function.");throw n.oid=e.signatureParameters.mgf.algorithmOid,n.name=u,n}if(u=h.mgf[u].create(h.md[o].create()),void 0===(o=m[e.signatureParameters.hash.algorithmOid])||void 0===h.md[o]){var n=new Error("Unsupported RSASSA-PSS hash function.");throw n.oid=e.signatureParameters.hash.algorithmOid,n.name=o,n}s=h.pss.create(h.md[o].create(),u,e.signatureParameters.saltLength)}t=e.publicKey.verify(r.digest().getBytes(),e.signature,s)}return t},e.getEvidAttr=function(e){var t=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.PRINTABLESTRING,!1,e.idn),y.create(y.Class.UNIVERSAL,y.Type.BITSTRING,!1,String.fromCharCode(0)+e.vidRandom)]),r=y.toDer(t),n=h.md.sha256.create();n.update(r.data);var a=n.digest().getBytes();n=h.md.sha256.create(),n.update(a);var i=n.digest().getBytes(),s=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer("2.16.840.1.101.3.4.2.1").getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")]),y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,i)])]),o=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[s,y.create(y.Class.UNIVERSAL,y.Type.BITSTRING,!1,String.fromCharCode(0)+e.vidRandom)]),u=y.toDer(o),c=h.pki.certificateFromPem(e.evidCaCert),l=c.publicKey.encrypt(u.data,"RSAES-PKCS1-V1_5"),p=[y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(0).getBytes())]),y.create(y.Class.CONTEXT_SPECIFIC,1,!0,[y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer("2.16.840.1.101.3.4.2.1").getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")])]),y.create(y.Class.CONTEXT_SPECIFIC,2,!0,[y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer("1.2.840.113549.1.1.1").getBytes()),y.create(y.Class.UNIVERSAL,y.Type.NULL,!1,"")])]),y.create(y.Class.CONTEXT_SPECIFIC,3,!0,[y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[h.pki.distinguishedNameToAsn1(c.issuer),y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,h.util.hexToBytes(c.serialNumber))])]),y.create(y.Class.CONTEXT_SPECIFIC,4,!0,[y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,l)])],f={};return f.type="1.2.410.200004.10.1.1.2",f.valueTagClass=y.Type.SEQUENCE,f.valueConstructed=!0,f.value=p,f},e},g.getTBSCertificate=function(e){var t=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.CONTEXT_SPECIFIC,0,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(e.version).getBytes())]),y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,h.util.hexToBytes(e.serialNumber)),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.siginfo.algorithmOid).getBytes()),u(e.siginfo.algorithmOid,e.siginfo.parameters)]),a(e.issuer),y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.UTCTIME,!1,y.dateToUtcTime(e.validity.notBefore)),y.create(y.Class.UNIVERSAL,y.Type.UTCTIME,!1,y.dateToUtcTime(e.validity.notAfter))]),a(e.subject),g.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&t.value.push(y.create(y.Class.CONTEXT_SPECIFIC,1,!0,[y.create(y.Class.UNIVERSAL,y.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&t.value.push(y.create(y.Class.CONTEXT_SPECIFIC,2,!0,[y.create(y.Class.UNIVERSAL,y.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&t.value.push(g.certificateExtensionsToAsn1(e.extensions)),t},g.getCertificationRequestInfo=function(e){return y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.INTEGER,!1,y.integerToDer(e.version).getBytes()),a(e.subject),g.publicKeyToAsn1(e.publicKey),l(e)])},g.distinguishedNameToAsn1=function(e){return a(e)},g.certificateToAsn1=function(e){var t=e.tbsCertificate||g.getTBSCertificate(e);return y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[t,y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.signatureOid).getBytes()),u(e.signatureOid,e.signatureParameters)]),y.create(y.Class.UNIVERSAL,y.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},g.certificateExtensionsToAsn1=function(e){var t=y.create(y.Class.CONTEXT_SPECIFIC,3,!0,[]),r=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(g.certificateExtensionToAsn1(e[n]));return t},g.certificateExtensionToAsn1=function(e){var t=y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[]);t.value.push(y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.id).getBytes())),e.critical&&t.value.push(y.create(y.Class.UNIVERSAL,y.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!=typeof e.value&&(r=y.toDer(r).getBytes()),t.value.push(y.create(y.Class.UNIVERSAL,y.Type.OCTETSTRING,!1,r)),t},g.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||g.getCertificationRequestInfo(e);return y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[t,y.create(y.Class.UNIVERSAL,y.Type.SEQUENCE,!0,[y.create(y.Class.UNIVERSAL,y.Type.OID,!1,y.oidToDer(e.signatureOid).getBytes()),u(e.signatureOid,e.signatureParameters)]),y.create(y.Class.UNIVERSAL,y.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},g.createCaStore=function(e){function t(e){if(!e.hash){var t=h.md.sha1.create();e.attributes=g.RDNAttributesAsArray(a(e),t),e.hash=t.digest().toHex()}return r.certs[e.hash]||null}var r={certs:{}};if(r.getIssuer=function(e){return t(e.issuer)},r.addCertificate=function(e){if("string"==typeof e&&(e=h.pki.certificateFromPem(e)),!e.subject.hash){var t=h.md.sha1.create();e.subject.attributes=g.RDNAttributesAsArray(a(e.subject),t),e.subject.hash=t.digest().toHex()}if(e.subject.hash in r.certs){var n=r.certs[e.subject.hash];h.util.isArray(n)||(n=[n]),n.push(e)}else r.certs[e.subject.hash]=e},r.hasCertificate=function(e){var r=t(e.subject);if(!r)return!1;h.util.isArray(r)||(r=[r]);for(var n=y.toDer(g.certificateToAsn1(e)).getBytes(),a=0;a<r.length;++a){if(n===y.toDer(g.certificateToAsn1(r[a])).getBytes())return!0}return!1},e)for(var n=0;n<e.length;++n){var i=e[n];r.addCertificate(i)}return r},g.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},g.verifyCertificateChain=function(e,t,r){t=t.slice(0);var n=t.slice(0),a=new Date,i=!0,s=null,o=0;do{var u=t.shift(),c=null,l=!1;if((a<u.validity.notBefore||a>u.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:g.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:a}),null===s){if(c=t[0]||e.getIssuer(u),null===c&&u.isIssuer(u)&&(l=!0,c=u),c){var p=c;h.util.isArray(p)||(p=[p]);for(var f=!1;!f&&p.length>0;){c=p.shift();try{f=c.verify(u)}catch(e){}}f||(s={message:"Certificate signature is invalid.",error:g.certificateError.bad_certificate})}null!==s||c&&!l||e.hasCertificate(u)||(s={message:"Certificate is not trusted.",error:g.certificateError.unknown_ca})}if(null===s&&c&&!u.isIssuer(c)&&(s={message:"Certificate issuer is invalid.",error:g.certificateError.bad_certificate}),null===s)for(var d={keyUsage:!0,basicConstraints:!0},y=0;null===s&&y<u.extensions.length;++y){var m=u.extensions[y];!m.critical||m.name in d||(s={message:"Certificate has an unsupported critical extension.",error:g.certificateError.unsupported_certificate})}if(null===s&&(!i||0===t.length&&(!c||l))){var v=u.getExtension("basicConstraints"),C=u.getExtension("keyUsage");if(null!==C&&(C.keyCertSign&&null!==v||(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:g.certificateError.bad_certificate})),null!==s||null===v||v.cA||(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:g.certificateError.bad_certificate}),null===s&&null!==C&&"pathLenConstraint"in v){o-1>v.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:g.certificateError.bad_certificate})}}var E=null===s||s.error,T=r?r(E,o,n):E;if(!0!==T)throw!0===E&&(s={message:"The application rejected the certificate.",error:g.certificateError.bad_certificate}),(T||0===T)&&("object"!=typeof T||h.util.isArray(T)?"string"==typeof T&&(s.error=T):(T.message&&(s.message=T.message),T.error&&(s.error=T.error))),s;s=null,i=!1,++o}while(t.length>0);return!0},g.objToDN=function(e){for(var t="",r="",n=0;n<e.attributes.length;n++){var a=e.attributes[n];"commonName"===a.name?(r=v.commonName,t=r+"="+h.util.decodeUtf8(a.value)+", "+t):"countryName"===a.name?(r=v.countryName,t=r+"="+h.util.decodeUtf8(a.value)+", "+t):"localityName"===a.name?(r=v.localityName,t=r+"="+h.util.decodeUtf8(a.value)+", "+t):"stateOrProvinceName"===a.name?(r=v.stateOrProvinceName,t=r+"="+h.util.decodeUtf8(a.value)+", "+t):"organizationName"===a.name?(r=v.organizationName,t=r+"="+h.util.decodeUtf8(a.value)+", "+t):"organizationalUnitName"===a.name?(r=v.organizationalUnitName,t=r+"="+h.util.decodeUtf8(a.value)+", "+t):"emailAddress"===a.name&&(r=v.emailAddress,t=r+"="+h.util.decodeUtf8(a.value)+", "+t)}return t.length>2&&(t=t.substring(0,t.length-2)),t},g.ResolveExtension=function(e){var t={};t.authKeyId=null,t.subjectKeyId=null,t.keyUse="",t.certPolicy=null,t.subjectAltName=null,t.crlDistribution=null,t.authInfoAccess=null;var r=e.getExtension("authorityKeyIdentifier"),n=e.getExtension("subjectKeyIdentifier"),a=e.getExtension("keyUsage"),i=e.getExtension("certificatePolicies"),s=e.getExtension("subjectAltName"),o=e.getExtension("cRLDistributionPoints"),u=e.getExtension("authorityInfoAccess"),c=h.asn1.fromDer(r.value),l=h.util.bytesToHex(c.value[0].value);if(c.value[1])if(void 0!=c.value[1].value[0].value){var d=p(c.value[1].value[0].value[0]),g=h.util.bytesToHex(c.value[2].value);t.authKeyId="KeyID="+l+"\nCertificate Issuer:\n",t.authKeyId+=d+"Certificate SerialNumber="+g,t.subjectKeyId=n.subjectKeyIdentifier}else t.authKeyId="KeyID="+l+"\nCertificate Issuer:\n",t.subjectKeyId=n.subjectKeyIdentifier;else t.authKeyId="KeyID="+l+"\nCertificate Issuer:\n",t.subjectKeyId=n.subjectKeyIdentifier;if(!0===a.cRLSign&&(t.keyUse+="cRLSign, "),!0===a.dataEncipherment&&(t.keyUse+="dataEncipherment, "),!0===a.decipherOnly&&(t.keyUse+="decipherOnly, "),!0===a.digitalSignature&&(t.keyUse+="Digital Signature, "),!0===a.encipherOnly&&(t.keyUse+="encipherOnly, "),!0===a.keyAgreement&&(t.keyUse+="keyAgreement, "),!0===a.keyCertSign&&(t.keyUse+="keyCertSign, "),!0===a.keyEncipherment&&(t.keyUse+="keyEncipherment, "),!0===a.nonRepudiation&&(t.keyUse+="Non-Repudiation, "),a){var m=h.asn1.fromDer(a.value);t.keyUse=t.keyUse.substr(0,t.keyUse.length-2),t.keyUse+="("+h.util.bytesToHex(m.value.substr(1,1))+")"}if(i&&(t.certPolicy=f(i)),t.subjectAltName="",s){var v=h.asn1.fromDer(s.value),C=v.value.length||0,E=0;for(E=0;E<C;E++){var T=v.value[E];if(""!=t.subjectAltName&&(t.subjectAltName+="|"),0==T.type){var S=y.derToOid(T.value[0].value);if("1.2.410.200004.10.1.1"==S){t.subjectAltName+=h.pki.oids[S]+"=";var I=h.util.decodeUtf8(T.value[1].value[0].value[0].value),A=h.asn1.derToOid(T.value[1].value[0].value[1].value[0].value[1].value[0].value[0].value),b=h.util.bytesToHex(T.value[1].value[0].value[1].value[0].value[1].value[1].value[0].value);t.subjectAltName+=I+"|"+h.pki.oids[A]+"("+A+")|"+b}else{t.subjectAltName+=S+"=";var N=h.asn1.toDer(T.value[1]);t.subjectAltName+=h.util.bytesToHex(N)}}else 1==T.type?t.subjectAltName+="rfc822Name="+T.value:7==T.type&&(t.subjectAltName+="iPAddress="+T.value)}}if(o){var B=h.asn1.fromDer(o.value),w=B.value[0].value[0].value[0].value[0].value;t.crlDistribution="DP="+w}if(u){var R=h.asn1.fromDer(u.value),k=h.asn1.derToOid(R.value[0].value[0].value),_=R.value[0].value[1].value;t.authInfoAccess=h.pki.oids[k]+"="+_}return t},g.getKisaVid=function(e){var t="",r=e.getExtension("subjectAltName");if(r){var n=h.asn1.fromDer(r.value),a=n.value.length||0,i=0;for(i=0;i<a;i++){var s=n.value[i];if(0==s.type){if("1.2.410.200004.10.1.1"==y.derToOid(s.value[0].value)){t=s.value[1].value[0].value[1].value[0].value[1].value[1].value[0].value;break}}}}return t}},,,,,function(e,t,r){(function(e,t){var n=r(1);r(12),r(5),r(2);var a,i=n.pkcs5=n.pkcs5||{},s=void 0!==e&&e.versions&&e.versions.node;n.pbkdf2=i.pbkdf2=function(e,r,i,o,u,c){function l(){if(T>h)return c(null,E);g.start(null,null),g.update(r),g.update(n.util.int32ToBytes(T)),m=C=g.digest().getBytes(),S=2,p()}function p(){if(S<=i)return g.start(null,null),g.update(C),v=g.digest().getBytes(),m=n.util.xorBytes(m,v,f),C=v,++S,n.util.setImmediate(p);E+=T<h?m:m.substr(0,y),++T,l()}if("function"==typeof u&&(c=u,u=null),s&&!n.disableNativeCode&&a.pbkdf2&&(null===u||"object"!=typeof u)&&(a.pbkdf2Sync.length>4||!u||"sha1"===u))return"string"!=typeof u&&(u="sha1"),r=new t(r,"binary"),c?4===a.pbkdf2Sync.length?a.pbkdf2(e,r,i,o,function(e,t){if(e)return c(e);c(null,t.toString("binary"))}):a.pbkdf2(e,r,i,o,u,function(e,t){if(e)return c(e);c(null,t.toString("binary"))}):4===a.pbkdf2Sync.length?a.pbkdf2Sync(e,r,i,o).toString("binary"):a.pbkdf2Sync(e,r,i,o,u).toString("binary");if(void 0!==u&&null!==u||(u=n.md.sha1.create()),"string"==typeof u){if(!(u in n.md.algorithms))throw new Error("Unknown hash algorithm: "+u);u=n.md[u].create()}var f=u.digestLength;if(o>4294967295*f){var d=new Error("Derived key is too long.");if(c)return c(d);throw d}var h=Math.ceil(o/f),y=o-(h-1)*f,g=n.hmac.create();g.start(u,e);var m,v,C,E="";if(!c){for(var T=1;T<=h;++T){g.start(null,null),g.update(r),g.update(n.util.int32ToBytes(T)),m=C=g.digest().getBytes();for(var S=2;S<=i;++S)g.start(null,null),g.update(C),v=g.digest().getBytes(),m=n.util.xorBytes(m,v,f),C=v;E+=T<h?m:m.substr(0,y)}return E}var S,T=1;l()}}).call(t,r(11),r(53).Buffer)},function(e,t,r){function n(e,t,r){r||(r=a.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),s=0;s<i;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,255&s);r.start(),r.update(e+o),n+=r.digest().getBytes()}if(void 0===n)throw console.log("Please try again in a few seconds.[#2]"),new Error("Please try again in a few seconds.[#2]");return n.substring(0,t)}var a=r(1);r(2),r(4),r(22);var i=a.pkcs1=a.pkcs1||{};i.encode_rsa_oaep=function(e,t,r){var i,s,o,u;"string"==typeof r?(i=r,s=arguments[3]||void 0,o=arguments[4]||void 0):r&&(i=r.label||void 0,s=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(u=r.mgf1.md)),o?o.start():o=a.md.sha1.create(),u||(u=o);var c=Math.ceil(e.n.bitLength()/8),l=c-2*o.digestLength-2;if(t.length>l){var p=new Error("RSAES-OAEP input message length is too long.");throw p.length=t.length,p.maxLength=l,p}i||(i=""),o.update(i,"raw");for(var f=o.digest(),d="",h=l-t.length,y=0;y<h;y++)d+="\0";var g=f.getBytes()+d+""+t;if(s){if(s.length!==o.digestLength){var p=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw p.seedLength=s.length,p.digestLength=o.digestLength,p}}else s=a.random.getBytes(o.digestLength);var m=n(s,c-o.digestLength-1,u),v=a.util.xorBytes(g,m,g.length),C=n(v,o.digestLength,u);return"\0"+a.util.xorBytes(s,C,s.length)+v},i.decode_rsa_oaep=function(e,t,r){var i,s,o;"string"==typeof r?(i=r,s=arguments[3]||void 0):r&&(i=r.label||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var u=Math.ceil(e.n.bitLength()/8);if(t.length!==u){var c=new Error("RSAES-OAEP encoded message length is invalid.");throw c.length=t.length,c.expectedLength=u,c}if(void 0===s?s=a.md.sha1.create():s.start(),o||(o=s),u<2*s.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),s.update(i,"raw");var l=s.digest().getBytes(),p=t.charAt(0),f=t.substring(1,s.digestLength+1),d=t.substring(1+s.digestLength),h=n(d,s.digestLength,o),y=a.util.xorBytes(f,h,f.length),g=n(y,u-s.digestLength-1,o),m=a.util.xorBytes(d,g,d.length);if(void 0===m)throw console.log("Please try again in a few seconds.[#1]"),new Error("Please try again in a few seconds.[#1]");for(var v=m.substring(0,s.digestLength),c="\0"!==p,C=0;C<s.digestLength;++C)c|=l.charAt(C)!==v.charAt(C);for(var E=1,T=s.digestLength,S=s.digestLength;S<m.length;S++){var I=m.charCodeAt(S),A=1&I^1;c|=I&(E?65534:0),E&=A,T+=E}if(c||1!==m.charCodeAt(T))throw new Error("Invalid RSAES-OAEP padding.");return m.substring(T+1)}},function(e,t,r){function n(e,t,r,n){return"workers"in r?i(e,t,r,n):a(e,t,r,n)}function a(e,t,r,n){var i=s(e,t),c=0,l=o(i.bitLength());"millerRabinTests"in r&&(l=r.millerRabinTests);var f=10;"maxBlockTime"in r&&(f=r.maxBlockTime);var d=+new Date;do{if(i.bitLength()>e&&(i=s(e,t)),i.isProbablePrime(l))return n(null,i);i.dAddOffset(p[c++%8],0)}while(f<0||+new Date-d<f);u.util.setImmediate(function(){a(e,t,r,n)})}function i(e,t,r,n){function i(){function r(r){if(!h){--u;var i=r.data;if(i.found){for(var c=0;c<a.length;++c)a[c].terminate();return h=!0,n(null,new l(i.prime,16))}o.bitLength()>e&&(o=s(e,t));var d=o.toString(16);r.target.postMessage({hex:d,workLoad:p}),o.dAddOffset(f,0)}}c=Math.max(1,c);for(var a=[],i=0;i<c;++i)a[i]=new Worker(d);for(var u=c,i=0;i<c;++i)a[i].addEventListener("message",r);var h=!1}if("undefined"==typeof Worker)return a(e,t,r,n);var o=s(e,t),c=r.workers,p=r.workLoad||100,f=30*p/8,d=r.workerScript||"forge/prime.worker.js";if(-1===c)return u.util.estimateCores(function(e,t){e&&(t=2),c=t-1,i()});i()}function s(e,t){var r=new l(e,t),n=e-1;return r.testBit(n)||r.bitwiseTo(l.ONE.shiftLeft(n),d,r),r.dAddOffset(31-r.mod(f).byteValue(),0),r}function o(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}var u=r(1);r(2),r(23),r(4);var c=u.prime=u.prime||{},l=u.jsbn.BigInteger,p=[6,4,2,4,2,4,6,2],f=new l(null);f.fromInt(30);var d=function(e,t){return e|t};c.generateProbablePrime=function(e,t,r){"function"==typeof t&&(r=t,t={}),t=t||{};var a=t.algorithm||"PRIMEINC";"string"==typeof a&&(a={name:a}),a.options=a.options||{};var i=t.prng||u.random,s={nextBytes:function(e){for(var t=i.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===a.name)return n(e,s,a.options,r);throw new Error("Invalid prime generation algorithm: "+a.name)}},function(e,t,r){var n=r(1);r(4),r(2),(n.pss=n.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,r=e.mgf,a=t.digestLength,i=e.salt||null;"string"==typeof i&&(i=n.util.createBuffer(i));var s;if("saltLength"in e)s=e.saltLength;else{if(null===i)throw new Error("Salt length not specified or specific salt not given.");s=i.length()}if(null!==i&&i.length()!==s)throw new Error("Given salt length does not match length of given salt.");var o=e.prng||n.random,u={};return u.encode=function(e,u){var c,l=u-1,p=Math.ceil(l/8),f=e.digest().getBytes();if(p<a+s+2)throw new Error("Message is too long to encrypt.");var d;d=null===i?o.getBytesSync(s):i.bytes();var h=new n.util.ByteBuffer;h.fillWithByte(0,8),h.putBytes(f),h.putBytes(d),t.start(),t.update(h.getBytes());var y=t.digest().getBytes(),g=new n.util.ByteBuffer;g.fillWithByte(0,p-s-a-2),g.putByte(1),g.putBytes(d);var m=g.getBytes(),v=p-a-1,C=r.generate(y,v),E="";for(c=0;c<v;c++)E+=String.fromCharCode(m.charCodeAt(c)^C.charCodeAt(c));var T=65280>>8*p-l&255;return(E=String.fromCharCode(E.charCodeAt(0)&~T)+E.substr(1))+y+String.fromCharCode(188)},u.verify=function(e,i,o){var u,c=o-1,l=Math.ceil(c/8);if(i=i.substr(-l),l<a+s+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==i.charCodeAt(l-1))throw new Error("Encoded message does not end in 0xBC.");var p=l-a-1,f=i.substr(0,p),d=i.substr(p,a),h=65280>>8*l-c&255;if(0!=(f.charCodeAt(0)&h))throw new Error("Bits beyond keysize not zero as expected.");var y=r.generate(d,p),g="";for(u=0;u<p;u++)g+=String.fromCharCode(f.charCodeAt(u)^y.charCodeAt(u));g=String.fromCharCode(g.charCodeAt(0)&~h)+g.substr(1);var m=l-a-s-2;for(u=0;u<m;u++)if(0!==g.charCodeAt(u))throw new Error("Leftmost octets not zero as expected");if(1!==g.charCodeAt(m))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var v=g.substr(-s),C=new n.util.ByteBuffer;return C.fillWithByte(0,8),C.putBytes(e),C.putBytes(v),t.start(),t.update(C.getBytes()),d===t.digest().getBytes()},u}},function(e,t,r){function n(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=s.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function a(e){var t=e.toString(16),r=s.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function i(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t}var s=r(1);if(r(3),r(23),r(7),r(30),r(31),r(4),r(2),void 0===o)var o=s.jsbn.BigInteger;var u=s.asn1;s.pki=s.pki||{},s.pki.kcdsa=s.kcdsa=s.kcdsa||{};var c=s.pki,l={name:"PrivateKeyInfo",tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:u.Class.UNIVERSAL,type:u.Type.OID,constructed:!1,capture:"privateKeyOid"},{name:"AlgorithmIdentifier.parameters",tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.parameters.prime",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"parametersPrimeP"},{name:"AlgorithmIdentifier.parameters.subprime",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"parametersSubprimeQ"},{name:"AlgorithmIdentifier.parameters.base",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"parametersBaseG"}]}]},{name:"PrivateKeyInfo.privateKey",tagClass:u.Class.UNIVERSAL,type:u.Type.OCTETSTRING,constructed:!1,capture:"privateKey"},{name:"PrivateKeyInfo.attributes",tagClass:u.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"PrivateKeyInfo.attributes.attribute",tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.attributes.attribute.AttributeType",tagClass:u.Class.UNIVERSAL,type:u.Class.OID,constructed:!1,capture:"AttributeType"},{name:"PrivateKeyInfo.attributes.attribute.values",tagClass:u.Class.UNIVERSAL,type:u.Class.SET,constructed:!0,value:[{name:"PrivateKeyInfo.attributes.attribute.values.AttributeValue",tagClass:u.Class.UNIVERSAL,type:u.Class.BITSTRING,constructed:!1,capture:"AttributeValue"}]}]}]}]},p={name:"KCDSAPrivateKey.privateKeyX",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"privateKeyX"},f=s.pki.kcdsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:u.Class.UNIVERSAL,type:u.Type.OID,constructed:!1,capture:"publicKeyOid"},{name:"AlgorithmIdentifier.parameters",tagClass:u.Class.UNIVERSAL,type:u.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.parameters.prime",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"parametersPrimeP"},{name:"AlgorithmIdentifier.parameters.subprime",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"parametersSubprimeQ"},{name:"AlgorithmIdentifier.parameters.base",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"parametersBaseG"}]}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:u.Class.UNIVERSAL,type:u.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.KCDSAPublicKey",tagClass:u.Class.UNIVERSAL,type:u.Type.INTEGER,constructed:!1,capture:"kcdsaPublicKey"}]}]};c.setKcdsaPublicKey=c.kcdsa.setPublicKey=function(e,t,r,n){return{p:e,q:t,g:r,y:n}},c.setKcdsaPrivateKey=c.kcdsa.setPrivateKey=function(e,t,r,u,c){var l={p:e,q:t,g:r,x:u,y:c};return l.sign=function(e,t){var r;do{r=new o(s.util.bytesToHex(s.random.getBytes(l.q.bitLength()/8)),16).mod(l.q)}while(r.equals(o.ZERO));var u=l.g.modPow(r,l.p).mod(l.p);e.start(),e.update(a(u));var c=e.digest(),p=new ArrayBuffer(e.blockLength+1),f=new Uint8Array(p);f[0]=1;var d=s.util.createBuffer(f),h=new o(s.util.bytesToHex(d.getBytes()),16),y=l.y.mod(h),g=a(y).concat(t);e.start(),e.update(g);for(var m=e.digest(),v=new ArrayBuffer(e.digestLength),C=new Uint8Array(v),E=i(c.toHex()),T=i(m.toHex()),S=0;S<e.digestLength;S++)C[S]=E[S]^T[S];var I=new o(s.util.bytesToHex(s.util.createBuffer(C)),16);I.mod(l.q),r=r.subtract(I);var A=r.multiply(l.x).mod(l.q);return A=n(A),{R:c.getBytes(),S:A}},l},c.wrapKcdsaPrivateKey=function(e,t){var r,a;3===t.value.length&&t.value[2].type==u.Type.BITSTRING&&(r=t.value[2].value,t.value.pop(),a=t.value[0]);var i=u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,u.integerToDer(0).getBytes()),u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.OID,!1,u.oidToDer(c.oids.kcdsa1).getBytes()),u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,n(e.p)),u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,n(e.q)),u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,n(e.g))])]),u.create(u.Class.UNIVERSAL,u.Type.OCTETSTRING,!1,u.toDer(a).getBytes())]);return r&&i.value.push(u.create(u.Class.CONTEXT_SPECIFIC,0,!0,[u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.OID,!1,u.oidToDer(s.pki.oids.Random).getBytes()),u.create(u.Class.UNIVERSAL,u.Type.SET,!0,[u.create(u.Class.UNIVERSAL,u.Type.BITSTRING,!1,r)])])])),i},c.kcdsaPrivateKeyFromAsn1=function(e){var t={},r=[];u.validate(e,l,t,r)&&(e=u.fromDer(s.util.createBuffer(t.privateKey)));var a;if(t.AttributeType&&"1.2.410.200004.10.1.1.3"===u.derToOid(t.AttributeType))if("string"==typeof t.AttributeValue){var i=s.util.createBuffer(t.AttributeValue),f=i.getByte();if(0!==f)throw new TypeError("VID Format Error ["+f+"]");a=i.getBytes()}else{if(t.AttributeValue.constructor!=Array)throw new TypeError("VID Format Error");a=s.asn1.toDer(t.AttributeValue[0]).getBytes()}var d,h,y;if(t.privateKeyOid&&"1.2.410.200004.1.21"===u.derToOid(t.privateKeyOid)&&(d=s.util.createBuffer(t.parametersPrimeP).toHex(),h=s.util.createBuffer(t.parametersSubprimeQ).toHex(),y=s.util.createBuffer(t.parametersBaseG).toHex()),t={},r=[],!u.validate(e,p,t,r)){var g=new Error("Cannot read private key. ASN.1 object does not contain an KCDSAPrivateKey.");throw g.errors=r,g}var m;m=s.util.createBuffer(t.privateKeyX).toHex(),bp=new o(d,16),bq=new o(h,16),bg=new o(y,16),bx=new o(m,16);var v=bx.modInverse(bq);v=bg.modPow(v,bp).mod(bp);var C=(s.util.bytesToHex(n(v)),c.setKcdsaPrivateKey(bp,bq,bg,bx,v));return a&&(C.vidRandom=a),C},c.privateKeyToKCDSAPrivateKey=function(e){var t=u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,n(e.x)),u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,n(e.y))]);if(e.vidRandom){var r=String.fromCharCode(0)+e.vidRandom;t.value.push(u.create(u.Class.UNIVERSAL,u.Type.BITSTRING,!1,r))}return t},c.kcdsa.publicKeyFromAsn1=function(e){var t={},r=[];if(u.validate(e,f,t,r)){var n=u.derToOid(t.publicKeyOid);if(n!==c.oids.kcdsa1){var a=new Error("Cannot read public key. Unknown OID.");throw a.oid=n,a}}var i=s.util.createBuffer(t.parametersPrimeP).toHex(),l=s.util.createBuffer(t.parametersSubprimeQ).toHex(),p=s.util.createBuffer(t.parametersBaseG).toHex(),d=s.util.createBuffer(t.kcdsaPublicKey).toHex();return c.setKcdsaPublicKey(new o(i,16),new o(l,16),new o(p,16),new o(d,16))},c.kcdsa.KCDSApublicKeyToAsn1=c.publicKeyToSubjectPublicKeyInfo=function(e){return u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.OID,!1,u.oidToDer(c.oids.kcdsa1).getBytes()),u.create(u.Class.UNIVERSAL,u.Type.SEQUENCE,!0,[u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,n(e.p)),u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,n(e.q)),u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,n(e.g))])]),u.create(u.Class.UNIVERSAL,u.Type.BITSTRING,!1,[c.publicKeyToKCDSAPublicKey(e)])])},c.publicKeyToKCDSAPublicKey=function(e){return u.create(u.Class.UNIVERSAL,u.Type.INTEGER,!1,n(e.y))}},,,,,,,,,,,,,,,,function(e,t,r){var n=r(1);r(3),r(12),r(5),r(13),r(51),r(4),r(2);var a=function(e,t,r,a){var i=n.util.createBuffer(),s=e.length>>1,o=s+(1&e.length),u=e.substr(0,o),c=e.substr(s,o),l=n.util.createBuffer(),p=n.hmac.create();r=t+r;var f=Math.ceil(a/16),d=Math.ceil(a/20);p.start("MD5",u);var h=n.util.createBuffer();l.putBytes(r);for(var y=0;y<f;++y)p.start(null,null),p.update(l.getBytes()),l.putBuffer(p.digest()),p.start(null,null),p.update(l.bytes()+r),h.putBuffer(p.digest());p.start("SHA1",c);var g=n.util.createBuffer();l.clear(),l.putBytes(r);for(var y=0;y<d;++y)p.start(null,null),p.update(l.getBytes()),l.putBuffer(p.digest()),p.start(null,null),p.update(l.bytes()+r),g.putBuffer(p.digest());return i.putBytes(n.util.xorBytes(h.getBytes(),g.getBytes(),a)),i},i=function(e,t,r){var a=n.hmac.create();a.start("SHA1",e);var i=n.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),a.update(i.getBytes()),a.digest().getBytes()},s=function(e,t,r){var a=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=n.util.createBuffer(i),t.length=i.length,a=!0}catch(e){}return a},o=function(e,t,r){var a=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=n.util.createBuffer(i),t.length=i.length,a=!0}catch(e){}return a},u=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32()}return n.util.createBuffer(e.getBytes(r))},c=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},l={};l.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}},l.SupportedVersions=[l.Versions.TLS_1_1,l.Versions.TLS_1_0],l.Version=l.SupportedVersions[0],l.MaxFragment=15360,l.ConnectionEnd={server:0,client:1},l.PRFAlgorithm={tls_prf_sha256:0},l.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},l.CipherType={stream:0,block:1,aead:2},l.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},l.CompressionMethod={none:0,deflate:1},l.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},l.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},l.Alert={},l.Alert.Level={warning:1,fatal:2},l.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},l.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},l.CipherSuites={},l.getCipherSuite=function(e){var t=null;for(var r in l.CipherSuites){var n=l.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t},l.handleUnexpected=function(e,t){!e.open&&e.entity===l.ConnectionEnd.client||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unexpected_message}})},l.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(l.queue(e,l.createAlert(e,{level:l.Alert.Level.warning,description:l.Alert.Description.no_renegotiation})),l.flush(e)),e.process()},l.parseHelloMessage=function(e,t,r){var a=null,i=e.entity===l.ConnectionEnd.client;if(r<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});else{var s=t.fragment,o=s.length();if(a={version:{major:s.getByte(),minor:s.getByte()},random:n.util.createBuffer(s.getBytes(32)),session_id:u(s,1),extensions:[]},i?(a.cipher_suite=s.getBytes(2),a.compression_method=s.getByte()):(a.cipher_suites=u(s,2),a.compression_methods=u(s,1)),(o=r-(o-s.length()))>0){for(var c=u(s,2);c.length()>0;)a.extensions.push({type:[c.getByte(),c.getByte()],data:u(c,2)});if(!i)for(var p=0;p<a.extensions.length;++p){var f=a.extensions[p];if(0===f.type[0]&&0===f.type[1])for(var d=u(f.data,2);d.length()>0;){var h=d.getByte();if(0!==h)break;e.session.extensions.server_name.serverNameList.push(u(d,2).getBytes())}}}if(e.session.version&&(a.version.major!==e.session.version.major||a.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=l.getCipherSuite(a.cipher_suite);else for(var y=n.util.createBuffer(a.cipher_suites.bytes());y.length()>0&&(e.session.cipherSuite=l.getCipherSuite(y.getBytes(2)),null===e.session.cipherSuite););if(null===e.session.cipherSuite)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.handshake_failure},cipherSuite:n.util.bytesToHex(a.cipher_suite)});e.session.compressionMethod=i?a.compression_method:l.CompressionMethod.none}return a},l.createSecurityParameters=function(e,t){var r=e.entity===l.ConnectionEnd.client,n=t.random.bytes(),a=r?e.session.sp.client_random:n,i=r?n:l.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:l.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:a,server_random:i}},l.handleServerHello=function(e,t,r){var n=l.parseHelloMessage(e,t,r);if(!e.fail){if(!(n.version.minor<=e.version.minor))return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.protocol_version}});e.version.minor=n.version.minor,e.session.version=e.version;var a=n.session_id.bytes();a.length>0&&a===e.session.id?(e.expect=y,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=p,e.session.resuming=!1,l.createSecurityParameters(e,n)),e.session.id=a,e.process()}},l.handleClientHello=function(e,t,r){var a=l.parseHelloMessage(e,t,r);if(!e.fail){var i=a.session_id.bytes(),s=null;if(e.sessionCache&&(s=e.sessionCache.getSession(i),null===s?i="":(s.version.major!==a.version.major||s.version.minor>a.version.minor)&&(s=null,i="")),0===i.length&&(i=n.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=a.version,e.session.sp={},s)e.version=e.session.version=s.version,e.session.sp=s.sp;else{for(var o,u=1;u<l.SupportedVersions.length&&(o=l.SupportedVersions[u],!(o.minor<=a.version.minor));++u);e.version={major:o.major,minor:o.minor},e.session.version=e.version}null!==s?(e.expect=S,e.session.resuming=!0,e.session.sp.client_random=a.random.bytes()):(e.expect=!1!==e.verifyClient?C:E,e.session.resuming=!1,l.createSecurityParameters(e,a)),e.open=!0,l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createServerHello(e)})),e.session.resuming?(l.queue(e,l.createRecord(e,{type:l.ContentType.change_cipher_spec,data:l.createChangeCipherSpec()})),e.state.pending=l.createConnectionState(e),e.state.current.write=e.state.pending.write,l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createFinished(e)}))):(l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createCertificate(e)})),e.fail||(l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createServerKeyExchange(e)})),!1!==e.verifyClient&&l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createCertificateRequest(e)})),l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createServerHelloDone(e)})))),l.flush(e),e.process()}},l.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var a,i,s=t.fragment,o={certificate_list:u(s,3)},c=[];try{for(;o.certificate_list.length()>0;)a=u(o.certificate_list,3),i=n.asn1.fromDer(a),a=n.pki.certificateFromAsn1(i,!0),c.push(a)}catch(t){return e.error(e,{message:"Could not parse certificate list.",cause:t,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.bad_certificate}})}var p=e.entity===l.ConnectionEnd.client;!p&&!0!==e.verifyClient||0!==c.length?0===c.length?e.expect=p?f:E:(p?e.session.serverCertificate=c[0]:e.session.clientCertificate=c[0],l.verifyCertificateChain(e,c)&&(e.expect=p?f:E)):e.error(e,{message:p?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}}),e.process()},l.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unsupported_certificate}});e.expect=d,e.process()},l.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unsupported_certificate}});var a=t.fragment,i={enc_pre_master_secret:u(a,2).getBytes()},s=null;if(e.getPrivateKey)try{s=e.getPrivateKey(e,e.session.serverCertificate),s=n.pki.privateKeyFromPem(s)}catch(t){e.error(e,{message:"Could not get private key.",cause:t,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}})}if(null===s)return e.error(e,{message:"No private key set.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}});try{var o=e.session.sp;o.pre_master_secret=s.decrypt(i.enc_pre_master_secret);var c=e.session.clientHelloVersion;if(c.major!==o.pre_master_secret.charCodeAt(0)||c.minor!==o.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(e){o.pre_master_secret=n.random.getBytes(48)}e.expect=S,null!==e.session.clientCertificate&&(e.expect=T),e.process()},l.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var n=t.fragment,a={certificate_types:u(n,1),certificate_authorities:u(n,2)};e.session.certificateRequest=a,e.expect=h,e.process()},l.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var a=t.fragment;a.read-=4;var i=a.bytes();a.read+=4;var s={signature:u(a,2).getBytes()},o=n.util.createBuffer();o.putBuffer(e.session.md5.digest()),o.putBuffer(e.session.sha1.digest()),o=o.getBytes();try{if(!e.session.clientCertificate.publicKey.verify(o,s.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch(t){return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.handshake_failure}})}e.expect=S,e.process()},l.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.record_overflow}});if(null===e.serverCertificate){var a={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.insufficient_security}},i=e.verify(e,a.alert.description,0,[]);if(!0!==i)return(i||0===i)&&("object"!=typeof i||n.util.isArray(i)?"number"==typeof i&&(a.alert.description=i):(i.message&&(a.message=i.message),i.alert&&(a.alert.description=i.alert))),e.error(e,a)}null!==e.session.certificateRequest&&(t=l.createRecord(e,{type:l.ContentType.handshake,data:l.createCertificate(e)}),l.queue(e,t)),t=l.createRecord(e,{type:l.ContentType.handshake,data:l.createClientKeyExchange(e)}),l.queue(e,t),e.expect=v;var s=function(e,t){null!==e.session.certificateRequest&&null!==e.session.clientCertificate&&l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createCertificateVerify(e,t)})),l.queue(e,l.createRecord(e,{type:l.ContentType.change_cipher_spec,data:l.createChangeCipherSpec()})),e.state.pending=l.createConnectionState(e),e.state.current.write=e.state.pending.write,l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createFinished(e)})),e.expect=y,l.flush(e),e.process()};if(null===e.session.certificateRequest||null===e.session.clientCertificate)return s(e,null);l.getClientSignature(e,s)},l.handleChangeCipherSpec=function(e,t){if(1!==t.fragment.getByte())return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var r=e.entity===l.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=l.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?g:I,e.process()},l.handleFinished=function(e,t,r){var i=t.fragment;i.read-=4;var s=i.bytes();i.read+=4;var o=t.fragment.getBytes();i=n.util.createBuffer(),i.putBuffer(e.session.md5.digest()),i.putBuffer(e.session.sha1.digest());var u=e.entity===l.ConnectionEnd.client,c=u?"server finished":"client finished",p=e.session.sp;if(i=a(p.master_secret,c,i.getBytes(),12),i.getBytes()!==o)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.decrypt_error}});e.session.md5.update(s),e.session.sha1.update(s),(e.session.resuming&&u||!e.session.resuming&&!u)&&(l.queue(e,l.createRecord(e,{type:l.ContentType.change_cipher_spec,data:l.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createFinished(e)}))),e.expect=u?m:A,e.handshaking=!1,++e.handshakes,e.peerCertificate=u?e.session.serverCertificate:e.session.clientCertificate,l.flush(e),e.isConnected=!0,e.connected(e),e.process()},l.handleAlert=function(e,t){var r,n=t.fragment,a={level:n.getByte(),description:n.getByte()};switch(a.description){case l.Alert.Description.close_notify:r="Connection closed.";break;case l.Alert.Description.unexpected_message:r="Unexpected message.";break;case l.Alert.Description.bad_record_mac:r="Bad record MAC.";break;case l.Alert.Description.decryption_failed:r="Decryption failed.";break;case l.Alert.Description.record_overflow:r="Record overflow.";break;case l.Alert.Description.decompression_failure:r="Decompression failed.";break;case l.Alert.Description.handshake_failure:r="Handshake failure.";break;case l.Alert.Description.bad_certificate:r="Bad certificate.";break;case l.Alert.Description.unsupported_certificate:r="Unsupported certificate.";break;case l.Alert.Description.certificate_revoked:r="Certificate revoked.";break;case l.Alert.Description.certificate_expired:r="Certificate expired.";break;case l.Alert.Description.certificate_unknown:r="Certificate unknown.";break;case l.Alert.Description.illegal_parameter:r="Illegal parameter.";break;case l.Alert.Description.unknown_ca:r="Unknown certificate authority.";break;case l.Alert.Description.access_denied:r="Access denied.";break;case l.Alert.Description.decode_error:r="Decode error.";break;case l.Alert.Description.decrypt_error:r="Decrypt error.";break;case l.Alert.Description.export_restriction:r="Export restriction.";break;case l.Alert.Description.protocol_version:r="Unsupported protocol version.";break;case l.Alert.Description.insufficient_security:r="Insufficient security.";break;case l.Alert.Description.internal_error:r="Internal error.";break;case l.Alert.Description.user_canceled:r="User canceled.";break;case l.Alert.Description.no_renegotiation:r="Renegotiation not supported.";break;default:r="Unknown error."}if(a.description===l.Alert.Description.close_notify)return e.close();e.error(e,{message:r,send:!1,origin:e.entity===l.ConnectionEnd.client?"server":"client",alert:a}),e.process()},l.handleHandshake=function(e,t){var r=t.fragment,a=r.getByte(),i=r.getInt24();if(i>r.length())return e.fragmented=t,t.fragment=n.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var s=r.bytes(i+4);r.read+=4,a in K[e.entity][e.expect]?(e.entity!==l.ConnectionEnd.server||e.open||e.fail||(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:n.md.md5.create(),sha1:n.md.sha1.create()}),a!==l.HandshakeType.hello_request&&a!==l.HandshakeType.certificate_verify&&a!==l.HandshakeType.finished&&(e.session.md5.update(s),e.session.sha1.update(s)),K[e.entity][e.expect][a](e,t,i)):l.handleUnexpected(e,t)},l.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},l.handleHeartbeat=function(e,t){var r=t.fragment,a=r.getByte(),i=r.getInt16(),s=r.getBytes(i);if(a===l.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>s.length)return e.process();l.queue(e,l.createRecord(e,{type:l.ContentType.heartbeat,data:l.createHeartbeat(l.HeartbeatMessageType.heartbeat_response,s)})),l.flush(e)}else if(a===l.HeartbeatMessageType.heartbeat_response){if(s!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,n.util.createBuffer(s))}e.process()};var p=1,f=2,d=3,h=4,y=5,g=6,m=7,v=8,C=1,E=2,T=3,S=4,I=5,A=6,b=l.handleUnexpected,N=l.handleChangeCipherSpec,B=l.handleAlert,w=l.handleHandshake,R=l.handleApplicationData,k=l.handleHeartbeat,_=[];_[l.ConnectionEnd.client]=[[b,B,w,b,k],[b,B,w,b,k],[b,B,w,b,k],[b,B,w,b,k],[b,B,w,b,k],[N,B,b,b,k],[b,B,w,b,k],[b,B,w,R,k],[b,B,w,b,k]],_[l.ConnectionEnd.server]=[[b,B,w,b,k],[b,B,w,b,k],[b,B,w,b,k],[b,B,w,b,k],[N,B,b,b,k],[b,B,w,b,k],[b,B,w,R,k],[b,B,w,b,k]];var U=l.handleHelloRequest,L=l.handleServerHello,D=l.handleCertificate,P=l.handleServerKeyExchange,x=l.handleCertificateRequest,V=l.handleServerHelloDone,O=l.handleFinished,K=[];K[l.ConnectionEnd.client]=[[b,b,L,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[U,b,b,b,b,b,b,b,b,b,b,D,P,x,V,b,b,b,b,b,b],[U,b,b,b,b,b,b,b,b,b,b,b,P,x,V,b,b,b,b,b,b],[U,b,b,b,b,b,b,b,b,b,b,b,b,x,V,b,b,b,b,b,b],[U,b,b,b,b,b,b,b,b,b,b,b,b,b,V,b,b,b,b,b,b],[U,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[U,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,O],[U,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[U,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b]];var M=l.handleClientHello,G=l.handleClientKeyExchange,F=l.handleCertificateVerify;K[l.ConnectionEnd.server]=[[b,M,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,D,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,G,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,F,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,O],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b]],l.generateKeys=function(e,t){var r=a,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,s=e.version.major===l.Versions.TLS_1_0.major&&e.version.minor===l.Versions.TLS_1_0.minor;s&&(i+=2*t.fixed_iv_length);var o=r(t.master_secret,"key expansion",n,i),u={client_write_MAC_key:o.getBytes(t.mac_key_length),server_write_MAC_key:o.getBytes(t.mac_key_length),client_write_key:o.getBytes(t.enc_key_length),server_write_key:o.getBytes(t.enc_key_length)};return s&&(u.client_write_IV=o.getBytes(t.fixed_iv_length),u.server_write_IV=o.getBytes(t.fixed_iv_length)),u},l.createConnectionState=function(e){var t=e.entity===l.ConnectionEnd.client,r=function(){var e={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(e){return!0},compressionState:null,compressFunction:function(e){return!0},updateSequenceNumber:function(){4294967295===e.sequenceNumber[1]?(e.sequenceNumber[1]=0,++e.sequenceNumber[0]):++e.sequenceNumber[1]}};return e},n={read:r(),write:r()};if(n.read.update=function(e,t){return n.read.cipherFunction(t,n.read)?n.read.compressFunction(e,t,n.read)||e.error(e,{message:"Could not decompress record.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.decompression_failure}}):e.error(e,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.bad_record_mac}}),!e.fail},n.write.update=function(e,t){return n.write.compressFunction(e,t,n.write)?n.write.cipherFunction(t,n.write)||e.error(e,{message:"Could not encrypt record.",send:!1,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}}):e.error(e,{message:"Could not compress record.",send:!1,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}}),!e.fail},e.session){var a=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(a),a.keys=l.generateKeys(e,a),n.read.macKey=t?a.keys.server_write_MAC_key:a.keys.client_write_MAC_key,n.write.macKey=t?a.keys.client_write_MAC_key:a.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,a),a.compression_algorithm){case l.CompressionMethod.none:break;case l.CompressionMethod.deflate:n.read.compressFunction=o,n.write.compressFunction=s;break;default:throw new Error("Unsupported compression algorithm.")}}return n},l.createRandom=function(){var e=new Date,t=+e+6e4*e.getTimezoneOffset(),r=n.util.createBuffer();return r.putInt32(t),r.putBytes(n.random.getBytes(28)),r},l.createRecord=function(e,t){return t.data?{type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data}:null},l.createAlert=function(e,t){var r=n.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),l.createRecord(e,{type:l.ContentType.alert,data:r})},l.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=n.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var a=e.cipherSuites[r];t.putByte(a.id[0]),t.putByte(a.id[1])}var i=t.length(),s=n.util.createBuffer();s.putByte(l.CompressionMethod.none);var o=s.length(),u=n.util.createBuffer();if(e.virtualHost){var p=n.util.createBuffer();p.putByte(0),p.putByte(0);var f=n.util.createBuffer();f.putByte(0),c(f,2,n.util.createBuffer(e.virtualHost));var d=n.util.createBuffer();c(d,2,f),c(p,2,d),u.putBuffer(p)}var h=u.length();h>0&&(h+=2);var y=e.session.id,g=y.length+1+2+4+28+2+i+1+o+h,m=n.util.createBuffer();return m.putByte(l.HandshakeType.client_hello),m.putInt24(g),m.putByte(e.version.major),m.putByte(e.version.minor),m.putBytes(e.session.sp.client_random),c(m,1,n.util.createBuffer(y)),c(m,2,t),c(m,1,s),h>0&&c(m,2,u),m},l.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,a=n.util.createBuffer();return a.putByte(l.HandshakeType.server_hello),a.putInt24(r),a.putByte(e.version.major),a.putByte(e.version.minor),a.putBytes(e.session.sp.server_random),c(a,1,n.util.createBuffer(t)),a.putByte(e.session.cipherSuite.id[0]),a.putByte(e.session.cipherSuite.id[1]),a.putByte(e.session.compressionMethod),a},l.createCertificate=function(e){var t=e.entity===l.ConnectionEnd.client,r=null;if(e.getCertificate){var a;a=t?e.session.certificateRequest:e.session.extensions.server_name.serverNameList,r=e.getCertificate(e,a)}var i=n.util.createBuffer();if(null!==r)try{n.util.isArray(r)||(r=[r]);for(var s=null,o=0;o<r.length;++o){var u=n.pem.decode(r[o])[0];if("CERTIFICATE"!==u.type&&"X509 CERTIFICATE"!==u.type&&"TRUSTED CERTIFICATE"!==u.type){var p=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw p.headerType=u.type,p}if(u.procType&&"ENCRYPTED"===u.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var f=n.util.createBuffer(u.body);null===s&&(s=n.asn1.fromDer(f.bytes(),!1));var d=n.util.createBuffer();c(d,3,f),i.putBuffer(d)}r=n.pki.certificateFromAsn1(s),t?e.session.clientCertificate=r:e.session.serverCertificate=r}catch(t){return e.error(e,{message:"Could not send certificate list.",cause:t,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.bad_certificate}})}var h=3+i.length(),y=n.util.createBuffer();return y.putByte(l.HandshakeType.certificate),y.putInt24(h),c(y,3,i),y},l.createClientKeyExchange=function(e){var t=n.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(n.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes(),t=e.session.serverCertificate.publicKey.encrypt(r.pre_master_secret);var a=t.length+2,i=n.util.createBuffer();return i.putByte(l.HandshakeType.client_key_exchange),i.putInt24(a),i.putInt16(t.length),i.putBytes(t),i},l.createServerKeyExchange=function(e){var t=n.util.createBuffer();return t},l.getClientSignature=function(e,t){var r=n.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(e,t,r){var a=null;if(e.getPrivateKey)try{a=e.getPrivateKey(e,e.session.clientCertificate),a=n.pki.privateKeyFromPem(a)}catch(t){e.error(e,{message:"Could not get private key.",cause:t,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}})}null===a?e.error(e,{message:"No private key set.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}}):t=a.sign(t,null),r(e,t)},e.getSignature(e,r,t)},l.createCertificateVerify=function(e,t){var r=t.length+2,a=n.util.createBuffer();return a.putByte(l.HandshakeType.certificate_verify),a.putInt24(r),a.putInt16(t.length),a.putBytes(t),a},l.createCertificateRequest=function(e){var t=n.util.createBuffer();t.putByte(1);var r=n.util.createBuffer();for(var a in e.caStore.certs){var i=e.caStore.certs[a],s=n.pki.distinguishedNameToAsn1(i.subject);r.putBuffer(n.asn1.toDer(s))}var o=1+t.length()+2+r.length(),u=n.util.createBuffer();return u.putByte(l.HandshakeType.certificate_request),u.putInt24(o),c(u,1,t),c(u,2,r),u},l.createServerHelloDone=function(e){var t=n.util.createBuffer();return t.putByte(l.HandshakeType.server_hello_done),t.putInt24(0),t},l.createChangeCipherSpec=function(){var e=n.util.createBuffer();return e.putByte(1),e},l.createFinished=function(e){var t=n.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===l.ConnectionEnd.client,i=e.session.sp,s=a,o=r?"client finished":"server finished";t=s(i.master_secret,o,t.getBytes(),12);var u=n.util.createBuffer();return u.putByte(l.HandshakeType.finished),u.putInt24(t.length()),u.putBuffer(t),u},l.createHeartbeat=function(e,t,r){void 0===r&&(r=t.length);var a=n.util.createBuffer();a.putByte(e),a.putInt16(r),a.putBytes(t);var i=a.length(),s=Math.max(16,i-r-3);return a.putBytes(n.random.getBytes(s)),a},l.queue=function(e,t){if(t){if(t.type===l.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null}var a;if(t.fragment.length()<=l.MaxFragment)a=[t];else{a=[];for(var i=t.fragment.bytes();i.length>l.MaxFragment;)a.push(l.createRecord(e,{type:t.type,data:n.util.createBuffer(i.slice(0,l.MaxFragment))})),i=i.slice(l.MaxFragment);i.length>0&&a.push(l.createRecord(e,{type:t.type,data:n.util.createBuffer(i)}))}for(var s=0;s<a.length&&!e.fail;++s){var o=a[s];e.state.current.write.update(e,o)&&e.records.push(o)}}},l.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var q=function(e){switch(e){case!0:return!0;case n.pki.certificateError.bad_certificate:return l.Alert.Description.bad_certificate;case n.pki.certificateError.unsupported_certificate:return l.Alert.Description.unsupported_certificate;case n.pki.certificateError.certificate_revoked:return l.Alert.Description.certificate_revoked;case n.pki.certificateError.certificate_expired:return l.Alert.Description.certificate_expired;case n.pki.certificateError.certificate_unknown:return l.Alert.Description.certificate_unknown;case n.pki.certificateError.unknown_ca:return l.Alert.Description.unknown_ca;default:return l.Alert.Description.bad_certificate}},j=function(e){switch(e){case!0:return!0;case l.Alert.Description.bad_certificate:return n.pki.certificateError.bad_certificate;case l.Alert.Description.unsupported_certificate:return n.pki.certificateError.unsupported_certificate;case l.Alert.Description.certificate_revoked:return n.pki.certificateError.certificate_revoked;case l.Alert.Description.certificate_expired:return n.pki.certificateError.certificate_expired;case l.Alert.Description.certificate_unknown:return n.pki.certificateError.certificate_unknown;case l.Alert.Description.unknown_ca:return n.pki.certificateError.unknown_ca;default:return n.pki.certificateError.bad_certificate}};l.verifyCertificateChain=function(e,t){try{n.pki.verifyCertificateChain(e.caStore,t,function(t,r,a){var i=(q(t),e.verify(e,t,r,a));if(!0!==i){if("object"==typeof i&&!n.util.isArray(i)){var s=new Error("The application rejected the certificate.");throw s.send=!0,s.alert={level:l.Alert.Level.fatal,description:l.Alert.Description.bad_certificate},i.message&&(s.message=i.message),i.alert&&(s.alert.description=i.alert),s}i!==t&&(i=j(i))}return i})}catch(t){var r=t;("object"!=typeof r||n.util.isArray(r))&&(r={send:!0,alert:{level:l.Alert.Level.fatal,description:q(t)}}),"send"in r||(r.send=!0),"alert"in r||(r.alert={level:l.Alert.Level.fatal,description:q(r.error)}),e.error(e,r)}return!e.fail},l.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else{r={},r.cache=e||{},r.capacity=Math.max(t||100,1),r.order=[];for(var a in e)r.order.length<=t?r.order.push(a):delete e[a];r.getSession=function(e){var t=null,a=null;if(e?a=n.util.bytesToHex(e):r.order.length>0&&(a=r.order[0]),null!==a&&a in r.cache){t=r.cache[a],delete r.cache[a];for(var i in r.order)if(r.order[i]===a){r.order.splice(i,1);break}}return t},r.setSession=function(e,t){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a]}var a=n.util.bytesToHex(e);r.order.push(a),r.cache[a]=t}}return r},l.createConnection=function(e){var t=null;t=e.caStore?n.util.isArray(e.caStore)?n.pki.createCaStore(e.caStore):e.caStore:n.pki.createCaStore();var r=e.cipherSuites||null;if(null===r){r=[];for(var a in l.CipherSuites)r.push(l.CipherSuites[a])}var i=e.server?l.ConnectionEnd.server:l.ConnectionEnd.client,s=e.sessionCache?l.createSessionCache(e.sessionCache):null,o={version:{major:l.Version.major,minor:l.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:s,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(e,t,r,n){return t},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:n.util.createBuffer(),tlsData:n.util.createBuffer(),data:n.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(t,r){r.origin=r.origin||(t.entity===l.ConnectionEnd.client?"client":"server"),r.send&&(l.queue(t,l.createAlert(t,r.alert)),l.flush(t));var n=!1!==r.fatal;n&&(t.fail=!0),e.error(t,r),n&&t.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};o.reset=function(e){o.version={major:l.Version.major,minor:l.Version.minor},o.record=null,o.session=null,o.peerCertificate=null,o.state={pending:null,current:null},o.expect=(o.entity,l.ConnectionEnd.client,0),o.fragmented=null,o.records=[],o.open=!1,o.handshakes=0,o.handshaking=!1,o.isConnected=!1,o.fail=!(e||void 0===e),o.input.clear(),o.tlsData.clear(),o.data.clear(),o.state.current=l.createConnectionState(o)},o.reset();var u=function(e,t){var r=t.type-l.ContentType.change_cipher_spec,n=_[e.entity][e.expect];r in n?n[r](e,t):l.handleUnexpected(e,t)},c=function(e){var t=0,r=e.input,a=r.length();if(a<5)t=5-a;else{e.record={type:r.getByte(),version:{major:r.getByte(),minor:r.getByte()},length:r.getInt16(),fragment:n.util.createBuffer(),ready:!1};var i=e.record.version.major===e.version.major;i&&e.session&&e.session.version&&(i=e.record.version.minor===e.version.minor),i||e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.protocol_version}})}return t},p=function(e){var t=0,r=e.input,n=r.length();if(n<e.record.length)t=e.record.length-n;else{e.record.fragment.putBytes(r.getBytes(e.record.length)),r.compact();e.state.current.read.update(e,e.record)&&(null!==e.fragmented&&(e.fragmented.type===e.record.type?(e.fragmented.fragment.putBuffer(e.record.fragment),e.record=e.fragmented):e.error(e,{message:"Invalid fragmented record.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unexpected_message}})),e.record.ready=!0)}return t};return o.handshake=function(e){if(o.entity!==l.ConnectionEnd.client)o.error(o,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(o.handshaking)o.error(o,{message:"Handshake already in progress.",fatal:!1});else{o.fail&&!o.open&&0===o.handshakes&&(o.fail=!1),o.handshaking=!0,e=e||"";var t=null;e.length>0&&(o.sessionCache&&(t=o.sessionCache.getSession(e)),null===t&&(e="")),0===e.length&&o.sessionCache&&null!==(t=o.sessionCache.getSession())&&(e=t.id),o.session={id:e,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:n.md.md5.create(),sha1:n.md.sha1.create()},t&&(o.version=t.version,o.session.sp=t.sp),o.session.sp.client_random=l.createRandom().getBytes(),o.open=!0,l.queue(o,l.createRecord(o,{type:l.ContentType.handshake,data:l.createClientHello(o)})),l.flush(o)}},o.process=function(e){var t=0;return e&&o.input.putBytes(e),o.fail||(null!==o.record&&o.record.ready&&o.record.fragment.isEmpty()&&(o.record=null),null===o.record&&(t=c(o)),o.fail||null===o.record||o.record.ready||(t=p(o)),!o.fail&&null!==o.record&&o.record.ready&&u(o,o.record)),t},o.prepare=function(e){return l.queue(o,l.createRecord(o,{type:l.ContentType.application_data,data:n.util.createBuffer(e)})),l.flush(o)},o.prepareHeartbeatRequest=function(e,t){return e instanceof n.util.ByteBuffer&&(e=e.bytes()),void 0===t&&(t=e.length),o.expectedHeartbeatPayload=e,l.queue(o,l.createRecord(o,{type:l.ContentType.heartbeat,data:l.createHeartbeat(l.HeartbeatMessageType.heartbeat_request,e,t)})),l.flush(o)},o.close=function(e){if(!o.fail&&o.sessionCache&&o.session){var t={id:o.session.id,version:o.session.version,sp:o.session.sp};t.sp.keys=null,o.sessionCache.setSession(t.id,t)}o.open&&(o.open=!1,o.input.clear(),(o.isConnected||o.handshaking)&&(o.isConnected=o.handshaking=!1,l.queue(o,l.createAlert(o,{level:l.Alert.Level.warning,description:l.Alert.Description.close_notify})),l.flush(o)),o.closed(o)),o.reset(e)},o},n.tls=n.tls||{};for(var H in l)"function"!=typeof l[H]&&(n.tls[H]=l[H]);n.tls.prf_tls1=a,n.tls.hmac_sha1=i,n.tls.createSessionCache=l.createSessionCache,n.tls.createConnection=l.createConnection},function(e,t,r){function n(){o=String.fromCharCode(128),o+=i.util.fillString(String.fromCharCode(0),64),u=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],c=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],l=new Array(64);for(var e=0;e<64;++e)l[e]=Math.floor(4294967296*Math.abs(Math.sin(e+1)));p=!0}function a(e,t,r){for(var n,a,i,s,o,p,f,d,h=r.length();h>=64;){for(a=e.h0,i=e.h1,s=e.h2,o=e.h3,d=0;d<16;++d)t[d]=r.getInt32Le(),p=o^i&(s^o),n=a+p+l[d]+t[d],f=c[d],a=o,o=s,s=i,i+=n<<f|n>>>32-f;for(;d<32;++d)p=s^o&(i^s),n=a+p+l[d]+t[u[d]],f=c[d],a=o,o=s,s=i,i+=n<<f|n>>>32-f;for(;d<48;++d)p=i^s^o,n=a+p+l[d]+t[u[d]],f=c[d],a=o,o=s,s=i,i+=n<<f|n>>>32-f;for(;d<64;++d)p=s^(i|~o),n=a+p+l[d]+t[u[d]],f=c[d],a=o,o=s,s=i,i+=n<<f|n>>>32-f;e.h0=e.h0+a|0,e.h1=e.h1+i|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,h-=64}}var i=r(1);r(2);var s=i.md5=i.md5||{};i.md=i.md||{},i.md.algorithms=i.md.algorithms||{},i.md.md5=i.md.algorithms.md5=s,s.create=function(){p||n();var e=null,t=i.util.createBuffer(),r=new Array(16),s={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,messageLength64:[0,0]};return s.start=function(){return s.messageLength=0,s.messageLength64=[0,0],t=i.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},s},s.start(),s.update=function(n,o){return"utf8"===o?n=i.util.encodeUtf8(n):"euc-kr"===o&&(n=i.util.encodeEucKr(n)),s.messageLength+=n.length,s.messageLength64[0]+=n.length/4294967296>>>0,s.messageLength64[1]+=n.length>>>0,t.putBytes(n),a(e,r,t),(t.read>2048||0===t.length())&&t.compact(),s},s.digest=function(){var n=i.util.createBuffer();n.putBytes(t.bytes()),n.putBytes(o.substr(0,64-(s.messageLength64[1]+8&63))),n.putInt32Le(s.messageLength64[1]<<3),n.putInt32Le(s.messageLength64[0]<<3|s.messageLength64[0]>>>28);var u={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};a(u,r,n);var c=i.util.createBuffer();return c.putInt32Le(u.h0),c.putInt32Le(u.h1),c.putInt32Le(u.h2),c.putInt32Le(u.h3),c},s};var o=null,u=null,c=null,l=null,p=!1},function(e,t,r){var n=r(1);r(3),r(7),r(52),r(13),r(29),r(59),r(32),r(18),r(2),r(24),r(33);var a=n.asn1,i=n.pki=n.pki||{},s={name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo.privateKey",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"privateKey"},{name:"PrivateKeyInfo.attributes",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"PrivateKeyInfo.attributes.attribute",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.attributes.attribute.AttributeType",tagClass:a.Class.UNIVERSAL,type:a.Class.OID,constructed:!1,capture:"AttributeType"},{name:"PrivateKeyInfo.attributes.attribute.values",tagClass:a.Class.UNIVERSAL,type:a.Class.SET,constructed:!0,value:[{name:"PrivateKeyInfo.attributes.attribute.values.AttributeValue",tagClass:a.Class.UNIVERSAL,type:a.Class.BITSTRING,constructed:!1,capture:"AttributeValue"}]}]}]}]};i.pemToDer=function(e){var t=n.pem.decode(e)[0];if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return n.util.createBuffer(t.body)},i.privateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("PRIVATE KEY"!==t.type&&"RSA PRIVATE KEY"!==t.type){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var s=a.fromDer(t.body);return i.privateKeyFromAsn1(s)},i.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:a.toDer(i.privateKeyToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:a.toDer(e).getBytes()};return n.pem.encode(r,{maxline:t})},i.privateKeyFromAsn1=function(e){var t={},r=[];if(a.validate(e,s,t,r)){a.fromDer(n.util.createBuffer(t.privateKey))}return t.AttributeType?"1.2.840.113549.1.1.1"===a.derToOid(t.privateKeyOid)?i.rsaPrivateKeyFromAsn1(e):"1.2.410.200004.1.21"===a.derToOid(t.privateKeyOid)?i.kcdsaPrivateKeyFromAsn1(e):i.rsaPrivateKeyFromAsn1(e):i.rsaPrivateKeyFromAsn1(e)},i.privateKeyToAsn1=function(e){return e.hasOwnProperty("n")?i.privateKeyToRSAPrivateKey(e):i.privateKeyToKCDSAPrivateKey(e)}},function(e,t,r){function n(e,t){return e.start().update(t).digest().getBytes()}var a=r(1);if(r(9),r(3),r(17),r(5),r(7),r(13),r(29),r(4),r(55),r(18),r(2),r(56),r(57),r(58),void 0===i)var i=a.jsbn.BigInteger;var s=a.asn1,o=a.pki=a.pki||{};o.pbe=a.pbe=a.pbe||{};var u=o.oids,c={name:"EncryptedPrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},l={name:"PBES1Algorithms.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES1Algorithms.params.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES1Algorithms.params.iterationCount",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,onstructed:!0,capture:"kdfIterationCount"}]},p={name:"PBES2Algorithms",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,onstructed:!0,capture:"kdfIterationCount"}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},f={name:"pkcs-12PbeParams",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"iterations"}]};o.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128";var n,i,c,l=a.random.getBytesSync(r.saltSize),p=r.count,f=s.integerToDer(p);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm||"aria"===r.algorithm){var d,h,y;switch(r.algorithm){case"aes128":n=16,d=16,h=u["aes128-CBC"],y=a.aes.createEncryptionCipher;break;case"aes192":n=24,d=16,h=u["aes192-CBC"],y=a.aes.createEncryptionCipher;break;case"aes256":n=32,d=16,h=u["aes256-CBC"],y=a.aes.createEncryptionCipher;break;case"des":n=8,d=8,h=u.desCBC,y=a.des.createEncryptionCipher;break;case"aria":n=16,d=16,h=u["aria-CBC"],y=a.aria.createEncryptionCipher;break;default:var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=r.algorithm,g}var m=a.pkcs5.pbkdf2(t,l,p,n),v=a.random.getBytesSync(d),C=y(m);C.start(v),C.update(s.toDer(e)),C.finish(),c=C.output.getBytes(),i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.pkcs5PBES2).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u.pkcs5PBKDF2).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,l),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,f.getBytes())])]),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(h).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,v)])])])}else if("3des"===r.algorithm){n=24;var E=new a.util.ByteBuffer(l),m=o.pbe.generatePkcs12Key(t,E,1,p,n),v=o.pbe.generatePkcs12Key(t,E,2,p,n),C=a.des.createEncryptionCipher(m);C.start(v),C.update(s.toDer(e)),C.finish(),c=C.output.getBytes(),i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,l),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,f.getBytes())])])}else{if("seed"!==r.algorithm){var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=r.algorithm,g}n=16,d=16,h=u["seed-CBC"],y=a.seed.createEncryptionCipher;var m=a.pkcs5.pbkdf1(t,l,p,n),v=m.substr(n,20-n),T=a.md.sha1.create();T.start(),T.update(v),v=T.digest().getBytes().substr(0,d),m=m.substr(0,n);var C=y(m);C.start(v),C.update(s.toDer(e)),C.finish(),c=C.output.getBytes(),i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(u["pbeWithSHA1AndSEED-CBC"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,l),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,f.getBytes())])])}return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[i,s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,c)])},o.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!s.validate(e,c,n,i)){var u=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=i,u}var l=s.derToOid(n.encryptionOid),p=o.pbe.getCipher(l,n.encryptionParams,t),f=a.util.createBuffer(n.encryptedData);return p.update(f),p.finish()&&(r=s.fromDer(p.output)),r},o.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:s.toDer(e).getBytes()};return a.pem.encode(r,{maxline:t})},o.encryptedPrivateKeyFromPem=function(e){var t=a.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return s.fromDer(t.body)},o.encryptPrivateKey=function(e,t,r){r=r||{};var n;if(r&&void 0===r.legacy&&void 0===r.algorithm)return e.hasOwnProperty("n")?(r={algorithm:"seed"},n=o.wrapRsaPrivateKey(o.privateKeyToAsn1(e))):(r={algorithm:"aria"},n=o.wrapKcdsaPrivateKey(e,o.privateKeyToAsn1(e))),n=o.encryptPrivateKeyInfo(n,t,r),o.encryptedPrivateKeyToPem(n);if(!r.legacy)return n=e.hasOwnProperty("n")?o.wrapRsaPrivateKey(o.privateKeyToAsn1(e)):o.wrapKcdsaPrivateKey(e,o.privateKeyToAsn1(e)),n=o.encryptPrivateKeyInfo(n,t,r),o.encryptedPrivateKeyToPem(n);var i,u,c,l;switch(r.algorithm){case"aes128":i="AES-128-CBC",c=16,u=a.random.getBytesSync(16),l=a.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",c=24,u=a.random.getBytesSync(16),l=a.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",c=32,u=a.random.getBytesSync(16),l=a.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",c=24,u=a.random.getBytesSync(8),l=a.des.createEncryptionCipher;break;case"des":i="DES-CBC",c=8,u=a.random.getBytesSync(8),l=a.des.createEncryptionCipher;break;case"seed":i="SEED-CBC",c=16,u=a.random.getBytesSync(16),l=a.seed.createEncryptionCipher;break;case"aria":i="ARIA-CBC",c=16,u=a.random.getBytesSync(16),l=a.aria.createEncryptionCipher;break;default:var p=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw p.algorithm=r.algorithm,p}var f=a.pbe.opensslDeriveBytes(t,u.substr(0,8),c),d=l(f);d.start(u),d.update(s.toDer(o.privateKeyToAsn1(e))),d.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:a.util.bytesToHex(u).toUpperCase()},body:d.output.getBytes()};return a.pem.encode(h)},o.decryptRsaPrivateKey=function(e,t){var r=null,n=a.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==n.type&&"PRIVATE KEY"!==n.type&&"RSA PRIVATE KEY"!==n.type){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&"ENCRYPTED"===n.procType.type){var u,c;switch(n.dekInfo.algorithm){case"DES-CBC":u=8,c=a.des.createDecryptionCipher;break;case"DES-EDE3-CBC":u=24,c=a.des.createDecryptionCipher;break;case"AES-128-CBC":u=16,c=a.aes.createDecryptionCipher;break;case"AES-192-CBC":u=24,c=a.aes.createDecryptionCipher;break;case"AES-256-CBC":u=32,c=a.aes.createDecryptionCipher;break;case"RC2-40-CBC":u=5,c=function(e){return a.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":u=8,c=function(e){return a.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":u=16,c=function(e){return a.rc2.createDecryptionCipher(e,128)};break;case"SEED-CBC":u=16,c=a.seed.createDecryptionCipher;break;case"ARIA-CBC":u=16,c=a.aria.createDecryptionCipher;break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var l=a.util.hexToBytes(n.dekInfo.parameters),p=a.pbe.opensslDeriveBytes(t,l.substr(0,8),u),f=c(p);if(f.start(l),f.update(a.util.createBuffer(n.body)),!f.finish())return r;r=f.output.getBytes()}else r=n.body;return r="ENCRYPTED PRIVATE KEY"===n.type?o.decryptPrivateKeyInfo(s.fromDer(r),t):s.fromDer(r),null!==r&&(r=o.privateKeyFromAsn1(r)),r},o.pbe.generatePkcs12Key=function(e,t,r,n,i,s){var o,u;void 0!==s&&null!==s||(s=a.md.sha1.create());var c=s.digestLength,l=s.blockLength,p=new a.util.ByteBuffer,f=new a.util.ByteBuffer;if(null!==e&&void 0!==e){for(u=0;u<e.length;u++)f.putInt16(e.charCodeAt(u));f.putInt16(0)}var d=f.length(),h=t.length(),y=new a.util.ByteBuffer;y.fillWithByte(r,l);var g=l*Math.ceil(h/l),m=new a.util.ByteBuffer;for(u=0;u<g;u++)m.putByte(t.at(u%h));var v=l*Math.ceil(d/l),C=new a.util.ByteBuffer;for(u=0;u<v;u++)C.putByte(f.at(u%d));var E=m;E.putBuffer(C);for(var T=Math.ceil(i/c),S=1;S<=T;S++){var I=new a.util.ByteBuffer;I.putBytes(y.bytes()),I.putBytes(E.bytes());for(var A=0;A<n;A++)s.start(),s.update(I.getBytes()),I=s.digest();var b=new a.util.ByteBuffer;for(u=0;u<l;u++)b.putByte(I.at(u%c));var N=Math.ceil(h/l)+Math.ceil(d/l),B=new a.util.ByteBuffer;for(o=0;o<N;o++){var w=new a.util.ByteBuffer(E.getBytes(l)),R=511;for(u=b.length()-1;u>=0;u--)R>>=8,R+=b.at(u)+w.at(u),w.setAt(u,255&R);B.putBuffer(w)}E=B,p.putBuffer(I)}return p.truncate(p.length()-i),p},o.pbe.getCipher=function(e,t,r){switch(e){case o.oids.pkcs5PBES2:return o.pbe.getCipherForPBES2(e,t,r);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(e,t,r);case o.oids["pbeWithSHA1AndSEED-CBC"]:return o.pbe.getCipherForPBES1Kisa2(e,t,r);case o.oids["Kisa1SEED-CBC"]:return o.pbe.getCipherForPBES1KISA1(e,t,r);case o.oids["GPKIpbeWithSHA1AndSEED-CBC"]:return o.pbe.getCipherForPBES1KISA2GPKI(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC","pbeWithSHA1AndSEED-CBC","Kisa1SEED-CBC","GPKIpbeWithSHA1AndSEED-CBC"],n}},o.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!s.validate(t,p,n,i)){var u=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=i,u}if((e=s.derToOid(n.kdfOid))!==o.oids.pkcs5PBKDF2){var u=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw u.oid=e,u.supportedOids=["pkcs5PBKDF2"],u}if((e=s.derToOid(n.encOid))!==o.oids["aes128-CBC"]&&e!==o.oids["aes192-CBC"]&&e!==o.oids["aes256-CBC"]&&e!==o.oids["des-EDE3-CBC"]&&e!==o.oids.desCBC&&e!==o.oids["seed-CBC"]&&e!==o.oids["aria-CBC"]){var u=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw u.oid=e,u.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC","seed-CBC","aria-CBC"],u}var c=n.kdfSalt,l=a.util.createBuffer(n.kdfIterationCount);l=l.getInt(l.length()<<3);var f,d,h;switch(o.oids[e]){case"aes128-CBC":f=16,d=a.aes.createDecryptionCipher;break;case"aes192-CBC":f=24,d=a.aes.createDecryptionCipher;break;case"aes256-CBC":f=32,d=a.aes.createDecryptionCipher;break;case"des-EDE3-CBC":f=24,d=a.des.createDecryptionCipher;break;case"desCBC":f=8,d=a.des.createDecryptionCipher;break;case"seed-CBC":f=16,d=a.seed.createDecryptionCipher;break;case"aria-CBC":f=16,d=a.aria.createDecryptionCipher,h="sha1"}var y=a.pkcs5.pbkdf2(r,c,l,f,h),g=n.encIv,m=d(y);return m.start(g),m},o.pbe.getCipherForPBES1Kisa1=function(e,t,r){var n={},i=[];if(!s.validate(t,l,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var u=n.kdfSalt,c=a.util.createBuffer(n.kdfIterationCount);c=c.getInt(c.length()<<3);var p,f;p=16,f=a.seed.createDecryptionCipher;var d=a.pkcs5.pbkdf1(r,u,c,p);d=d.substr(0,p);var h=a.util.hexToBytes("00010203040506070809000102030405"),y=f(d);return y.start(h),y},o.pbe.getCipherForPBES1Kisa2=function(e,t,r){var n={},i=[];if(!s.validate(t,l,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var u=n.kdfSalt,c=a.util.createBuffer(n.kdfIterationCount);c=c.getInt(c.length()<<3);var p,f;p=16,f=a.seed.createDecryptionCipher;var d=a.pkcs5.pbkdf1(r,u,c,p),h=d.substr(p,20-p),y=a.md.sha1.create();y.start(),y.update(h),h=y.digest().getBytes().substr(0,16),d=d.substr(0,p);var g=f(d);return g.start(h),g},o.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!s.validate(t,f,n,i)){var u=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=i,u}var c=a.util.createBuffer(n.salt),l=a.util.createBuffer(n.iterations);l=l.getInt(l.length()<<3);var p,d,h;switch(e){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:p=24,d=8,h=a.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:p=5,d=8,h=function(e,t){var r=a.rc2.createDecryptionCipher(e,40);return r.start(t,null),r};break;default:var u=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw u.oid=e,u}return h(o.pbe.generatePkcs12Key(r,c,1,l,p),o.pbe.generatePkcs12Key(r,c,2,l,d))},o.pbe.opensslDeriveBytes=function(e,t,r,i){void 0!==i&&null!==i||(i=a.md.md5.create()),null===t&&(t="");for(var s=[n(i,e+t)],o=16,u=1;o<r;++u,o+=16)s.push(n(i,s[u-1]+e+t));return s.join("").substr(0,r)}},function(e,t,r){"use strict";(function(e){function n(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=i.prototype):(null===e&&(e=new i(t)),e.length=t),e}function i(e,t,r){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return s(this,e,t,r)}function s(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,r,n):"string"==typeof t?l(e,t,r):d(e,t)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,r,n){return o(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}function c(e,t){if(o(t),e=a(e,t<0?0:0|h(t)),!i.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function l(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!i.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|g(t,r);e=a(e,n);var s=e.write(t,r);return s!==n&&(e=e.slice(0,s)),e}function p(e,t){var r=t.length<0?0:0|h(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function f(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),i.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=i.prototype):e=p(e,t),e}function d(e,t){if(i.isBuffer(t)){var r=0|h(t.length);return e=a(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||W(t.length)?a(e,0):p(e,t);if("Buffer"===t.type&&Z(t.data))return p(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function h(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function y(e){return+e!=e&&(e=0),i.alloc(+e)}function g(e,t){if(i.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(e).length;default:if(n)return j(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return U(this,t,r);case"utf8":case"utf-8":return w(this,t,r);case"ascii":return k(this,t,r);case"latin1":case"binary":return _(this,t,r);case"base64":return B(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function v(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function C(e,t,r,n,a){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return-1;r=e.length-1}else if(r<0){if(!a)return-1;r=0}if("string"==typeof t&&(t=i.from(t,n)),i.isBuffer(t))return 0===t.length?-1:E(e,t,r,n,a);if("number"==typeof t)return t&=255,i.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):E(e,[t],r,n,a);throw new TypeError("val must be string, number or Buffer")}function E(e,t,r,n,a){function i(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,o=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,o/=2,u/=2,r/=2}var c;if(a){var l=-1;for(c=r;c<o;c++)if(i(e,c)===i(t,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*s}else-1!==l&&(c-=c-l),l=-1}else for(r+u>o&&(r=o-u),c=r;c>=0;c--){for(var p=!0,f=0;f<u;f++)if(i(e,c+f)!==i(t,f)){p=!1;break}if(p)return c}return-1}function T(e,t,r,n){r=Number(r)||0;var a=e.length-r;n?(n=Number(n))>a&&(n=a):n=a;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;s<n;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[r+s]=o}return s}function S(e,t,r,n){return z(j(t,e.length-r),e,r,n)}function I(e,t,r,n){return z(H(t),e,r,n)}function A(e,t,r,n){return I(e,t,r,n)}function b(e,t,r,n){return z(X(t),e,r,n)}function N(e,t,r,n){return z(Q(t,e.length-r),e,r,n)}function B(e,t,r){return 0===t&&r===e.length?Y.fromByteArray(e):Y.fromByteArray(e.slice(t,r))}function w(e,t,r){r=Math.min(e.length,r);for(var n=[],a=t;a<r;){var i=e[a],s=null,o=i>239?4:i>223?3:i>191?2:1;if(a+o<=r){var u,c,l,p;switch(o){case 1:i<128&&(s=i);break;case 2:u=e[a+1],128==(192&u)&&(p=(31&i)<<6|63&u)>127&&(s=p);break;case 3:u=e[a+1],c=e[a+2],128==(192&u)&&128==(192&c)&&(p=(15&i)<<12|(63&u)<<6|63&c)>2047&&(p<55296||p>57343)&&(s=p);break;case 4:u=e[a+1],c=e[a+2],l=e[a+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(p=(15&i)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&p<1114112&&(s=p)}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),a+=o}return R(n)}function R(e){var t=e.length;if(t<=J)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=J));return r}function k(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}function _(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}function U(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var a="",i=t;i<r;++i)a+=q(e[i]);return a}function L(e,t,r){for(var n=e.slice(t,r),a="",i=0;i<n.length;i+=2)a+=String.fromCharCode(n[i]+256*n[i+1]);return a}function D(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,n,a,s){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function x(e,t,r,n){t<0&&(t=65535+t+1);for(var a=0,i=Math.min(e.length-r,2);a<i;++a)e[r+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function V(e,t,r,n){t<0&&(t=4294967295+t+1);for(var a=0,i=Math.min(e.length-r,4);a<i;++a)e[r+a]=t>>>8*(n?a:3-a)&255}function O(e,t,r,n,a,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function K(e,t,r,n,a){return a||O(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(e,t,r,n,23,4),r+4}function M(e,t,r,n,a){return a||O(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(e,t,r,n,52,8),r+8}function G(e){if(e=F(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function F(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function j(e,t){t=t||1/0;for(var r,n=e.length,a=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function H(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function Q(e,t){for(var r,n,a,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,a=r%256,i.push(a),i.push(n);return i}function X(e){return Y.toByteArray(G(e))}function z(e,t,r,n){for(var a=0;a<n&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}function W(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var Y=r(117),$=r(118),Z=r(119);t.Buffer=i,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=n(),i.poolSize=8192,i._augment=function(e){return e.__proto__=i.prototype,e},i.from=function(e,t,r){return s(null,e,t,r)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(e,t,r){return u(null,e,t,r)},i.allocUnsafe=function(e){return c(null,e)},i.allocUnsafeSlow=function(e){return c(null,e)},i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,a=0,s=Math.min(r,n);a<s;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:n<r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Z(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=i.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var s=e[r];if(!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,a),a+=s.length}return n},i.byteLength=g,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?w(this,0,e):m.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e,t,r,n,a){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),t<0||r>e.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&t>=r)return 0;if(n>=a)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,a>>>=0,this===e)return 0;for(var s=a-n,o=r-t,u=Math.min(s,o),c=this.slice(n,a),l=e.slice(t,r),p=0;p<u;++p)if(c[p]!==l[p]){s=c[p],o=l[p];break}return s<o?-1:o<s?1:0},i.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},i.prototype.indexOf=function(e,t,r){return C(this,e,t,r,!0)},i.prototype.lastIndexOf=function(e,t,r){return C(this,e,t,r,!1)},i.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var a=this.length-t;if((void 0===r||r>a)&&(r=a),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return T(this,e,t,r);case"utf8":case"utf-8":return S(this,e,t,r);case"ascii":return I(this,e,t,r);case"latin1":case"binary":return A(this,e,t,r);case"base64":return b(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;i.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(i.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=i.prototype;else{var a=t-e;n=new i(a,void 0);for(var s=0;s<a;++s)n[s]=this[s+e]}return n},i.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n},i.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e+--t],a=1;t>0&&(a*=256);)n+=this[e+--t]*a;return n},i.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return a*=128,n>=a&&(n-=Math.pow(2,8*t)),n},i.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=t,a=1,i=this[e+--n];n>0&&(a*=256);)i+=this[e+--n]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*t)),i},i.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),$.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),$.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),$.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),$.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){P(this,e,t,r,Math.pow(2,8*r)-1,0)}var a=1,i=0;for(this[t]=255&e;++i<r&&(a*=256);)this[t+i]=e/a&255;return t+r},i.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){P(this,e,t,r,Math.pow(2,8*r)-1,0)}var a=r-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+r},i.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):x(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):x(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):V(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):V(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var a=Math.pow(2,8*r-1);P(this,e,t,r,a-1,-a)}var i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},i.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var a=Math.pow(2,8*r-1);P(this,e,t,r,a-1,-a)}var i=r-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},i.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):x(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):x(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):V(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):V(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,r){return K(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){return K(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},i.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a,s=n-r;if(this===e&&r<t&&t<n)for(a=s-1;a>=0;--a)e[a+t]=this[a+r];else if(s<1e3||!i.TYPED_ARRAY_SUPPORT)for(a=0;a<s;++a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},i.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var o=i.isBuffer(e)?e:j(new i(e,n).toString()),u=o.length;for(s=0;s<r-t;++s)this[s+t]=o[s%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,r(21))},function(e,t,r){(function(e){var t=r(1);r(5),r(2);var n=(void 0!==e&&e.versions&&e.versions.node,null);(t.prng=t.prng||{}).create=function(e){function r(e){if(o.pools[0].messageLength>=32)return i(),e();var t=32-o.pools[0].messageLength<<5;o.seedFile(t,function(t,r){if(t)return e(t);o.collect(r),i(),e()})}function a(){if(o.pools[0].messageLength>=32)return i();var e=32-o.pools[0].messageLength<<5;o.collect(o.seedFileSync(e)),i()}function i(){var e=o.plugin.md.create();e.update(o.pools[0].digest().getBytes()),o.pools[0].start();for(var t=1,r=1;r<32;++r)(t=31===t?2147483648:t<<2)%o.reseeds==0&&(e.update(o.pools[r].digest().getBytes()),o.pools[r].start());var n=e.digest().getBytes();e.start(),e.update(n);var a=e.digest().getBytes();o.key=o.plugin.formatKey(n),o.seed=o.plugin.formatSeed(a),o.reseeds=4294967295===o.reseeds?0:o.reseeds+1,o.generated=0}function s(e){var r=null;if("undefined"!=typeof window){var n=window.crypto||window.msCrypto;n&&n.getRandomValues&&(r=function(e){return n.getRandomValues(e)})}var a=t.util.createBuffer();if(r)for(;a.length()<e;){var i=Math.max(1,Math.min(e-a.length(),65536)/4),s=new Uint32Array(Math.floor(i));try{r(s);for(var o=0;o<s.length;++o)a.putInt32(s[o])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(a.length()<e)for(var u,c,l,p=Math.floor(65536*Math.random());a.length()<e;){c=16807*(65535&p),u=16807*(p>>16),c+=(32767&u)<<16,c+=u>>15,c=(2147483647&c)+(c>>31),p=4294967295&c;for(var o=0;o<3;++o)l=p>>>(o<<3),l^=Math.floor(256*Math.random()),a.putByte(String.fromCharCode(255&l))}return a.getBytes(e)}for(var o={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0},u=e.md,c=new Array(32),l=0;l<32;++l)c[l]=u.create();return o.pools=c,o.pool=0,o.generate=function(e,n){function a(p){if(p)return n(p);if(l.length()>=e)return n(null,l.getBytes(e));if(o.generated>1048575&&(o.key=null),null===o.key)return t.util.nextTick(function(){r(a)});var f=i(o.key,o.seed);o.generated+=f.length,l.putBytes(f),o.key=u(i(o.key,s(o.seed))),o.seed=c(i(o.key,o.seed)),t.util.setImmediate(a)}if(!n)return o.generateSync(e);var i=o.plugin.cipher,s=o.plugin.increment,u=o.plugin.formatKey,c=o.plugin.formatSeed,l=t.util.createBuffer();o.key=null,a()},o.generateSync=function(e){var r=o.plugin.cipher,n=o.plugin.increment,i=o.plugin.formatKey,s=o.plugin.formatSeed;o.key=null;for(var u=t.util.createBuffer();u.length()<e;){o.generated>1048575&&(o.key=null),null===o.key&&a();var c=r(o.key,o.seed);o.generated+=c.length,u.putBytes(c),o.key=i(r(o.key,n(o.seed))),o.seed=s(r(o.key,o.seed))}return u.getBytes(e)},n?(o.seedFile=function(e,t){n.randomBytes(e,function(e,r){if(e)return t(e);t(null,r.toString())})},o.seedFileSync=function(e){return n.randomBytes(e).toString()}):(o.seedFile=function(e,t){try{t(null,s(e))}catch(e){t(e)}},o.seedFileSync=s),o.collect=function(e){for(var t=e.length,r=0;r<t;++r)o.pools[o.pool].update(e.substr(r,1)),o.pool=31===o.pool?0:o.pool+1},o.collectInt=function(e,t){for(var r="",n=0;n<t;n+=8)r+=String.fromCharCode(e>>n&255);o.collect(r)},o.registerWorker=function(e){if(e===self)o.seedFile=function(e,t){function r(e){var n=e.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",r),t(n.forge.prng.err,n.forge.prng.bytes))}self.addEventListener("message",r),self.postMessage({forge:{prng:{needed:e}}})};else{var t=function(t){var r=t.data;r.forge&&r.forge.prng&&o.seedFile(r.forge.prng.needed,function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})})};e.addEventListener("message",t)}},o}}).call(t,r(11))},function(e,t,r){var n=r(1);r(2);var a=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],i=[1,2,3,5],s=function(e,t){return e<<t&65535|(65535&e)>>16-t},o=function(e,t){return(65535&e)>>t|e<<16-t&65535};n.rc2=n.rc2||{},n.rc2.expandKey=function(e,t){"string"==typeof e&&(e=n.util.createBuffer(e)),t=t||128;var r,i=e,s=e.length(),o=t,u=Math.ceil(o/8),c=255>>(7&o);for(r=s;r<128;r++)i.putByte(a[i.at(r-1)+i.at(r-s)&255]);for(i.setAt(128-u,a[i.at(128-u)&c]),r=127-u;r>=0;r--)i.setAt(r,a[i.at(r+1)^i.at(r+u)]);return i};var u=function(e,t,r){var a,u,c,l,p=!1,f=null,d=null,h=null,y=[];for(e=n.rc2.expandKey(e,t),c=0;c<64;c++)y.push(e.getInt16Le());r?(a=function(e){for(c=0;c<4;c++)e[c]+=y[l]+(e[(c+3)%4]&e[(c+2)%4])+(~e[(c+3)%4]&e[(c+1)%4]),e[c]=s(e[c],i[c]),l++},u=function(e){for(c=0;c<4;c++)e[c]+=y[63&e[(c+3)%4]]}):(a=function(e){for(c=3;c>=0;c--)e[c]=o(e[c],i[c]),e[c]-=y[l]+(e[(c+3)%4]&e[(c+2)%4])+(~e[(c+3)%4]&e[(c+1)%4]),l--},u=function(e){for(c=3;c>=0;c--)e[c]-=y[63&e[(c+3)%4]]});var g=function(e){var t=[];for(c=0;c<4;c++){var n=f.getInt16Le();null!==h&&(r?n^=h.getInt16Le():h.putInt16Le(n)),t.push(65535&n)}l=r?0:63;for(var a=0;a<e.length;a++)for(var i=0;i<e[a][0];i++)e[a][1](t);for(c=0;c<4;c++)null!==h&&(r?h.putInt16Le(t[c]):t[c]^=h.getInt16Le()),d.putInt16Le(t[c])},m=null;return m={start:function(e,t){e&&"string"==typeof e&&(e=n.util.createBuffer(e)),p=!1,f=n.util.createBuffer(),d=t||new n.util.createBuffer,h=e,m.output=d},update:function(e){for(p||f.putBuffer(e);f.length()>=8;)g([[5,a],[1,u],[6,a],[1,u],[5,a]])},finish:function(e){var t=!0;if(r)if(e)t=e(8,f,!r);else{var n=8===f.length()?8:8-f.length();f.fillWithByte(n,n)}if(t&&(p=!0,m.update()),!r&&(t=0===f.length()))if(e)t=e(8,d,!r);else{var a=d.length(),i=d.at(a-1);i>a?t=!1:d.truncate(i)}return t}}};n.rc2.startEncrypting=function(e,t,r){var a=n.rc2.createEncryptionCipher(e,128);return a.start(t,r),a},n.rc2.createEncryptionCipher=function(e,t){return u(e,t,!0)},n.rc2.startDecrypting=function(e,t,r){var a=n.rc2.createDecryptionCipher(e,128);return a.start(t,r),a},n.rc2.createDecryptionCipher=function(e,t){return u(e,t,!1)}},function(e,t,r){(function(e,t){var n=r(1);r(12),r(5),r(2);var a,i=n.pkcs5=n.pkcs5||{},s=void 0!==e&&e.versions&&e.versions.node;n.pbkdf1=i.pbkdf1=function(e,r,i,o,u,c){if("function"==typeof u&&(c=u,u=null),s&&!n.disableNativeCode&&a.pbkdf1&&(null===u||"object"!=typeof u)&&(a.pbkdf1Sync.length>4||!u||"sha1"===u))return"string"!=typeof u&&(u="sha1"),r=new t(r,"binary"),c?4===a.pbkdf1Sync.length?a.pbkdf1(e,r,i,o,function(e,t){if(e)return c(e);c(null,t.toString("binary"))}):a.pbkdf1(e,r,i,o,u,function(e,t){if(e)return c(e);c(null,t.toString("binary"))}):4===a.pbkdf1Sync.length?a.pbkdf1Sync(e,r,i,o).toString("binary"):a.pbkdf1Sync(e,r,i,o,u).toString("binary");if(void 0!==u&&null!==u||(u=n.md.sha1.create()),"string"==typeof u){if(!(u in n.md.algorithms))throw new Error("Unknown hash algorithm: "+u);u=n.md[u].create()}var l=u.digestLength;if(o>4294967295*l){var p=new Error("Derived key is too long.");if(c)return c(p);throw p}var f,d=(Math.ceil(o/l),n.md.sha1.create()),h="";if(!c){d.start(),d.update(e),d.update(r);for(var y=0;y<i-1;y++)f=d.digest().getBytes(),d.start(),d.update(f);return h=d.digest().getBytes()}!function(){d.start(),d.update(e),d.update(r);for(var t=0;t<i-1;t++)f=d.digest().getBytes(),d.start(),d.update(f);h=d.digest().getBytes(),c(null,h)}()}}).call(t,r(11),r(53).Buffer)},function(e,t,r){function n(e,t){var r=function(){return new c.seed.Algorithm(e,t)};c.cipher.registerAlgorithm(e,r)}function a(){l=!0}function i(e,t){return u.ISC_Init_SEED_Key(e.slice(0))}function s(e,t,r,n){var a;a=n?u.ISC_SEED_Decrypt(t,e):u.ISC_SEED_Encrypt(t,e),r[0]=a[0]<<24|a[1]<<16|a[2]<<8|a[3],r[1]=a[4]<<24|a[5]<<16|a[6]<<8|a[7],r[2]=a[8]<<24|a[9]<<16|a[10]<<8|a[11],r[3]=a[12]<<24|a[13]<<16|a[14]<<8|a[15]}function o(e){e=e||{};var t,r=(e.mode||"CBC").toUpperCase(),n="SEED-"+r;t=e.decrypt?c.cipher.createDecipher(n,e.key):c.cipher.createCipher(n,e.key);var a=t.start;return t.start=function(e,r){var n=null;r instanceof c.util.ByteBuffer&&(n=r,r={}),r=r||{},r.output=n,r.iv=e,a.call(t,r)},t}var u=function(){function e(e){return s[0][255&e]^s[1][e>>>8&255]^s[2][e>>>16&255]^s[3][e>>>24&255]}function t(t,r,n){var a=new Array(2),i=t[0],s=t[1],o=t[2],u=t[3];new Array(4);return a[0]=o^n[r],a[1]=u^n[r+1],a[1]^=a[0],a[1]=e(a[1]),a[0]=a[0]+a[1]&4294967295,a[0]=e(a[0]),a[1]=a[1]+a[0]&4294967295,a[1]=e(a[1]),a[0]=a[0]+a[1]&4294967295,i^=a[0],s^=a[1],a[0]=i^n[r+2],a[1]=s^n[r+3],a[1]^=a[0],a[1]=e(a[1]),a[0]=a[0]+a[1]&4294967295,a[0]=e(a[0]),a[1]=a[1]+a[0]&4294967295,a[1]=e(a[1]),a[0]=a[0]+a[1]&4294967295,o^=a[0],u^=a[1],[i,s,o,u]}function r(t,r,n){var a=new Array(2),i=t[0],s=t[1],o=t[2],u=t[3];new Array(4);return a[0]=o^n[r],a[1]=u^n[r+1],a[1]^=a[0],a[1]=e(a[1]),a[0]=a[0]+a[1]&4294967295,a[0]=e(a[0]),a[1]=a[1]+a[0]&4294967295,a[1]=e(a[1]),a[0]=a[0]+a[1]&4294967295,i^=a[0],s^=a[1],a[0]=i^n[r-2],a[1]=s^n[r-1],a[1]^=a[0],a[1]=e(a[1]),a[0]=a[0]+a[1]&4294967295,a[0]=e(a[0]),a[1]=a[1]+a[0]&4294967295,a[1]=e(a[1]),a[0]=a[0]+a[1]&4294967295,o^=a[0],u^=a[1],[i,s,o,u]}function n(t){var r,n,a,i,s=new Array,u=0;r=t[0],n=t[1],a=t[2],i=t[3];for(var c=0;c<16;c++)if(s[u++]=e(r+a-o[c]),s[u++]=e(n-i+o[c]),c%2==0){var l=r;r=r>>>8|n<<24,n=n>>>8|l<<24}else{var p=a;a=a<<8|i>>>24,i=i<<8|p>>>24}return s}function a(e,r){var n=0,a=new Array(4),i=new Uint8Array(16);for(a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3];n<32;)a=t(a,n,r),n+=4;return i[0]=a[2]>>>24&255,i[1]=a[2]>>>16&255,i[2]=a[2]>>>8&255,i[3]=255&a[2],i[4]=a[3]>>>24&255,i[5]=a[3]>>>16&255,i[6]=a[3]>>>8&255,i[7]=255&a[3],i[8]=a[0]>>>24&255,i[9]=a[0]>>>16&255,i[10]=a[0]>>>8&255,i[11]=255&a[0],i[12]=a[1]>>>24&255,i[13]=a[1]>>>16&255,i[14]=a[1]>>>8&255,i[15]=255&a[1],i}function i(e,t){var n,a=new Array(4),i=new Uint8Array(16);for(a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],n=32;n>0;)a=r(a,n-2,t),n-=4;return i[0]=a[2]>>>24&255,i[1]=a[2]>>>16&255,i[2]=a[2]>>>8&255,i[3]=255&a[2],i[4]=a[3]>>>24&255,i[5]=a[3]>>>16&255,i[6]=a[3]>>>8&255,i[7]=255&a[3],i[8]=a[0]>>>24&255,i[9]=a[0]>>>16&255,i[10]=a[0]>>>8&255,i[11]=255&a[0],i[12]=a[1]>>>24&255,i[13]=a[1]>>>16&255,i[14]=a[1]>>>8&255,i[15]=255&a[1],i}var n,a,i,s=[[696885672,92635524,382128852,331600848,340021332,487395612,747413676,621093156,491606364,54739776,403181592,504238620,289493328,1020063996,181060296,591618912,671621160,71581764,536879136,495817116,549511392,583197408,147374280,386339604,629514660,261063564,50529024,994800504,999011256,318968592,314757840,785310444,809529456,210534540,1057960764,680042664,839004720,500027868,919007988,876900468,751624428,361075092,185271048,390550356,474763356,457921368,1032696252,16843008,604250148,470552604,860058480,411603096,268439568,214745292,851636976,432656856,738992172,667411428,843215472,58950528,462132120,297914832,109478532,164217288,541089888,272650320,595829664,734782440,218956044,914797236,512660124,256852812,931640244,441078360,113689284,944271480,646357668,302125584,797942700,365285844,557932896,63161280,881111220,21053760,306336336,1028485500,227377548,134742024,521081628,428446104,0,420024600,67371012,323179344,935850996,566354400,1036907004,910586484,789521196,654779172,813740208,193692552,235799052,730571688,578986656,776888940,327390096,223166796,692674920,1011642492,151585032,168428040,1066382268,802153452,868479984,96846276,126321540,335810580,1053750012,608460900,516870876,772678188,189481800,436867608,101057028,553722144,726360936,642146916,33686016,902164980,310547088,176849544,202113036,864269232,1045328508,281071824,977957496,122110788,377918100,633725412,637936164,8421504,764256684,533713884,562143648,805318704,923218740,781099692,906375732,352653588,570565152,940060728,885321972,663200676,88424772,206323788,25264512,701096424,75792516,394761108,889532724,197903304,248431308,1007431740,826372464,285282576,130532292,160006536,893743476,1003222008,449499864,952692984,344232084,424235352,42107520,80003268,1070593020,155795784,956903736,658989924,12632256,265274316,398971860,948482232,252642060,244220556,37896768,587408160,293704080,743202924,466342872,612671652,872689716,834793968,138952776,46318272,793731948,1024274748,755835180,4210752,1049539260,1041117756,1015853244,29475264,713728680,982168248,240009804,356864340,990589752,483184860,675831912,1062171516,478974108,415813848,172638792,373707348,927429492,545300640,768467436,105267780,897954228,722150184,625303908,986379e3,600040416,965325240,830583216,529503132,508449372,969535992,650568420,847426224,822161712,717939432,760045932,525292380,616882404,817950960,231588300,143163528,369496596,973746744,407392344,348442836,574775904,688464168,117900036,855847728,684253416,453710616,84214020,961114488,276861072,709517928,705307176,445289112],[943196208,3894986976,741149985,2753988258,3423588291,3693006546,2956166067,3090712752,2888798115,1612726368,1410680145,3288844227,1141130304,1815039843,1747667811,1478183763,3221472195,1612857954,808649523,3023406513,673777953,2686484640,3760374498,2754054051,3490956243,2417066385,269549841,67503618,471600144,3158084784,875955762,1208699715,3962556387,2282260608,1814842464,2821228704,337053459,3288646848,336987666,4097098992,3221406402,1141196097,3760308705,3558262482,1010765619,1010634033,2349764226,2551744656,673712160,1276005954,4097230578,1010699826,2753922465,4164536817,202181889,3693072339,3625502928,673909539,1680229986,2017086066,606537507,741281571,4029792753,1882342002,1073889858,3558130896,1073824065,3221274816,1882407795,1680295779,2888600736,2282457987,4097296371,2888666529,2147516544,471797523,3356150466,741084192,2821360290,875824176,3490890450,134941443,3962490594,3895052769,1545424209,2484372624,404228112,4164471024,1410811731,2888732322,134744064,3288712641,269681427,3423456705,2215020162,3090778545,4232040435,2084392305,3221340609,808517937,4097164785,2282392194,1747602018,2956034481,3490824657,538968096,3558328275,131586,539099682,67372032,1747470432,1882276209,67569411,3625700307,2619182481,2551810449,1612792161,3158216370,3827746530,1478052177,3692940753,1343308113,2417000592,3692874960,2551876242,2686682019,2821426083,3490758864,2147582337,202313475,1141327683,404359698,3760440291,3962359008,2349698433,3158282163,2484504210,2017151859,1545358416,2686616226,2686550433,1612923747,539165475,1275940161,3356018880,2619248274,2619116688,943327794,202116096,741215778,3090844338,1814974050,2619314067,1478117970,4029858546,2417132178,4029924339,1208568129,2016954480,3423390912,336921873,4164668403,1882210416,1949648241,2084523891,875889969,269484048,197379,1680098400,1814908257,3288778434,1949582448,3558196689,3023340720,3895118562,134809857,1949714034,404293905,4231974642,1073758272,269615634,3760242912,3158150577,67437825,4164602610,65793,4029726960,673843746,1545490002,2821294497,1410745938,1073955651,2214954369,336856080,2282326401,2551942035,2955968688,3827680737,1208502336,2017020273,2484570003,4231843056,471731730,2147648130,539033889,2349632640,404425491,1545555795,1949779827,1410614352,2956100274,471665937,606405921,1276071747,0,1141261890,3962424801,1477986384,1343373906,3895184355,2084458098,3625634514,3356084673,4231908849,808452144,2484438417,1680164193,1010568240,3023472306,3827614944,3090910131,2084326512,202247682,1343242320,943262001,606471714,808583730,2214888576,1747536225,2417197971,876021555,3827812323,606340128,2753856672,3356216259,1343439699,134875650,2215085955,3625568721,1275874368,2147713923,2349830019,3423522498,943393587,1208633922,3023538099],[2712152457,2172913029,3537114822,3553629123,1347687492,287055117,2695638156,556016901,1364991309,1128268611,270014472,303832590,1364201793,4043062476,3267889866,1667244867,539502600,1078199364,538976256,2442927501,3772784832,3806339778,3234334920,320083719,2711889285,2206994319,50332419,1937259339,3015195531,319820547,3536851650,3807129294,1886400576,2156661900,859586319,2695374984,842019330,3520863693,4076091078,1886663748,3773574348,2442401157,50858763,1398019911,1348213836,1398283083,2981903757,16777473,539239428,270277644,1936732995,2425886856,269488128,3234598092,4075827906,3520600521,539765772,3823380423,1919955522,2206204803,2476219275,3520074177,2189690502,3251112393,1616912448,1347424320,2745181059,3823643595,17566989,2998154886,2459704974,1129058127,3014932359,1381505610,3267626694,1886926920,2728666758,303043074,2745970575,3520337349,1633689921,3284140995,2964599940,1094713665,1380979266,1903967565,2173439373,526344,320610063,2442664329,0,286791945,263172,1397756739,4092868551,3789562305,4059839949,1920218694,590098191,589571847,2964336768,2206731147,34344462,2745707403,2728403586,1651256910,2475692931,1095503181,1634216265,1887190092,17303817,34081290,3015458703,3823906767,4092605379,3250849221,2206467975,269751300,4076617422,1617175620,3537641166,573320718,1128794955,303569418,33818118,555753729,1667771211,1650730566,33554946,4059313605,2458915458,2189953674,789516,3014669187,1920745038,3503296704,1920481866,1128531783,2459178630,3789825477,572794374,2155872384,2712415629,3554418639,2711626113,808464384,859059975,2729193102,842282502,286528773,572531202,808990728,4042536132,2745444231,1094976837,1078725708,2172649857,3790088649,2156135556,2475956103,825505029,3284667339,3268153038,809253900,1903178049,286265601,3284404167,2173176201,1903441221,4093131723,3537377994,4042799304,2425623684,1364728137,2189427330,3234071748,4093394895,1095240009,825768201,1667508039,3233808576,3284930511,3553892295,2964863112,51121935,2190216846,1111491138,589308675,2442137985,1617701964,3554155467,2695111812,808727556,4059050433,1078462536,3267363522,1668034383,826031373,556543245,1077936192,2998681230,842808846,2965126284,3250586049,2728929930,2998418058,1112280654,1364464965,859323147,3504086220,1617438792,1937522511,2426150028,3503823048,1112017482,1381242438,1936996167,2694848640,3790351821,1111754310,2981377413,589835019,1633953093,4076354250,3823117251,2981640585,2981114241,2476482447,1381768782,4059576777,3806602950,2997891714,825241857,3806866122,1634479437,1398546255,3773048004,4042272960,3251375565,2156398728,303306246,842545674,1347950664,3503559876,1650467394,556280073,50595591,858796803,3773311176,320346891,17040645,1903704393,2425360512,1650993738,573057546,2459441802],[137377848,3370182696,220277805,2258805798,3485715471,3469925406,2209591347,2293282872,2409868335,1080057888,1162957845,3351495687,1145062404,1331915823,1264805931,1263753243,3284385795,1113743394,53686323,2243015733,153167913,2158010400,3269648418,2275648551,3285438483,2173800465,17895441,100795398,202382364,2360392764,103953462,1262700555,3487820847,2290124808,1281387564,2292230184,118690839,3300967428,101848086,3304125492,3267543042,1161905157,3252805665,3335705622,255015999,221330493,2390920206,2291177496,136325160,1312967694,3337810998,238173246,2241963045,3388078137,218172429,3486768159,3369130008,186853419,1180853286,1249015866,119743527,253963311,3253858353,1114796082,1111638018,3302020116,1094795265,3233857536,1131638835,1197696039,2359340076,2340653067,3354653751,2376182829,2155905024,252910623,3401762826,203435052,2325915690,70267956,3268595730,184748043,3470978094,3387025449,1297177629,2224067604,135272472,3371235384,1196643351,2393025582,134219784,3317810181,51580947,3452029965,2256700422,2310125625,3488873535,1299283005,3250700289,20000817,3320968245,2323810314,1247963178,2175905841,3251752977,2105376,3352548375,33685506,35790882,67109892,1214277672,1097953329,117638151,3419658267,2375130141,2308020249,1096900641,2394078270,3336758310,1230067737,3453082653,1095847953,2156957712,3436239900,2324863002,2208538659,2342758443,3234910224,2172747777,251857935,1195590663,168957978,3286491171,3437292588,2374077453,2410921023,2257753110,1265858619,1280334876,2191695906,2174853153,1130586147,52633635,1296124941,3368077320,2391972894,2358287388,171063354,201329676,237120558,2326968378,1315073070,2408815647,1246910490,3270701106,2190643218,3287543859,1229015049,1215330360,3435187212,85005333,3421763643,1081110576,1165063221,1332968511,87110709,1052688,50528259,1147167780,1298230317,3334652934,1148220468,3318862869,2226172980,3403868202,151062537,1181905974,152115225,3472030782,1077952512,34738194,3235962912,2377235517,83952645,3404920890,16842753,3237015600,170010666,1314020382,2309072937,1179800598,1128480771,2239857669,68162580,2306967561,2341705755,2159063088,3319915557,1212172296,1232173113,2274595863,3438345276,236067870,2189590530,18948129,2357234700,185800731,1330863135,1198748727,1146115092,2192748594,219225117,86058021,1329810447,0,1178747910,3454135341,1213224984,1112690706,3420710955,1316125758,3402815514,3384920073,3455188029,3158064,2240910357,1164010533,204487740,2259858486,3303072804,2343811131,1282440252,235015182,1079005200,154220601,102900774,36843570,2223014916,1231120425,2207485971,120796215,3353601063,69215268,2225120292,3418605579,1129533459,167905290,2273543175,3385972761,1279282188,2206433283,2407762959,3468872718,187906107,1245857802,2276701239]],o=[2654435769,1013904243,2027808486,4055616972,3816266649,3337566003,2380164711,465362127,930724254,1861448508,3722897016,3150826737,2006686179,4013372358,3731777421,3168587547];return{ISC_Init_SEED_Key:n,ISC_SEED_Encrypt:a,ISC_SEED_Decrypt:i}}(),c=r(1);r(15),r(16),r(2),c.seed=c.seed||{},c.seed.startEncrypting=function(e,t,r,n){var a=o({key:e,output:r,decrypt:!1,mode:n});return a.start(t),a},c.seed.createEncryptionCipher=function(e,t){return o({key:e,output:null,decrypt:!1,mode:t})},c.seed.startDecrypting=function(e,t,r,n){var a=o({key:e,output:r,decrypt:!0,mode:n});return a.start(t),a},c.seed.createDecryptionCipher=function(e,t){return o({key:e,output:null,decrypt:!0,mode:t})},c.seed.Algorithm=function(e,t){l||a();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return s(r._w,e,t,!1)},decrypt:function(e,t){return s(r._w,e,t,!0)}}}),r._init=!1},c.seed.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if("string"==typeof r&&16===r.length)r=c.util.createBuffer(r);else if((c.util.isArray(r)||r instanceof Uint8Array)&&16===r.length){t=r,r=c.util.createBuffer();for(var n=0;n<t.length;++n)r.putByte(t[n])}if(!c.util.isArray(r)){t=r,r=[];var a=t.length();if(16===a){a>>>=2;for(var n=0;n<a;++n)r.push(t.getInt32())}}if(!c.util.isArray(r)||4!==r.length)throw new Error("Invalid key parameter.");var s=this.mode.name,o=-1!==c.util.arrayIndexOf(["CFB","OFB","CTR","GCM"],s);this._w=i(r,e.decrypt&&!o),this._init=!0}},c.seed._expandKey=function(e,t){return l||a(),i(e,t)},c.seed._updateBlock=s,n("SEED-ECB",c.cipher.modes.ecb),n("SEED-CBC",c.cipher.modes.cbc),n("SEED-CFB",c.cipher.modes.cfb),n("SEED-OFB",c.cipher.modes.ofb),n("SEED-CTR",c.cipher.modes.ctr),n("SEED-GCM",c.cipher.modes.gcm);var l=!1},function(e,t,r){function n(e,t){var r=function(){return new c.aria.Algorithm(e,t)};c.cipher.registerAlgorithm(e,r)}function a(){l=!0}function i(e,t){var r=4*e.length*8,n=new Uint8Array(r/8);return n[0]=e[0]>>>24&255,n[1]=e[0]>>>16&255,n[2]=e[0]>>>8&255,n[3]=255&e[0],n[4]=e[1]>>>24&255,n[5]=e[1]>>>16&255,n[6]=e[1]>>>8&255,n[7]=255&e[1],n[8]=e[2]>>>24&255,n[9]=e[2]>>>16&255,n[10]=e[2]>>>8&255,n[11]=255&e[2],n[12]=e[3]>>>24&255,n[13]=e[3]>>>16&255,n[14]=e[3]>>>8&255,n[15]=255&e[3],e.length>4&&(n[16]=e[4]>>>24&255,n[17]=e[4]>>>16&255,n[18]=e[4]>>>8&255,n[19]=255&e[4],n[20]=e[5]>>>24&255,n[21]=e[5]>>>16&255,n[22]=e[5]>>>8&255,n[23]=255&e[5]),e.length>6&&(n[24]=e[6]>>>24&255,n[25]=e[6]>>>16&255,n[26]=e[6]>>>8&255,n[27]=255&e[6],n[28]=e[7]>>>24&255,n[29]=e[7]>>>16&255,n[30]=e[7]>>>8&255,n[31]=255&e[7]),u.ISC_Init_ARIA_Key(n.slice(0),t,r)}function s(e,t,r,n){var a=new Uint8Array(16),i=new Uint8Array(16);a[0]=t[0]>>>24&255,a[1]=t[0]>>>16&255,a[2]=t[0]>>>8&255,a[3]=255&t[0],a[4]=t[1]>>>24&255,a[5]=t[1]>>>16&255,a[6]=t[1]>>>8&255,a[7]=255&t[1],a[8]=t[2]>>>24&255,a[9]=t[2]>>>16&255,a[10]=t[2]>>>8&255,a[11]=255&t[2],a[12]=t[3]>>>24&255,a[13]=t[3]>>>16&255,a[14]=t[3]>>>8&255,a[15]=255&t[3],i=n?u.ISC_ARIA_Decrypt(a,e):u.ISC_ARIA_Encrypt(a,e),r[0]=i[0]<<24&4278190080|i[1]<<16&16711680|i[2]<<8&65280|255&i[3],r[1]=i[4]<<24&4278190080|i[5]<<16&16711680|i[6]<<8&65280|255&i[7],r[2]=i[8]<<24&4278190080|i[9]<<16&16711680|i[10]<<8&65280|255&i[11],r[3]=i[12]<<24&4278190080|i[13]<<16&16711680|i[14]<<8&65280|255&i[15]}function o(e){e=e||{};var t,r=(e.mode||"CBC").toUpperCase(),n="ARIA-"+r;t=e.decrypt?c.cipher.createDecipher(n,e.key):c.cipher.createCipher(n,e.key);var a=t.start;return t.start=function(e,r){var n=null;r instanceof c.util.ByteBuffer&&(n=r,r={}),r=r||{},r.output=n,r.iv=e,a.call(t,r)},t}Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(e,t){return new Uint8Array(Array.prototype.slice.call(this,e,t))}});var u=function(){function e(e,t){var r;return r=e[3]^e[4]^e[9]^e[14],t[0]=e[6]^e[8]^e[13]^r,t[5]=e[1]^e[10]^e[15]^r,t[11]=e[2]^e[7]^e[12]^r,t[14]=e[0]^e[5]^e[11]^r,r=e[2]^e[5]^e[8]^e[15],t[1]=e[7]^e[9]^e[12]^r,t[4]=e[0]^e[11]^e[14]^r,t[10]=e[3]^e[6]^e[13]^r,t[15]=e[1]^e[4]^e[10]^r,r=e[1]^e[6]^e[11]^e[12],t[2]=e[4]^e[10]^e[15]^r,t[7]=e[3]^e[8]^e[13]^r,t[9]=e[0]^e[5]^e[14]^r,t[12]=e[2]^e[7]^e[9]^r,r=e[0]^e[7]^e[10]^e[13],t[3]=e[5]^e[11]^e[14]^r,t[6]=e[2]^e[9]^e[12]^r,t[8]=e[1]^e[4]^e[15]^r,t[13]=e[3]^e[6]^e[8]^r,t}function t(e,t,r){var n,a;for(a=parseInt(t/8),t%=8,n=0;n<16;n++){var i=(a+n)%16,s=e[n]>>t&255;r[i]=r[i]^s,0!=t&&(i=(a+n+1)%16,s=e[n]<<8-t&255,r[i]=r[i]^s)}}function r(r,a){var i,s,o=(a+256)/32,u=new Uint8Array(16*(o+1)),p=new Uint8Array(16),f=new Uint8Array(16),d=new Uint8Array(16),h=new Uint8Array(16),y=new Uint8Array(16);for(s=(a-128)/64,i=0;i<16;i++){var g=l[s][i]^r[i];p[i]=c[i%4][g]}if(f=e(p,f),14==o)for(i=0;i<8;i++)f[i]^=r[16+i];else if(16==o)for(i=0;i<16;i++)f[i]^=r[16+i];for(s=2==s?0:s+1,i=0;i<16;i++){var g=l[s][i]^f[i];p[i]=c[(2+i)%4][g]}for(d=e(p,d),i=0;i<16;i++)d[i]^=r[i];for(s=2==s?0:s+1,i=0;i<16;i++){var g=l[s][i]^d[i];p[i]=c[i%4][g]}for(h=e(p,h),i=0;i<16;i++)h[i]^=f[i];for(i=0;i<16*(o+1);i++)u[i]=0;return t(r,0,y),t(f,19,y),n(u,0,15,y),y=[],t(f,0,y),t(d,19,y),n(u,16,31,y),y=[],t(d,0,y),t(h,19,y),n(u,32,47,y),y=[],t(h,0,y),t(r,19,y),n(u,48,63,y),y=[],t(r,0,y),t(f,31,y),n(u,64,79,y),y=[],t(f,0,y),t(d,31,y),n(u,80,95,y),y=[],t(d,0,y),t(h,31,y),n(u,96,111,y),y=[],t(h,0,y),t(r,31,y),n(u,112,127,y),y=[],t(r,0,y),t(f,67,y),n(u,128,143,y),y=[],t(f,0,y),t(d,67,y),n(u,144,159,y),y=[],t(d,0,y),t(h,67,y),n(u,160,175,y),y=[],t(h,0,y),t(r,67,y),n(u,176,191,y),y=[],t(r,0,y),t(f,97,y),n(u,192,207,y),y=[],o>12&&(t(f,0,y),t(d,97,y),n(u,208,223,y),y=[],t(d,0,y),t(h,97,y),n(u,224,239,y),y=[]),o>14&&(t(h,0,y),t(r,97,y),n(u,240,255,y),y=[],t(r,0,y),t(f,109,y),n(u,256,271,y),y=[]),u}function n(e,t,r,n){var a=0,i=r-t;for(a=0;a<=i;a++)e[a+t]=n[a]}function a(t,a){var i,s,o,u=new Uint8Array(16),o=(a+256)/32,c=r(t,a);for(s=0;s<16;s++)u[s]=c[s],c[s]=c[16*o+s],c[16*o+s]=u[s];for(i=1;i<=o/2;i++){var l=new Uint8Array(16),p=new Uint8Array(16);for(l=c.slice(16*i,16*i+16),u=e(l,u),l=c.slice(16*(o-i),16*(o-i)+16),p=c.slice(16*i,16*i+16),p=e(l,p),n(c,16*i,16*i+15,p),s=0;s<16;s++)c[16*(o-i)+s]=u[s]}return c}function i(e,t,n){return t?a(e,n):r(e,n)}function s(t,r){var n,a,i,s,o,u=new Uint8Array(16),l=new Uint8Array(16),p=new Uint8Array(16),f=1,d=r.length/16-1;for(a=0;a<16;a++)l[a]=t[a];for(p=r.slice(0,16),n=0;n<d/2;n++){for(a=0;a<16;a++)i=p[a]^l[a],u[a]=c[a%4][i];for(l=e(u,l),s=16*f,o=16*f+16,p=r.slice(s,o),f+=1,a=0;a<16;a++)i=p[a]^l[a],u[a]=c[(2+a)%4][i];l=e(u,l),s=16*f,o=16*f+16,p=r.slice(s,o),f+=1}for(u=e(l,u),a=0;a<16;a++)l[a]=p[a]^u[a];return l}function o(e,t){return s(e,t)}function u(e,t){return s(e,t)}var i,o,u,c=[[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],[226,78,84,252,148,194,74,204,98,13,106,70,60,77,139,209,94,250,100,203,180,151,190,43,188,119,46,3,211,25,89,193,29,6,65,107,85,240,153,105,234,156,24,174,99,223,231,187,0,115,102,251,150,76,133,228,58,9,69,170,15,238,16,235,45,127,244,41,172,207,173,145,141,120,200,149,249,47,206,205,8,122,136,56,92,131,42,40,71,219,184,199,147,164,18,83,255,135,14,49,54,33,88,72,1,142,55,116,50,202,233,177,183,171,12,215,196,86,66,38,7,152,96,217,182,185,17,64,236,32,140,189,160,201,132,4,73,35,241,79,80,31,19,220,216,192,158,87,227,195,123,101,59,2,143,62,232,37,146,229,21,221,253,23,169,191,212,154,126,197,57,103,254,118,157,67,167,225,208,245,104,242,27,52,112,5,163,138,213,121,134,168,48,198,81,75,30,166,39,246,53,210,110,36,22,130,95,218,230,117,162,239,44,178,28,159,93,111,128,10,114,68,155,108,144,11,91,51,125,90,82,243,97,161,247,176,214,63,124,109,237,20,224,165,61,34,179,248,137,222,113,26,175,186,181,129],[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],[48,104,153,27,135,185,33,120,80,57,219,225,114,9,98,60,62,126,94,142,241,160,204,163,42,29,251,182,214,32,196,141,129,101,245,137,203,157,119,198,87,67,86,23,212,64,26,77,192,99,108,227,183,200,100,106,83,170,56,152,12,244,155,237,127,34,118,175,221,58,11,88,103,136,6,195,53,13,1,139,140,194,230,95,2,36,117,147,102,30,229,226,84,216,16,206,122,232,8,44,18,151,50,171,180,39,10,35,223,239,202,217,184,250,220,49,107,209,173,25,73,189,81,150,238,228,168,65,218,255,205,85,134,54,190,97,82,248,187,14,130,72,105,154,224,71,158,92,4,75,52,21,121,38,167,222,41,174,146,215,132,233,210,186,93,243,197,176,191,164,59,113,68,70,43,252,235,111,213,246,20,254,124,112,90,125,253,47,24,131,22,165,145,31,5,149,116,169,193,91,74,133,109,19,7,79,78,69,178,15,201,28,166,188,236,115,144,123,207,89,143,161,249,45,242,177,0,148,55,159,208,46,156,110,40,63,128,240,61,211,37,138,181,231,66,179,199,234,247,76,17,51,3,162,172,96]],l=[[81,124,193,183,39,34,10,148,254,19,171,232,250,154,110,224],[109,177,74,204,158,33,200,32,255,40,177,213,239,93,226,176],[219,146,55,29,33,38,233,112,3,36,151,117,4,232,201,14]];return{ISC_Init_ARIA_Key:i,ISC_ARIA_Encrypt:o,ISC_ARIA_Decrypt:u}}(),c=r(1);r(15),r(16),r(2),c.aria=c.aria||{},c.aria.startEncrypting=function(e,t,r,n){var a=o({key:e,output:r,decrypt:!1,mode:n});return a.start(t),a},c.aria.createEncryptionCipher=function(e,t){return o({key:e,output:null,decrypt:!1,mode:t})},c.aria.startDecrypting=function(e,t,r,n){var a=o({key:e,output:r,decrypt:!0,mode:n});return a.start(t),a},c.aria.createDecryptionCipher=function(e,t){return o({key:e,output:null,decrypt:!0,mode:t})},c.aria.Algorithm=function(e,t){l||a();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return s(r._w,e,t,!1)},decrypt:function(e,t){return s(r._w,e,t,!0)}}}),r._init=!1},c.aria.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if((c.util.isArray(r)||r instanceof Uint8Array)&&(16===r.length||24===r.length||32===r.length)){t=r,r=c.util.createBuffer();for(var n=0;n<t.length;++n)r.putByte(t[n])}}else r=c.util.createBuffer(r);if(!c.util.isArray(r)){t=r,r=[];var a=t.length();if(16===a||24===a||32===a){a>>>=2;for(var n=0;n<a;++n)r.push(t.getInt32())}}if(!c.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var s=this.mode.name,o=-1!==c.util.arrayIndexOf(["CFB","OFB","CTR","GCM"],s);this._w=i(r,e.decrypt&&!o),this._init=!0}},c.aria._expandKey=function(e,t){return l||a(),i(e,t)},c.aria._updateBlock=s,n("ARIA-ECB",c.cipher.modes.ecb),n("ARIA-CBC",c.cipher.modes.cbc),n("ARIA-CFB",c.cipher.modes.cfb),n("ARIA-OFB",c.cipher.modes.ofb),n("ARIA-CTR",c.cipher.modes.ctr),n("ARIA-GCM",c.cipher.modes.gcm);var l=!1},function(e,t,r){function n(e,t,r,n){for(var a=[],i=0;i<e.length;i++)for(var s=0;s<e[i].safeBags.length;s++){var o=e[i].safeBags[s];void 0!==n&&o.type!==n||(null!==t?void 0!==o.attributes[t]&&o.attributes[t].indexOf(r)>=0&&a.push(o):a.push(o))}return a}function a(e){if(e.composed||e.constructed){for(var t=c.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function i(e,t,r,n){if(t=l.fromDer(t,r),t.tagClass!==l.Class.UNIVERSAL||t.type!==l.Type.SEQUENCE||!0!==t.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var u=t.value[i],c={},f=[];if(!l.validate(u,d,c,f)){var h=new Error("Cannot read ContentInfo.");throw h.errors=f,h}var y={encrypted:!1},g=null,m=c.content.value[0];switch(l.derToOid(c.contentType)){case p.oids.data:if(m.tagClass!==l.Class.UNIVERSAL||m.type!==l.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");g=a(m).value;break;case p.oids.encryptedData:n&&(g=s(m,n),y.encrypted=!0);break;default:var h=new Error("Unsupported PKCS#12 contentType.");throw h.contentType=l.derToOid(c.contentType),h}y.safeBags=o(g,r,n),e.safeContents.push(y)}}function s(e,t){var r={},n=[];if(!l.validate(e,c.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var s=l.derToOid(r.contentType);if(s!==p.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=s,i}s=l.derToOid(r.encAlgorithm);var o=p.pbe.getCipher(s,r.encParameter,t),u=a(r.encryptedContentAsn1),f=c.util.createBuffer(u.value);if(o.update(f),!o.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return o.output.getBytes()}function o(e,t,r){if(!e)return[];if(!t&&0===e.length)return[];if(e=l.fromDer(e,t),e.tagClass!==l.Class.UNIVERSAL||e.type!==l.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],a=0;a<e.value.length;a++){var i=e.value[a],s={},o=[];if(!l.validate(i,y,s,o)){var c=new Error("Cannot read SafeBag.");throw c.errors=o,c}var f={type:l.derToOid(s.bagId),attributes:u(s.bagAttributes)};n.push(f);var d,h,g=s.bagValue.value[0];switch(f.type){case p.oids.pkcs8ShroudedKeyBag:if(void 0!==r&&null===(g=p.decryptPrivateKeyInfo(g,r)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case p.oids.keyBag:try{f.key=p.privateKeyFromAsn1(g)}catch(e){f.key=null,f.asn1=g}continue;case p.oids.certBag:d=m,h=function(){if(l.derToOid(s.certId)!==p.oids.x509Certificate){var e=new Error("Unsupported certificate type, only X.509 supported.");throw e.oid=l.derToOid(s.certId),e}var r=l.fromDer(s.cert,t);try{f.cert=p.certificateFromAsn1(r,!0)}catch(e){f.cert=null,f.asn1=r}};break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=f.type,c}if(void 0!==d&&!l.validate(g,d,s,o)){var c=new Error("Cannot read PKCS#12 "+d.name);throw c.errors=o,c}h()}return n}function u(e){var t={};if(void 0!==e)for(var r=0;r<e.length;++r){var n={},a=[];if(!l.validate(e[r],g,n,a)){var i=new Error("Cannot read PKCS#12 BagAttribute.");throw i.errors=a,i}var s=l.derToOid(n.oid);if(void 0!==p.oids[s]){t[p.oids[s]]=[];for(var o=0;o<n.values.length;++o)t[p.oids[s]].push(n.values[o].value)}}return t}var c=r(1);r(3),r(12),r(7),r(60),r(52),r(4),r(18),r(22),r(2),r(24);var l=c.asn1,p=c.pki,f=c.pkcs12=c.pkcs12||{},d={name:"ContentInfo",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:l.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},h={name:"PFX",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,capture:"version"},d,{name:"PFX.macData",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:l.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:l.Class.UNIVERSAL,type:l.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:l.Class.UNIVERSAL,type:l.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:l.Class.UNIVERSAL,type:l.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},y={name:"SafeBag",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:l.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:l.Class.UNIVERSAL,type:l.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},g={name:"Attribute",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:l.Class.UNIVERSAL,type:l.Type.SET,constructed:!0,capture:"values"}]},m={name:"CertBag",tagClass:l.Class.UNIVERSAL,type:l.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:l.Class.UNIVERSAL,type:l.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:l.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:l.Class.UNIVERSAL,type:l.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};f.certFromP12Asn1=function(e){strict=!0;var t={},r=[];if(!l.validate(e,h,t,r)){var s=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw s.errors=s,s}var o={version:t.version.charCodeAt(0),safeContents:[],getBags:function(e){var t,r={};return"localKeyId"in e?t=e.localKeyId:"localKeyIdHex"in e&&(t=c.util.hexToBytes(e.localKeyIdHex)),void 0===t&&!("friendlyName"in e)&&"bagType"in e&&(r[e.bagType]=n(o.safeContents,null,null,e.bagType)),void 0!==t&&(r.localKeyId=n(o.safeContents,"localKeyId",t,e.bagType)),"friendlyName"in e&&(r.friendlyName=n(o.safeContents,"friendlyName",e.friendlyName,e.bagType)),r},getBagsByFriendlyName:function(e,t){return n(o.safeContents,"friendlyName",e,t)},getBagsByLocalKeyId:function(e,t){return n(o.safeContents,"localKeyId",e,t)}};if(3!==t.version.charCodeAt(0)){var s=new Error("PKCS#12 PFX of version other than 3 not supported.");throw s.version=t.version.charCodeAt(0),s}if(l.derToOid(t.contentType)!==p.oids.data){var s=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw s.oid=l.derToOid(t.contentType),s}var u=t.content.value[0];if(u.tagClass!==l.Class.UNIVERSAL||u.type!==l.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");return u=a(u),i(o,u.value,strict,void 0),o},f.pkcs12FromAsn1=function(e,t,r){"string"==typeof t?(r=t,t=!0):void 0===t&&(t=!0);var s={},o=[];if(!l.validate(e,h,s,o)){var u=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw u.errors=u,u}var d={version:s.version.charCodeAt(0),safeContents:[],getBags:function(e){var t,r={};return"localKeyId"in e?t=e.localKeyId:"localKeyIdHex"in e&&(t=c.util.hexToBytes(e.localKeyIdHex)),void 0===t&&!("friendlyName"in e)&&"bagType"in e&&(r[e.bagType]=n(d.safeContents,null,null,e.bagType)),void 0!==t&&(r.localKeyId=n(d.safeContents,"localKeyId",t,e.bagType)),"friendlyName"in e&&(r.friendlyName=n(d.safeContents,"friendlyName",e.friendlyName,e.bagType)),r},getBagsByFriendlyName:function(e,t){return n(d.safeContents,"friendlyName",e,t)},getBagsByLocalKeyId:function(e,t){return n(d.safeContents,"localKeyId",e,t)}};if(3!==s.version.charCodeAt(0)){var u=new Error("PKCS#12 PFX of version other than 3 not supported.");throw u.version=s.version.charCodeAt(0),u}if(l.derToOid(s.contentType)!==p.oids.data){var u=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw u.oid=l.derToOid(s.contentType),u}var y=s.content.value[0];if(y.tagClass!==l.Class.UNIVERSAL||y.type!==l.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(y=a(y),s.mac){var g=null,m=0,v=l.derToOid(s.macAlgorithm);switch(v){case p.oids.sha1:g=c.md.sha1.create(),m=20;break;case p.oids.sha256:g=c.md.sha256.create(),m=32;break;case p.oids.sha384:g=c.md.sha384.create(),m=48;break;case p.oids.sha512:g=c.md.sha512.create(),m=64;break;case p.oids.md5:g=c.md.md5.create(),m=16}if(null===g)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+v);var C=new c.util.ByteBuffer(s.macSalt),E="macIterations"in s?parseInt(c.util.bytesToHex(s.macIterations),16):1,T=f.generateKey(r,C,3,E,m,g),S=c.hmac.create();S.start(g,T),S.update(y.value);if(S.getMac().getBytes()!==s.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return i(d,y.value,t,r),d},f.toPkcs12Asn1=function(e,t,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var a=[],i=[],s=n.localKeyId,o=null,u=null;null!==t&&(a=c.util.isArray(t)?t:[t]),"friendlyName"in n&&(u=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.friendlyName).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SET,!0,[l.create(l.Class.UNIVERSAL,l.Type.BMPSTRING,!1,n.friendlyName)])])),o=null===s?null:c.util.isArray(s)?s:[s];for(var d=0;d<a.length;d++){if(null!==(s=null===o?null:o[d]))s=c.util.hexToBytes(s);else if(n.generateLocalKeyId){var h=a[d];if(h){"string"==typeof h&&(h=p.certificateFromPem(h));var y=c.md.sha1.create();y.update(l.toDer(p.certificateToAsn1(h)).getBytes()),s=y.digest().getBytes()}else s=c.random.getBytes(20)}var g=[];null!==s&&g.push(l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.localKeyId).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SET,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,s)])])),null!==u&&g.push(u),i.push(l.create(l.Class.UNIVERSAL,l.Type.SET,!0,g))}for(var m=[],v=[],C=0;C<a.length;++C){t=a[C],"string"==typeof t&&(t=p.certificateFromPem(t));var E=i[C],T=p.certificateToAsn1(t),S=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.certBag).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.x509Certificate).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,l.toDer(T).getBytes())])])]),E]);v.push(S)}if(v.length>0){var I=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,v),A=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.data).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,l.toDer(I).getBytes())])]);m.push(A)}for(var b=[],C=0;C<e.length;++C){var N,E=i[C],B=e[C];if(N=B.hasOwnProperty("n")?p.wrapRsaPrivateKey(p.privateKeyToAsn1(B)):p.wrapKcdsaPrivateKey(B,p.privateKeyToAsn1(B)),null===r)var w=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.keyBag).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[N]),E]);else var w=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.pkcs8ShroudedKeyBag).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[p.encryptPrivateKeyInfo(N,r,n)]),E]);b.push(w)}var R=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,b),k=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.data).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,l.toDer(R).getBytes())])]);m.push(k);var _,U=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,m);if(n.useMac){var y=c.md.sha1.create(),L=new c.util.ByteBuffer(c.random.getBytes(n.saltSize)),D=n.count,e=f.generateKey(r,L,3,D,20),P=c.hmac.create();P.start(y,e),P.update(l.toDer(U).getBytes());var x=P.getMac();_=l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.sha1).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.NULL,!1,"")]),l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,x.getBytes())]),l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,L.getBytes()),l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(D).getBytes())])}return l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.INTEGER,!1,l.integerToDer(3).getBytes()),l.create(l.Class.UNIVERSAL,l.Type.SEQUENCE,!0,[l.create(l.Class.UNIVERSAL,l.Type.OID,!1,l.oidToDer(p.oids.data).getBytes()),l.create(l.Class.CONTEXT_SPECIFIC,0,!0,[l.create(l.Class.UNIVERSAL,l.Type.OCTETSTRING,!1,l.toDer(U).getBytes())])]),_])},f.generateKey=c.pbe.generatePkcs12Key},function(e,t,r){var n=r(1);r(3),r(2);var a=n.asn1,i=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=i;var s={name:"ContentInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};i.contentInfoValidator=s;var o={name:"EncryptedContentInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:a.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};i.envelopedDataValidator={name:"EnvelopedData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(o)},i.encryptedDataValidator={name:"EncryptedData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"}].concat(o)};var u={name:"SignerInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:a.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};i.signedDataValidator={name:"SignedData",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},s,{name:"SignedData.Certificates",tagClass:a.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:a.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:a.Class.UNIVERSAL,type:a.Type.SET,capture:"signerInfos",optional:!0,value:[u]}]},i.recipientInfoValidator={name:"RecipientInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:a.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},function(e,t,r){var n=r(1);r(2),n.mgf=n.mgf||{},(n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(e){return{generate:function(t,r){for(var a=new n.util.ByteBuffer,i=Math.ceil(r/e.digestLength),s=0;s<i;s++){var o=new n.util.ByteBuffer;o.putInt32(s),e.start(),e.update(t+o.getBytes()),a.putBuffer(e.digest())}return a.truncate(a.length()-r),a.getBytes()}}}},function(e,t,r){var n=r(1);n.debug=n.debug||{},n.debug.storage={},n.debug.get=function(e,t){var r;return void 0===e?r=n.debug.storage:e in n.debug.storage&&(r=void 0===t?n.debug.storage[e]:n.debug.storage[e][t]),r},n.debug.set=function(e,t,r){e in n.debug.storage||(n.debug.storage[e]={}),n.debug.storage[e][t]=r},n.debug.clear=function(e,t){void 0===e?n.debug.storage={}:e in n.debug.storage&&(void 0===t?delete n.debug.storage[e]:delete n.debug.storage[e][t])}},function(e,t,r){var n=r(1);r(2),n.log=n.log||{},n.log.levels=["none","error","warning","info","debug","verbose","max"];var a={},i=[],s=null;n.log.LEVEL_LOCKED=2,n.log.NO_LEVEL_CHECK=4,n.log.INTERPOLATE=8;for(var o=0;o<n.log.levels.length;++o){var u=n.log.levels[o];a[u]={index:o,name:u.toUpperCase()}}n.log.logMessage=function(e){for(var t=a[e.level].index,r=0;r<i.length;++r){var s=i[r];if(s.flags&n.log.NO_LEVEL_CHECK)s.f(e);else{t<=a[s.level].index&&s.f(s,e)}}},n.log.prepareStandard=function(e){"standard"in e||(e.standard=a[e.level].name+" ["+e.category+"] "+e.message)},n.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]||e.arguments),e.full=n.util.format.apply(this,t)}},n.log.prepareStandardFull=function(e){"standardFull"in e||(n.log.prepareStandard(e),e.standardFull=e.standard)};for(var c=["error","warning","info","debug","verbose"],o=0;o<c.length;++o)!function(e){n.log[e]=function(t,r){var a=Array.prototype.slice.call(arguments).slice(2),i={timestamp:new Date,level:e,category:t,message:r,arguments:a};n.log.logMessage(i)}}(c[o]);if(n.log.makeLogger=function(e){var t={flags:0,f:e};return n.log.setLevel(t,"none"),t},n.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&n.log.LEVEL_LOCKED))for(var a=0;a<n.log.levels.length;++a){var i=n.log.levels[a];if(t==i){e.level=t,r=!0;break}}return r},n.log.lock=function(e,t){void 0===t||t?e.flags|=n.log.LEVEL_LOCKED:e.flags&=~n.log.LEVEL_LOCKED},n.log.addLogger=function(e){i.push(e)},"undefined"!=typeof console&&"log"in console){var l;if(console.error&&console.warn&&console.info&&console.debug){var p={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},f=function(e,t){n.log.prepareStandard(t);var r=p[t.level],a=[t.standard];a=a.concat(t.arguments.slice()),r.apply(console,a)};l=n.log.makeLogger(f)}else{var f=function(e,t){n.log.prepareStandardFull(t),console.log(t.standardFull)};l=n.log.makeLogger(f)}n.log.setLevel(l,"debug"),n.log.addLogger(l),s=l}else console={log:function(){}};if(null!==s){var d=n.util.getQueryVariables();if("console.level"in d&&n.log.setLevel(s,d["console.level"].slice(-1)[0]),"console.lock"in d){"true"==d["console.lock"].slice(-1)[0]&&n.log.lock(s)}}n.log.consoleLogger=s},function(e,t,r){var n=r(1);r(2),r(17),(n.desmac=n.desmac||{}).getMac=function(e,t){var r=n.util.createBuffer(8);r.setAt(0,"0x00"),r.setAt(1,"0x00"),r.setAt(2,"0x00"),r.setAt(3,"0x00"),r.setAt(4,"0x00"),r.setAt(5,"0x00"),r.setAt(6,"0x00"),r.setAt(7,"0x00");var a,i,s,o=0,u=t.length(),c=u%8,l=n.util.createBuffer();for(i=u>=8?8:u,a=0;a<i;a++)l.setAt(a,t.at(o)),o++;for(u-=i;u>=0;){var p=(l.toHex(),n.util.bytesToHex(e),r.toHex(),n.cipher.createCipher("DES-CBC",e));if(p.mode.pad=!1,p.mode.unpad=!1,p.start({iv:r.copy()}),p.update(l.copy()),p.finish(),p.output.toHex(),s=n.util.createBuffer(),s.putBuffer(p.output),s.toHex(),0==(i=u>=8?8:u)){if(c)break;c=!c}for(a=0;a<i;a++)l.setAt(a,s.at(a)^t.at(o)),o++;for(;a<8;a++)l.setAt(a,s.at(a));u-=i}var f=n.util.createBuffer();return f.putBuffer(s),f}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){function n(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;t.setTimeout=function(){return new n(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new n(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(113),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,r){(function(e,t){!function(e,r){"use strict";function n(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return c[u]=n,o(u),u++}function a(e){delete c[e]}function i(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}function s(e){if(l)setTimeout(s,0,e);else{var t=c[e];if(t){l=!0;try{i(t)}finally{a(e),l=!1}}}}if(!e.setImmediate){var o,u=1,c={},l=!1,p=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?function(){o=function(e){t.nextTick(function(){s(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&s(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),o=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){s(e.data)},o=function(t){e.port2.postMessage(t)}}():p&&"onreadystatechange"in p.createElement("script")?function(){var e=p.documentElement;o=function(t){var r=p.createElement("script");r.onreadystatechange=function(){s(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():function(){o=function(e){setTimeout(s,0,e)}}(),f.setImmediate=n,f.clearImmediate=a}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,r(21),r(11))},function(e,t,r){function n(e,t,r){var n=t.entity===c.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:c.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:c.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=o,e.write.cipherFunction=a,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=l.hmac_sha1}function a(e,t){var r=!1,n=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(n),t.updateSequenceNumber();var a;a=e.version.minor===l.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:c.random.getBytesSync(16),t.cipherState.init=!0;var s=t.cipherState.cipher;return s.start({iv:a}),e.version.minor>=l.Versions.TLS_1_1.minor&&s.output.putBytes(a),s.update(e.fragment),s.finish(i)&&(e.fragment=s.output,e.length=e.fragment.length(),r=!0),r}function i(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n)}return!0}function s(e,t,r){var n=!0;if(r){for(var a=t.length(),i=t.last(),s=a-1-i;s<a-1;++s)n=n&&t.at(s)==i;n&&t.truncate(i+1)}return n}function o(e,t){var r=!1;++p;var n;n=e.version.minor===l.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:e.fragment.getBytes(16),t.cipherState.init=!0;var a=t.cipherState.cipher;a.start({iv:n}),a.update(e.fragment),r=a.finish(s);var i=t.macLength,o=c.random.getBytesSync(i),f=a.output.length();f>=i?(e.fragment=a.output.getBytes(f-i),o=a.output.getBytes(i)):e.fragment=a.output.getBytes(),e.fragment=c.util.createBuffer(e.fragment),e.length=e.fragment.length();var d=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),r=u(t.macKey,o,d)&&r}function u(e,t,r){var n=c.hmac.create();return n.start("SHA1",e),n.update(t),t=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),t===r}var c=r(1);r(9),r(49);var l=c.tls;l.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=l.BulkCipherAlgorithm.aes,e.cipher_type=l.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=l.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:n},l.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=l.BulkCipherAlgorithm.aes,e.cipher_type=l.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=l.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:n};var p=0},function(e,t,r){function n(){o=String.fromCharCode(128),o+=i.util.fillString(String.fromCharCode(0),64),c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],u=!0}function a(e,t,r){for(var n,a,i,s,o,u,l,p,f,d,h,y,g,m,v,C=r.length();C>=64;){for(l=0;l<16;++l)t[l]=r.getInt32();for(;l<64;++l)n=t[l-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,a=t[l-15],a=(a>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,t[l]=n+t[l-7]+a+t[l-16]|0;for(p=e.h0,f=e.h1,d=e.h2,h=e.h3,y=e.h4,g=e.h5,m=e.h6,v=e.h7,l=0;l<64;++l)s=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),o=m^y&(g^m),i=(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),u=p&f|d&(p^f),n=v+s+o+c[l]+t[l],a=i+u,v=m,m=g,g=y,y=h+n>>>0,h=d,d=f,f=p,p=n+a>>>0;e.h0=e.h0+p|0,e.h1=e.h1+f|0,e.h2=e.h2+d|0,e.h3=e.h3+h|0,e.h4=e.h4+y|0,e.h5=e.h5+g|0,e.h6=e.h6+m|0,e.h7=e.h7+v|0,C-=64}}var i=r(1);r(2);var s=i.sha256=i.sha256||{};i.md=i.md||{},i.md.algorithms=i.md.algorithms||{},i.md.sha256=i.md.algorithms.sha256=s,s.create=function(){u||n();var e=null,t=i.util.createBuffer(),r=new Array(64),s={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return s.start=function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var r=s.messageLengthSize/4,n=0;n<r;++n)s.fullMessageLength.push(0);return t=i.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},s},s.start(),s.update=function(n,o){"utf8"===o?n=i.util.encodeUtf8(n):"euc-kr"===o&&(n=i.util.encodeEucKr(n));var u=n.length;s.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var c=s.fullMessageLength.length-1;c>=0;--c)s.fullMessageLength[c]+=u[1],u[1]=u[0]+(s.fullMessageLength[c]/4294967296>>>0),s.fullMessageLength[c]=s.fullMessageLength[c]>>>0,u[0]=u[1]/4294967296>>>0;return t.putBytes(n),a(e,r,t),(t.read>2048||0===t.length())&&t.compact(),s},s.digest=function(){var n=i.util.createBuffer();n.putBytes(t.bytes());var u=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize,c=u&s.blockLength-1;n.putBytes(o.substr(0,s.blockLength-c));for(var l,p,f=8*s.fullMessageLength[0],d=0;d<s.fullMessageLength.length-1;++d)l=8*s.fullMessageLength[d+1],p=l/4294967296>>>0,f+=p,n.putInt32(f>>>0),f=l>>>0;n.putInt32(f);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};a(h,r,n);var y=i.util.createBuffer();return y.putInt32(h.h0),y.putInt32(h.h1),y.putInt32(h.h2),y.putInt32(h.h3),y.putInt32(h.h4),y.putInt32(h.h5),y.putInt32(h.h6),y.putInt32(h.h7),y},s};var o=null,u=!1,c=null},function(e,t,r){function n(){u=String.fromCharCode(128),u+=i.util.fillString(String.fromCharCode(0),128),l=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],p={},p["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],p["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],p["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],p["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],c=!0}function a(e,t,r){for(var n,a,i,s,o,u,c,p,f,d,h,y,g,m,v,C,E,T,S,I,A,b,N,B,w,R,k,_,U,L,D,P,x,V,O,K=r.length();K>=128;){for(U=0;U<16;++U)t[U][0]=r.getInt32()>>>0,t[U][1]=r.getInt32()>>>0;for(;U<80;++U)P=t[U-2],L=P[0],D=P[1],n=((L>>>19|D<<13)^(D>>>29|L<<3)^L>>>6)>>>0,a=((L<<13|D>>>19)^(D<<3|L>>>29)^(L<<26|D>>>6))>>>0,V=t[U-15],L=V[0],D=V[1],i=((L>>>1|D<<31)^(L>>>8|D<<24)^L>>>7)>>>0,s=((L<<31|D>>>1)^(L<<24|D>>>8)^(L<<25|D>>>7))>>>0,x=t[U-7],O=t[U-16],D=a+x[1]+s+O[1],t[U][0]=n+x[0]+i+O[0]+(D/4294967296>>>0)>>>0,t[U][1]=D>>>0;for(g=e[0][0],m=e[0][1],v=e[1][0],C=e[1][1],E=e[2][0],T=e[2][1],S=e[3][0],I=e[3][1],A=e[4][0],b=e[4][1],N=e[5][0],B=e[5][1],w=e[6][0],R=e[6][1],k=e[7][0],_=e[7][1],U=0;U<80;++U)c=((A>>>14|b<<18)^(A>>>18|b<<14)^(b>>>9|A<<23))>>>0,p=((A<<18|b>>>14)^(A<<14|b>>>18)^(b<<23|A>>>9))>>>0,f=(w^A&(N^w))>>>0,d=(R^b&(B^R))>>>0,o=((g>>>28|m<<4)^(m>>>2|g<<30)^(m>>>7|g<<25))>>>0,u=((g<<4|m>>>28)^(m<<30|g>>>2)^(m<<25|g>>>7))>>>0,h=(g&v|E&(g^v))>>>0,y=(m&C|T&(m^C))>>>0,D=_+p+d+l[U][1]+t[U][1],n=k+c+f+l[U][0]+t[U][0]+(D/4294967296>>>0)>>>0,a=D>>>0,D=u+y,i=o+h+(D/4294967296>>>0)>>>0,s=D>>>0,k=w,_=R,w=N,R=B,N=A,B=b,D=I+a,A=S+n+(D/4294967296>>>0)>>>0,b=D>>>0,S=E,I=T,E=v,T=C,v=g,C=m,D=a+s,g=n+i+(D/4294967296>>>0)>>>0,m=D>>>0;D=e[0][1]+m,e[0][0]=e[0][0]+g+(D/4294967296>>>0)>>>0,e[0][1]=D>>>0,D=e[1][1]+C,e[1][0]=e[1][0]+v+(D/4294967296>>>0)>>>0,e[1][1]=D>>>0,D=e[2][1]+T,e[2][0]=e[2][0]+E+(D/4294967296>>>0)>>>0,e[2][1]=D>>>0,D=e[3][1]+I,e[3][0]=e[3][0]+S+(D/4294967296>>>0)>>>0,e[3][1]=D>>>0,D=e[4][1]+b,e[4][0]=e[4][0]+A+(D/4294967296>>>0)>>>0,e[4][1]=D>>>0,D=e[5][1]+B,e[5][0]=e[5][0]+N+(D/4294967296>>>0)>>>0,e[5][1]=D>>>0,D=e[6][1]+R,e[6][0]=e[6][0]+w+(D/4294967296>>>0)>>>0,e[6][1]=D>>>0,D=e[7][1]+_,e[7][0]=e[7][0]+k+(D/4294967296>>>0)>>>0,e[7][1]=D>>>0,K-=128}}var i=r(1);r(2);var s=i.sha512=i.sha512||{};i.md=i.md||{},i.md.algorithms=i.md.algorithms||{},i.md.sha512=i.md.algorithms.sha512=s;var o=i.sha384=i.sha512.sha384=i.sha512.sha384||{};o.create=function(){return s.create("SHA-384")},i.md.sha384=i.md.algorithms.sha384=o,i.sha512.sha256=i.sha512.sha256||{create:function(){return s.create("SHA-512/256")}},i.md["sha512/256"]=i.md.algorithms["sha512/256"]=i.sha512.sha256,i.sha512.sha224=i.sha512.sha224||{create:function(){return s.create("SHA-512/224")}},i.md["sha512/224"]=i.md.algorithms["sha512/224"]=i.sha512.sha224,s.create=function(e){if(c||n(),void 0===e&&(e="SHA-512"),!(e in p))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=p[e],r=null,s=i.util.createBuffer(),o=new Array(80),l=0;l<80;++l)o[l]=new Array(2);var f={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:64,messageLength:0,messageLength128:[0,0,0,0]};return f.start=function(){f.messageLength=0,f.messageLength128=[0,0,0,0],s=i.util.createBuffer(),r=new Array(t.length);for(var e=0;e<t.length;++e)r[e]=t[e].slice(0);return f},f.start(),f.update=function(e,t){"utf8"===t?e=i.util.encodeUtf8(e):"euc-kr"===t&&(e=i.util.encodeEucKr(e)),f.messageLength+=e.length;var n=e.length;n=[n/4294967296>>>0,n>>>0];for(var u=3;u>=0;--u)f.messageLength128[u]+=n[1],n[1]=n[0]+(f.messageLength128[u]/4294967296>>>0),f.messageLength128[u]=f.messageLength128[u]>>>0,n[0]=n[1]/4294967296>>>0;return s.putBytes(e),a(r,o,s),(s.read>2048||0===s.length())&&s.compact(),f},f.digest=function(){var t=i.util.createBuffer();t.putBytes(s.bytes()),t.putBytes(u.substr(0,128-(f.messageLength128[3]+16&127)));for(var n=[],c=0;c<3;++c)n[c]=f.messageLength128[c]<<3|f.messageLength128[c-1]>>>28;n[3]=f.messageLength128[3]<<3,t.putInt32(n[0]),t.putInt32(n[1]),t.putInt32(n[2]),t.putInt32(n[3]);for(var l=new Array(r.length),c=0;c<r.length;++c)l[c]=r[c].slice(0);a(l,o,t);var p,d=i.util.createBuffer();p="SHA-512"===e?l.length:"SHA-384"===e?l.length-2:l.length-4;for(var c=0;c<p;++c)d.putInt32(l[c][0]),c===p-1&&"SHA-512/224"===e||d.putInt32(l[c][1]);return d},f};var u=null,c=!1,l=null,p=null},function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function a(e){return 3*e.length/4-n(e)}function i(e){var t,r,a,i,s,o=e.length;i=n(e),s=new p(3*o/4-i),r=i>0?o-4:o;var u=0;for(t=0;t<r;t+=4)a=l[e.charCodeAt(t)]<<18|l[e.charCodeAt(t+1)]<<12|l[e.charCodeAt(t+2)]<<6|l[e.charCodeAt(t+3)],s[u++]=a>>16&255,s[u++]=a>>8&255,s[u++]=255&a;return 2===i?(a=l[e.charCodeAt(t)]<<2|l[e.charCodeAt(t+1)]>>4,s[u++]=255&a):1===i&&(a=l[e.charCodeAt(t)]<<10|l[e.charCodeAt(t+1)]<<4|l[e.charCodeAt(t+2)]>>2,s[u++]=a>>8&255,s[u++]=255&a),s}function s(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function o(e,t,r){for(var n,a=[],i=t;i<r;i+=3)n=(e[i]<<16)+(e[i+1]<<8)+e[i+2],a.push(s(n));return a.join("")}function u(e){for(var t,r=e.length,n=r%3,a="",i=[],s=0,u=r-n;s<u;s+=16383)i.push(o(e,s,s+16383>u?u:s+16383));return 1===n?(t=e[r-1],a+=c[t>>2],a+=c[t<<4&63],a+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],a+=c[t>>10],a+=c[t>>4&63],a+=c[t<<2&63],a+="="),i.push(a),i.join("")}t.byteLength=a,t.toByteArray=i,t.fromByteArray=u;for(var c=[],l=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,h=f.length;d<h;++d)c[d]=f[d],l[f.charCodeAt(d)]=d;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,a){var i,s,o=8*a-n-1,u=(1<<o)-1,c=u>>1,l=-7,p=r?a-1:0,f=r?-1:1,d=e[t+p];for(p+=f,i=d&(1<<-l)-1,d>>=-l,l+=o;l>0;i=256*i+e[t+p],p+=f,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;l>0;s=256*s+e[t+p],p+=f,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),i-=c}return(d?-1:1)*s*Math.pow(2,i-n)},t.write=function(e,t,r,n,a,i){var s,o,u,c=8*i-a-1,l=(1<<c)-1,p=l>>1,f=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,h=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+p>=1?f/u:f*Math.pow(2,1-p),t*u>=2&&(s++,u/=2),s+p>=l?(o=0,s=l):s+p>=1?(o=(t*u-1)*Math.pow(2,a),s+=p):(o=t*Math.pow(2,p-1)*Math.pow(2,a),s=0));a>=8;e[r+d]=255&o,d+=h,o/=256,a-=8);for(s=s<<a|o,c+=a;c>0;e[r+d]=255&s,d+=h,s/=256,c-=8);e[r+d-h]|=128*y}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){var n=r(1);r(61),n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},function(e,t,r){function n(e,t,r,n){e.generate=function(e,i){for(var s=new a.util.ByteBuffer,o=Math.ceil(i/n)+r,u=new a.util.ByteBuffer,c=r;c<o;++c){u.putInt32(c),t.start(),t.update(e+u.getBytes());var l=t.digest();s.putBytes(l.getBytes(n))}return s.truncate(s.length()-i),s.getBytes()}}var a=r(1);r(2),r(4),r(23),a.kem=a.kem||{};var i=a.jsbn.BigInteger;a.kem.rsa={},a.kem.rsa.create=function(e,t){t=t||{};var r=t.prng||a.random,n={};return n.encrypt=function(t,n){var s,o=Math.ceil(t.n.bitLength()/8);do{s=new i(a.util.bytesToHex(r.getBytesSync(o)),16).mod(t.n)}while(s.equals(i.ZERO));s=a.util.hexToBytes(s.toString(16));var u=o-s.length;return u>0&&(s=a.util.fillString(String.fromCharCode(0),u)+s),{encapsulation:t.encrypt(s,"NONE"),key:e.generate(s,n)}},n.decrypt=function(t,r,n){var a=t.decrypt(r,"NONE");return e.generate(a,n)},n},a.kem.kdf1=function(e,t){n(this,e,0,t||e.digestLength)},a.kem.kdf2=function(e,t){n(this,e,1,t||e.digestLength)}},function(e,t,r){function n(e){var t={},r=[];if(!h.validate(e,y.asn1.recipientInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:t.version.charCodeAt(0),issuer:d.pki.RDNAttributesAsArray(t.issuer),serialNumber:d.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:h.derToOid(t.encAlgorithm),parameter:t.encParameter.value,content:t.encKey}}}function a(e){return h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,h.integerToDer(e.version).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[d.pki.distinguishedNameToAsn1({attributes:e.issuer}),h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,d.util.hexToBytes(e.serialNumber))]),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(e.encryptedContent.algorithm).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.NULL,!1,"")]),h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function i(e){for(var t=[],r=0;r<e.length;++r)t.push(n(e[r]));return t}function s(e){for(var t=[],r=0;r<e.length;++r)t.push(a(e[r]));return t}function o(e){var t=h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,h.integerToDer(e.version).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[d.pki.distinguishedNameToAsn1({attributes:e.issuer}),h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,d.util.hexToBytes(e.serialNumber))]),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(e.digestAlgorithm).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(e.signatureAlgorithm).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.NULL,!1,"")])),e.signatureAlgorithm!=d.pki.oids.kcdsa1)t.value.push(h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,e.signature));else{var r=h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature.R),h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,e.signature.S)]);t.value.push(h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,h.toDer(r).getBytes()))}if(e.unauthenticatedAttributes.length>0){for(var n=h.create(h.Class.CONTEXT_SPECIFIC,1,!0,[]),a=0;a<e.unauthenticatedAttributes.length;++a){var i=e.unauthenticatedAttributes[a];n.value.push(c(i))}t.value.push(n)}return t}function u(e){for(var t=[],r=0;r<e.length;++r)t.push(o(e[r]));return t}function c(e){var t;if(e.type===d.pki.oids.contentType)t=h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(e.value).getBytes());else if(e.type===d.pki.oids.messageDigest)t=h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===d.pki.oids.signingTime){var r=new Date("Jan 1, 1950 00:00:00Z"),n=new Date("Jan 1, 2050 00:00:00Z"),a=e.value;if("string"==typeof a){var i=Date.parse(a.replace(/-/g,"/"));a=isNaN(i)?13===a.length?h.utcTimeToDate(a):h.generalizedTimeToDate(a):new Date(i)}t=a>=r&&a<n?h.create(h.Class.UNIVERSAL,h.Type.UTCTIME,!1,h.dateToUtcTime(a)):h.create(h.Class.UNIVERSAL,h.Type.GENERALIZEDTIME,!1,h.dateToGeneralizedTime(a))}else e.type===d.pki.oids["initech-encrypted-random"]?t=h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,e.value):e.type===d.pki.oids.replay_attack&&(t=h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,e.value));return h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(e.type).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SET,!0,[t])])}function l(e){return[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(d.pki.oids.data).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(e.algorithm).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,e.parameter.getBytes())]),h.create(h.Class.CONTEXT_SPECIFIC,0,!0,[h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,e.content.getBytes())])]}function p(e,t,r){var n={},a=[];if(!h.validate(t,r,n,a)){var i=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw i.errors=i,i}if(h.derToOid(n.contentType)!==d.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var s="";if(d.util.isArray(n.encryptedContent))for(var o=0;o<n.encryptedContent.length;++o){if(n.encryptedContent[o].type!==h.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");s+=n.encryptedContent[o].value}else s=n.encryptedContent;e.encryptedContent={algorithm:h.derToOid(n.encAlgorithm),parameter:d.util.createBuffer(n.encParameter.value),content:d.util.createBuffer(s)}}if(n.content){var s="";if(d.util.isArray(n.content))for(var o=0;o<n.content.length;++o){if(n.content[o].type!==h.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");s+=n.content[o].value}else s=n.content;e.content=d.util.createBuffer(s)}return e.version=n.version.charCodeAt(0),e.rawCapture=n,n}function f(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case d.pki.oids["aes128-CBC"]:case d.pki.oids["aes192-CBC"]:case d.pki.oids["aes256-CBC"]:t=d.aes.createDecryptionCipher(e.encryptedContent.key);break;case d.pki.oids.desCBC:case d.pki.oids["des-EDE3-CBC"]:t=d.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}var d=r(1);r(9),r(3),r(17),r(7),r(13),r(60),r(4),r(2),r(24);var h=d.asn1,y=d.pkcs7=d.pkcs7||{};y.messageFromPem=function(e){var t=d.pem.decode(e)[0];if("PKCS7"!==t.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=h.fromDer(t.body);return 2===n.value.length?y.messageFromAsn1(n):y.messageFromAsn1Ex(n)},y.messageToPem=function(e,t){var r;return"isRemoveContentInfo"in e&&!0===e.isRemoveContentInfo&&2===e.contentInfo.value.length&&e.contentInfo.value[1].type===h.Type.NONE&&e.contentInfo.value.pop(),"isRemoveCertificate"in e&&!0===e.isRemoveCertificate&&e.certificates.pop(),r="isRemoveContext"in e&&!0===e.isRemoveContext?{type:"PKCS7",body:h.toDer(e.toAsn1WithoutContext()).getBytes()}:{type:"PKCS7",body:h.toDer(e.toAsn1()).getBytes()},d.pem.encode(r,{maxline:t})},y.messageToPemWithoutContext=function(e,t){var r={type:"PKCS7",body:h.toDer(e.toAsn1WithoutContext()).getBytes()};return d.pem.encode(r,{maxline:t})},y.messageFromAsn1=function(e){var t={},r=[];if(!h.validate(e,y.asn1.contentInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var a,i=h.derToOid(t.contentType);switch(i){case d.pki.oids.envelopedData:a=y.createEnvelopedData();break;case d.pki.oids.encryptedData:a=y.createEncryptedData();break;case d.pki.oids.signedData:a=y.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return a.fromAsn1(t.content.value[0]),a},y.messageFromAsn1Ex=function(e){var t=y.createSignedData();return t.fromAsn1(e),t},y.createSignedData=function(){function e(){for(var e={},t=0;t<r.signers.length;++t){var n=r.signers[t],a=n.digestAlgorithm;a in e||(e[a]=d.md[d.pki.oids[a]].create()),0===n.authenticatedAttributes.length?n.md=e[a]:n.md=d.md[d.pki.oids[a]].create()}r.digestAlgorithmIdentifiers=[];for(var a in e)r.digestAlgorithmIdentifiers.push(h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(a).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.NULL,!1,"")]));return e}function t(e){if(r.contentInfo.value.length<2)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var t=h.derToOid(r.contentInfo.value[0].value),n=r.contentInfo.value[1];n=n.value[0];var a=h.toDer(n);a.getByte(),h.getBerValueLength(a),a=a.getBytes();for(var i in e)e[i].start().update(a);for(var s=new Date,o=0;o<r.signers.length;++o){var l=r.signers[o];if(0===l.authenticatedAttributes.length){if(t!==d.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=h.create(h.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=h.create(h.Class.UNIVERSAL,h.Type.SET,!0,[]),f=0;f<l.authenticatedAttributes.length;++f){var y=l.authenticatedAttributes[f];if(y.type===d.pki.oids.messageDigest)if(y.value&&"FALSE"==y.value){var n=r.contentInfo.value[1];n=n.value[0],n.value=new d.util.ByteStringBuffer(d.util.binary.base64.decode(decodeURIComponent(n.value))).data;var a=h.toDer(n);a.getByte(),h.getBerValueLength(a),y.value=a}else y.value=e[l.digestAlgorithm].digest();else y.type===d.pki.oids.signingTime&&(y.value||(y.value=s),s=y);p.value.push(c(y)),l.authenticatedAttributesAsn1.value.push(c(y))}a=h.toDer(p).getBytes(),l.md.start().update(a)}if(l.signatureAlgorithm===d.pki.oids.rsaEncryption)l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5");else if(l.signatureAlgorithm===d.pki.oids["RSASSA-PSS"]){var g=d.pss.create({md:d.md.sha256.create(),mgf:d.mgf.mgf1.create(d.md.sha256.create()),saltLength:32});l.signature=l.key.sign(l.md,g)}else l.signatureAlgorithm===d.pki.oids.kcdsa1&&(l.signature=l.key.sign(l.md,a));for(var m=0;m<l.unauthenticatedAttributes.length;++m){var y=l.unauthenticatedAttributes[m];if(y.type===d.pki.oids["initech-encrypted-random"]){var v=d.md.sha256.create();v.start();var C=h.dateToUtcTime(s.value?s.value:s);v.update(C);for(var E,o=0;o<2;o++)E=v.digest().getBytes(),v.start(),v.update(E);E=v.digest().getBytes();var T=E.substr(16,32);E=E.substr(0,16);var S=d.seed.createEncryptionCipher(E);S.start(T);var I=d.util.createBuffer(l.key.vidRandom);S.update(I),S.finish()&&(l.unauthenticatedAttributes[m].value=S.output.bytes())}else if(y.type===d.pki.oids.replay_attack){var v=d.md.sha256.create();v.start();var C=h.dateToUtcTime(s.value?s.value:s);v.update(C);for(var E,o=0;o<2;o++)E=v.digest().getBytes(),v.start(),v.update(E);E=v.digest().getBytes();var T=E.substr(16,32);E=E.substr(0,16);var S=d.seed.createEncryptionCipher(E);S.start(T);var I=d.util.createBuffer(y.data);S.update(I),S.finish()&&(l.unauthenticatedAttributes[m].value=S.output.bytes())}}}r.signerInfos=u(r.signers)}var r=null;return r={type:d.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(e){p(r,e,y.asn1.signedDataValidator),r.certificates=[],r.crls=[],r.digestAlgorithmIdentifiers=[],r.contentInfo=null,r.signerInfos=[];for(var t=r.rawCapture.certificates.value,n=0;n<t.length;++n)r.certificates.push(d.pki.certificateFromAsn1(t[n]))},toAsn1:function(){r.contentInfo||r.sign();for(var e=[],t=0;t<r.certificates.length;++t)e.push(d.pki.certificateToAsn1(r.certificates[t]));var n=[],a=h.create(h.Class.CONTEXT_SPECIFIC,0,!0,[h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,h.integerToDer(r.version).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SET,!0,r.digestAlgorithmIdentifiers),r.contentInfo])]);return e.length>0&&a.value[0].value.push(h.create(h.Class.CONTEXT_SPECIFIC,0,!0,e)),n.length>0&&a.value[0].value.push(h.create(h.Class.CONTEXT_SPECIFIC,1,!0,n)),a.value[0].value.push(h.create(h.Class.UNIVERSAL,h.Type.SET,!0,r.signerInfos)),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(r.type).getBytes()),a])},toAsn1WithoutContext:function(){r.contentInfo||r.sign();for(var e=[],t=0;t<r.certificates.length;++t)e.push(d.pki.certificateToAsn1(r.certificates[t]));var n=[],a=h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,h.integerToDer(r.version).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SET,!0,r.digestAlgorithmIdentifiers),r.contentInfo]);return e.length>0&&a.value.push(h.create(h.Class.CONTEXT_SPECIFIC,0,!0,e)),n.length>0&&a.value.push(h.create(h.Class.CONTEXT_SPECIFIC,1,!0,n)),a.value.push(h.create(h.Class.UNIVERSAL,h.Type.SET,!0,r.signerInfos)),a},addSigner:function(e){var t=e.issuer,n=e.serialNumber;if(e.certificate){var a=e.certificate;"string"==typeof a&&(a=d.pki.certificateFromPem(a)),t=a.issuer.attributes,n=a.serialNumber}var i=e.key;if(!i)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof i&&(i=d.pki.privateKeyFromPem(i));var s=e.digestAlgorithm||d.pki.oids.sha1;switch(s){case d.pki.oids.sha1:case d.pki.oids.sha256:case d.pki.oids.sha384:case d.pki.oids.sha512:case d.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+s)}var o=e.signatureAlgorithm||d.pki.oids.rsaEncryption;switch(o){case d.pki.oids.rsaEncryption:case d.pki.oids["RSASSA-PSS"]:case d.pki.oids.kcdsa1:break;default:throw new Error("Could not add PKCS#7 signer; unknown message signature algorithm: "+s)}var u=e.authenticatedAttributes||[];if(u.length>0){for(var c=!1,l=!1,p=0;p<u.length;++p){var f=u[p];if(c||f.type!==d.pki.oids.contentType){if(l||f.type!==d.pki.oids.messageDigest);else if(l=!0,c)break}else if(c=!0,l)break}if(!c||!l)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}var h=e.unauthenticatedAttributes||[];r.signers.push({key:i,version:1,issuer:t,serialNumber:n,digestAlgorithm:s,signatureAlgorithm:o,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:h})},sign:function(){if(("object"!=typeof r.content||null===r.contentInfo)&&(r.contentInfo=h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(d.pki.oids.data).getBytes())]),"content"in r)){var n;r.content instanceof d.util.ByteBuffer?n=r.content.bytes():"string"==typeof r.content&&(n=r.content),r.contentInfo.value.push(h.create(h.Class.CONTEXT_SPECIFIC,0,!0,[h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,n)]))}if(0!==r.signers.length){t(e())}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(e){"string"==typeof e&&(e=d.pki.certificateFromPem(e)),r.certificates.push(e)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},y.createEncryptedData=function(){var e=null;return e={type:d.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:d.pki.oids["aes256-CBC"]},fromAsn1:function(t){p(e,t,y.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),f(e)}}},y.createEnvelopedData=function(){var e=null;return e={type:d.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:d.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=p(e,t,y.asn1.envelopedDataValidator);e.recipients=i(r.recipientInfos.value)},toAsn1:function(){return h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(e.type).getBytes()),h.create(h.Class.CONTEXT_SPECIFIC,0,!0,[h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,h.integerToDer(e.version).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SET,!0,s(e.recipients)),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,l(e.encryptedContent))])])])},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var a=e.recipients[n],i=a.issuer;if(a.serialNumber===t.serialNumber&&i.length===r.length){for(var s=!0,o=0;o<r.length;++o)if(i[o].type!==r[o].type||i[o].value!==r[o].value){s=!1;break}if(s)return a}}return null},decrypt:function(t,r){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==r)switch(t.encryptedContent.algorithm){case d.pki.oids.rsaEncryption:case d.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=d.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}f(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:d.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(void 0===e.encryptedContent.content){r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var n,a,i;switch(r){case d.pki.oids["aes128-CBC"]:n=16,a=16,i=d.aes.createEncryptionCipher;break;case d.pki.oids["aes192-CBC"]:n=24,a=16,i=d.aes.createEncryptionCipher;break;case d.pki.oids["aes256-CBC"]:n=32,a=16,i=d.aes.createEncryptionCipher;break;case d.pki.oids["des-EDE3-CBC"]:n=24,a=8,i=d.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===t)t=d.util.createBuffer(d.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=d.util.createBuffer(d.random.getBytes(a));var s=i(t);if(s.start(e.encryptedContent.parameter.copy()),s.update(e.content),!s.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=s.output}for(var o=0;o<e.recipients.length;++o){var u=e.recipients[o];if(void 0===u.encryptedContent.content)switch(u.encryptedContent.algorithm){case d.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}}}},function(e,t,r){function n(e,t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var n=s.util.hexToBytes(r);e.putInt32(n.length),e.putBytes(n)}function a(e,t){e.putInt32(t.length),e.putString(t)}function i(){for(var e=s.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}var s=r(1);r(9),r(12),r(50),r(22),r(2);var o=s.ssh=s.ssh||{};o.privateKeyToPutty=function(e,t,r){r=r||"",t=t||"";var o=""===t?"none":"aes256-cbc",u="PuTTY-User-Key-File-2: ssh-rsa\r\n";u+="Encryption: "+o+"\r\n",u+="Comment: "+r+"\r\n";var c=s.util.createBuffer();a(c,"ssh-rsa"),n(c,e.e),n(c,e.n);var l=s.util.encode64(c.bytes(),64),p=Math.floor(l.length/66)+1;u+="Public-Lines: "+p+"\r\n",u+=l;var f=s.util.createBuffer();n(f,e.d),n(f,e.p),n(f,e.q),n(f,e.qInv);var d;if(t){var h=f.length()+16-1;h-=h%16;var y=i(f.bytes());y.truncate(y.length()-h+f.length()),f.putBuffer(y);var g=s.util.createBuffer();g.putBuffer(i("\0\0\0\0",t)),g.putBuffer(i("\0\0\0",t));var m=s.aes.createEncryptionCipher(g.truncate(8),"CBC");m.start(s.util.createBuffer().fillWithByte(0,16)),m.update(f.copy()),m.finish();var v=m.output;v.truncate(16),d=s.util.encode64(v.bytes(),64)}else d=s.util.encode64(f.bytes(),64);p=Math.floor(d.length/66)+1,u+="\r\nPrivate-Lines: "+p+"\r\n",u+=d;var C=i("putty-private-key-file-mac-key",t),E=s.util.createBuffer();a(E,"ssh-rsa"),a(E,o),a(E,r),E.putInt32(c.length()),E.putBuffer(c),E.putInt32(f.length()),E.putBuffer(f);var T=s.hmac.create();return T.start("sha1",C),T.update(E.bytes()),u+="\r\nPrivate-MAC: "+T.digest().toHex()+"\r\n"},o.publicKeyToOpenSSH=function(e,t){t=t||"";var r=s.util.createBuffer();return a(r,"ssh-rsa"),n(r,e.e),n(r,e.n),"ssh-rsa "+s.util.encode64(r.bytes())+" "+t},o.privateKeyToOpenSSH=function(e,t){return t?s.pki.encryptPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):s.pki.privateKeyToPem(e)},o.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||s.md.md5.create(),i=s.util.createBuffer();a(i,"ssh-rsa"),n(i,e.e),n(i,e.n),r.start(),r.update(i.getBytes());var o=r.digest();if("hex"===t.encoding){var u=o.toHex();return t.delimiter?u.match(/.{2}/g).join(t.delimiter):u}if("binary"===t.encoding)return o.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return o}},function(e,t,r){var n=r(1);r(62),r(63),r(2);var a="forge.task",i={},s=0;n.debug.set(a,"tasks",i);var o={};n.debug.set(a,"queues",o);var u="ready",c="running",l="blocked",p="sleeping",f="done",d="error",h="stop",y="start",g={};g[u]={},g[u][h]=u,g[u][y]=c,g[u].cancel=f,g[u].fail=d,g[c]={},g[c][h]=u,g[c][y]=c,g[c].block=l,g[c].unblock=c,g[c].sleep=p,g[c].wakeup=c,g[c].cancel=f,g[c].fail=d,g[l]={},g[l][h]=l,g[l][y]=l,g[l].block=l,g[l].unblock=l,g[l].sleep=l,g[l].wakeup=l,g[l].cancel=f,g[l].fail=d,g[p]={},g[p][h]=p,g[p][y]=p,g[p].block=p,g[p].unblock=p,g[p].sleep=p,g[p].wakeup=p,g[p].cancel=f,g[p].fail=d,g[f]={},g[f][h]=f,g[f][y]=f,g[f].block=f,g[f].unblock=f,g[f].sleep=f,g[f].wakeup=f,g[f].cancel=f,g[f].fail=d,g[d]={},g[d][h]=d,g[d][y]=d,g[d].block=d,g[d].unblock=d,g[d].sleep=d,g[d].wakeup=d,g[d].cancel=d,g[d].fail=d;var m=function(e){this.id=-1,this.name=e.name||"?",this.parent=e.parent||null,this.run=e.run,this.subtasks=[],this.error=!1,this.state=u,this.blocks=0,this.timeoutId=null,this.swapTime=null,this.userData=null,this.id=s++,i[this.id]=this};m.prototype.debug=function(e){e=e||"",n.log.debug(a,e,"[%s][%s] task:",this.id,this.name,this,"subtasks:",this.subtasks.length,"queue:",o)},m.prototype.next=function(e,t){"function"==typeof e&&(t=e,e=this.name);var r=new m({run:t,name:e,parent:this});return r.state=c,r.type=this.type,r.successCallback=this.successCallback||null,r.failureCallback=this.failureCallback||null,this.subtasks.push(r),this},m.prototype.parallel=function(e,t){return n.util.isArray(e)&&(t=e,e=this.name),this.next(e,function(r){var a=r;a.block(t.length);for(var i=0;i<t.length;i++){var s=e+"__parallel-"+r.id+"-"+i,o=i;!function(e,r){n.task.start({type:e,run:function(e){t[r](e)},success:function(e){a.unblock()},failure:function(e){a.unblock()}})}(s,o)}})},m.prototype.stop=function(){this.state=g[this.state][h]},m.prototype.start=function(){this.error=!1,this.state=g[this.state][y],this.state===c&&(this.start=new Date,this.run(this),C(this,0))},m.prototype.block=function(e){e=void 0===e?1:e,this.blocks+=e,this.blocks>0&&(this.state=g[this.state].block)},m.prototype.unblock=function(e){return e=void 0===e?1:e,this.blocks-=e,0===this.blocks&&this.state!==f&&(this.state=c,C(this,0)),this.blocks},m.prototype.sleep=function(e){e=void 0===e?0:e,this.state=g[this.state].sleep;var t=this;this.timeoutId=setTimeout(function(){t.timeoutId=null,t.state=c,C(t,0)},e)},m.prototype.wait=function(e){e.wait(this)},m.prototype.wakeup=function(){this.state===p&&(cancelTimeout(this.timeoutId),this.timeoutId=null,this.state=c,C(this,0))},m.prototype.cancel=function(){this.state=g[this.state].cancel,this.permitsNeeded=0,null!==this.timeoutId&&(cancelTimeout(this.timeoutId),this.timeoutId=null),this.subtasks=[]},m.prototype.fail=function(e){if(this.error=!0,E(this,!0),e)e.error=this.error,e.swapTime=this.swapTime,e.userData=this.userData,C(e,0);else{if(null!==this.parent){for(var t=this.parent;null!==t.parent;)t.error=this.error,t.swapTime=this.swapTime,t.userData=this.userData,t=t.parent;E(t,!0)}this.failureCallback&&this.failureCallback(this)}};var v=function(e){e.error=!1,e.state=g[e.state][y],setTimeout(function(){e.state===c&&(e.swapTime=+new Date,e.run(e),C(e,0))},0)},C=function(e,t){var r=t>30||+new Date-e.swapTime>20,n=function(t){if(t++,e.state===c)if(r&&(e.swapTime=+new Date),e.subtasks.length>0){var n=e.subtasks.shift();n.error=e.error,n.swapTime=e.swapTime,n.userData=e.userData,n.run(n),n.error||C(n,t)}else E(e),e.error||null!==e.parent&&(e.parent.error=e.error,e.parent.swapTime=e.swapTime,e.parent.userData=e.userData,C(e.parent,t))};r?setTimeout(n,0):n(t)},E=function(e,t){e.state=f,delete i[e.id],null===e.parent&&(e.type in o?0===o[e.type].length?n.log.error(a,"[%s][%s] task queue empty [%s]",e.id,e.name,e.type):o[e.type][0]!==e?n.log.error(a,"[%s][%s] task not first in queue [%s]",e.id,e.name,e.type):(o[e.type].shift(),0===o[e.type].length?delete o[e.type]:o[e.type][0].start()):n.log.error(a,"[%s][%s] task queue missing [%s]",e.id,e.name,e.type),t||(e.error&&e.failureCallback?e.failureCallback(e):!e.error&&e.successCallback&&e.successCallback(e)))};n.task=n.task||{},n.task.start=function(e){var t=new m({run:e.run,name:e.name||"?"});t.type=e.type,t.successCallback=e.success||null,t.failureCallback=e.failure||null,t.type in o?o[e.type].push(t):(o[t.type]=[t],v(t))},n.task.cancel=function(e){e in o&&(o[e]=[o[e][0]])},n.task.createCondition=function(){var e={tasks:{}};return e.wait=function(t){t.id in e.tasks||(t.block(),e.tasks[t.id]=t)},e.notify=function(){var t=e.tasks;e.tasks={};for(var r in t)t[r].unblock()},e}},function(e,t,r){(function(e){function t(e){console.log("requestOpt :",e);var t={};if(t.idn="1234561234567",t.caname=e.caname,t.reqCMD=e.reqCMD||"issue",t.msgType="genm","issue"==t.reqCMD||"reissue"==t.reqCMD)t.refCode=e.refCode,t.authKey=e.authKey;else if("renew"==t.reqCMD){if(e.signCert){t.signCert=e.signCert;var r=u.pki.certificateToAsn1(t.signCert);t.signCertDer=u.asn1.toDer(r)}else if(e.signCertDer)t.signCert=u.asn1.fromDer(e.signCertDer),t.signCertDer=e.signCertDer;else if(e.signCertPem){t.signCert=u.pki.certificateFromPem(e.signCertPem);var r=u.pki.certificateToAsn1(t.signCert);t.signCertDer=u.asn1.toDer(r)}if(e.kmCert){t.kmCert=e.kmCert;var n=u.pki.certificateToAsn1(t.kmCert);t.kmCertDer=u.asn1.toDer(n)}else if(e.kmCertDer)t.kmCert=u.asn1.fromDer(e.kmCertDer),t.kmCertDer=e.kmCertDer;else if(e.kmCertPem){t.kmCert=u.pki.certificateFromPem(e.kmCertPem);var n=u.pki.certificateToAsn1(t.kmCert);t.kmCertDer=u.asn1.toDer(n)}var a=parseInt(t.signCert.serialNumber,16);t.oldSerial=a.toString(),t.hexaSerial=t.signCert.serialNumber,e.signPriPem.toString().indexOf("-----BEGIN ENCRYPTED PRIVATE KEY-----")<0&&(e.signPriPem="-----BEGIN ENCRYPTED PRIVATE KEY-----\r\n"+e.signPriPem+"\r\n-----END ENCRYPTED PRIVATE KEY-----");var i=u.pki.encryptedPrivateKeyFromPem(e.signPriPem),s=u.pki.decryptPrivateKeyInfo(i,e.passKey);t.privateKey=u.pki.privateKeyFromAsn1(s)}return t}function n(e){return renew_extraCerts="","renew"==e.reqCMD&&(renew_extraCerts=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[u.asn1.fromDer(e.signCertDer,!0)])),renew_extraCerts}function a(e){return"issue"==e.reqCMD||"reissue"==e.reqCMD?(e.msgType="ir",e.msgTag=0):"renew"==e.reqCMD&&(e.msgType="kur",e.msgTag=7),e}function s(){var e={};return new Promise(function(t,r){console.log("genkey start!!!"),e.rsakesys=u.pki.rsa.generateKeyPair(2048),e.vidRandom=u.random.getBytes(20),t(e)})}function o(e){var t=u.util.decode64(e),r=u.util.createBuffer(t);r.read=7;var n=r.getBytes(),a=u.asn1.fromDer(n,!0);return l.genpFromAsn1(a)}!function(e){e.map||(e.map=function(e){for(var t=[],r=0;r<this.length;r++)void 0!==this[r]&&(t[r]=e(this[r]));return t}),e.filter||(e.filter=function(e){for(var t=[],r=0;r<this.length;r++)void 0!==this[r]&&e(this[r])&&(t[r]=this[r]);return t})}(Array.prototype);var u=r(1);r(3),r(2),r(18),r(24),r(64);var c=u.asn1,l=u.cmp=u.cmp||{};u.cmp=u.cmp||{},u.cmp.asn1=l;var p={name:"CertReqMessages",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"CertReqMessages.CertReqMsg",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"CertReqMessages.CertReqMsg.certReq",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"CertReqMessages.CertReqMsg.certReq.certReqId",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"CertReqMsgReqId"},{name:"CertReqMessages.CertReqMsg.certReq.certTemplate",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"CertReqMessages.CertReqMsg.certReq.certTemplate.SubjectPublicKeyInfo",tagClass:c.Class.CONTEXT_SPECIFIC,type:6,constructed:!0,value:[{name:"CertReqMessages.CertReqMsg.certReq.certTemplate.SubjectPublicKeyInfo.algorithm",tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:"CertReqMsgSubjectPublicKeyAlgorithm"},{name:"CertReqMessages.CertReqMsg.certReq.certTemplate.SubjectPublicKeyInfo.subjectPublicKey",tagClass:c.Class.UNIVERSAL,type:c.Type.BITSTRING,constructed:!1,capture:"CertReqMsgSubjectPublicKey"}]}]}]}]}]},f={name:"PKIStatusInfo",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,optional:!1,constructed:!0,value:[{name:"PKIStatusInfo.status",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,optional:!1,constructed:!1,capture:"PKIStatusInfo_Status"},{name:"PKIStatusInfo.PKIFreeText",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,optional:!0,constructed:!0,value:[{name:"PKIMessage.header.freeText.seq.text",tagClass:c.Class.UNIVERSAL,type:c.Type.UTF8,constructed:!1,capture:"PKIStatusInfo_statusString"}]},{name:"PKIStatusInfo.failInfo",tagClass:c.Class.UNIVERSAL,type:c.Type.BITSTRING,optional:!0,constructed:!1,capture:"PKIStatusInfo_failInfo"}]},d={name:"certifiedKeyPair",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,optional:!0,constructed:!0,value:[{name:"certifiedKeyPair.certOrEncCert0",tagClass:c.Class.CONTEXT_SPECIFIC,type:0,optional:!0,constructed:!0,value:[{name:"certifiedKeyPair.certOrEncCert.certificate",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,optional:!0,constructed:!0,captureAsn1:"CertRepMsgCertificate"}]},{name:"certifiedKeyPair.certOrEncCert1",tagClass:c.Class.CONTEXT_SPECIFIC,type:1,optional:!0,constructed:!0,value:[{name:"certifiedKeyPair.certOrEncCert.EncryptedValue",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,optional:!0,constructed:!0,captureAsn1:"CertRepMsgEncryptedValue",value:[{name:"certifiedKeyPair.certOrEncCert.EncryptedValue.intendedAlg",tagClass:c.Class.CONTEXT_SPECIFIC,type:0,optional:!0,constructed:!1,captureAsn1:"CertRepMsgEncryptedValueintendedAlg"},{name:"certifiedKeyPair.certOrEncCert.EncryptedValue.symmAlg",tagClass:c.Class.CONTEXT_SPECIFIC,type:1,optional:!0,constructed:!1,captureAsn1:"CertRepMsgEncryptedValuesymmAlg"},{name:"certifiedKeyPair.certOrEncCert.EncryptedValue.encSymmKey",tagClass:c.Class.CONTEXT_SPECIFIC,type:2,optional:!0,constructed:!1,capture:"CertRepMsgEncryptedValueencSymmKey"},{name:"certifiedKeyPair.certOrEncCert.EncryptedValue.keyAlg",tagClass:c.Class.CONTEXT_SPECIFIC,type:3,optional:!0,constructed:!1,captureAsn1:"CertRepMsgEncryptedValuekeyAlg"},{name:"certifiedKeyPair.certOrEncCert.EncryptedValue.valueHint",tagClass:c.Class.CONTEXT_SPECIFIC,type:4,optional:!0,constructed:!1,captureAsn1:"CertRepMsgEncryptedValuevalueHint"},{name:"certifiedKeyPair.certOrEncCert.EncryptedValue.encValue",tagClass:c.Class.UNIVERSAL,type:c.Type.BITSTRING,optional:!0,constructed:!1,capture:"CertRepMsgEncryptedValueencValue"}]}]}]},h={name:"CertRepMessage.response.CertResponse",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"CertRepMessage.response.CertResponse.certReqId",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"CertRepMsgCertReqId"},f,d,{name:"CertRepMessage.response.CertResponse.rspInfo",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,optional:!0,constructed:!1,capture:"CertRepMsgRspInfo"}]},y={name:"CertRepMessage",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,optional:!1,constructed:!0,value:[{name:"CertRepMessage.caPubs",tagClass:c.Class.CONTEXT_SPECIFIC,type:1,optional:!0,constructed:!0,value:[{name:"CertRepMessage.caPubslist",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,captureAsn1:"CertRepMsgCaPubsAsn"}]},{name:"CertRepMessage.response",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,optional:!0,constructed:!0,captureAsn1:"CertRepMsgCertsAsn",value:[{name:"CertRepMessage.response.CertResponse",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"CertRepMessage.response.CertResponse.certReqId",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"CertRepMsgCertReqId"},f,{name:"CertRepMessage.response.CertResponse.certifiedKeyPair",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,optional:!0,constructed:!0,captureAsn1:"CertifiedKeyPair"},{name:"CertRepMessage.response.CertResponse.rspInfo",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,optional:!0,constructed:!1,capture:"CertRepMsgRspInfo"}]}]}]},g={name:"KeyRecRepContent",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[f,{name:"KeyRecRepContent.newSigCert",tagClass:c.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"newSigCert"},{name:"KeyRecRepContent.caCerts",tagClass:c.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,captureAsn1:"caCerts"},{name:"KeyRecRepContent.keyPairHist",tagClass:c.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,captureAsn1:"CertifiedKeyPair",value:[d]}]},m=(c.Class.UNIVERSAL,c.Type.SEQUENCE,c.Class.UNIVERSAL,c.Type.SEQUENCE,c.Class.UNIVERSAL,c.Type.OID,c.Class.UNIVERSAL,{name:"ErrorMsgContent",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[f,{name:"ErrorMsgContent.errorCode",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,optional:!0,constructed:!1,capture:"errorCode"},{name:"ErrorMsgContent.PKIFreeText",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,optional:!0,constructed:!0,value:[{name:"ErrorMsgContent.PKIFreeText.errorDetails",tagClass:c.Class.UNIVERSAL,type:c.Type.UTF8,constructed:!1,capture:"errorDetails"}]}]}),v={name:"PKIMessage",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"PKIMessage.header",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"PKIMessage.header.pvno",tagClass:c.Class.UNIVERSAL,type:c.Type.INTEGER,constructed:!1,capture:"PKIMsgPvno"},{name:"PKIMessage.header.sender1",tagClass:c.Class.CONTEXT_SPECIFIC,type:1,optional:!0,capture:"PKIMsgSender"},{name:"PKIMessage.header.sender4",tagClass:c.Class.CONTEXT_SPECIFIC,type:4,optional:!0,capture:"PKIMsgSender",captureAsn1:"PKIMsgSenderAsn"},{name:"PKIMessage.header.recipient1",tagClass:c.Class.CONTEXT_SPECIFIC,type:1,optional:!0,capture:"PKIMsgRecipient",captureAsn1:"PKIMsgRecipientAsn"},{name:"PKIMessage.header.recipient4",tagClass:c.Class.CONTEXT_SPECIFIC,type:4,optional:!0,capture:"PKIMsgRecipient",captureAsn1:"PKIMsgRecipientAsn"},{name:"PKIMessage.header.messageTime",tagClass:c.Class.CONTEXT_SPECIFIC,type:0,optional:!0,constructed:!0,value:[{name:"PKIMessage.header.messageTime.time",tagClass:c.Class.UNIVERSAL,type:c.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"PKIMsgTime"}]},{name:"PKIMessage.header.protectionAlg",tagClass:c.Class.CONTEXT_SPECIFIC,type:1,optional:!0,constructed:!0,value:[{name:"PKIMessage.header.protectionAlg.AlgorithmIdentifier",tagClass:c.Class.UNIVERSAL,type:c.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PKIMessage.header.protectionAlg.AlgorithmIdentifier.algorithm",tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:"PKIMsgProtectionAlg"},{name:"PKIMessage.header.protectionAlg.AlgorithmIdentifier.parameters",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,optional:!0,captureAsn1:"PKIMsgProtectionAlgParam"}]}]},{name:"PKIMessage.header.senderKID",tagClass:c.Class.CONTEXT_SPECIFIC,type:2,optional:!0,constructed:!0,value:[{name:"PKIMessage.header.senderKID.kid",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:"PKIMsgSenderKID"}]},{name:"PKIMessage.header.recipKID",tagClass:c.Class.CONTEXT_SPECIFIC,type:3,optional:!0,constructed:!0,value:[{name:"PKIMessage.header.recipKID.kid",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:"PKIMsgRecipKID"}]},{name:"PKIMessage.header.transactionID",tagClass:c.Class.CONTEXT_SPECIFIC,type:4,optional:!0,constructed:!0,value:[{name:"PKIMessage.header.transactionID.tid",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:"PKIMsgTransactionID"}]},{name:"PKIMessage.header.senderNonce",tagClass:c.Class.CONTEXT_SPECIFIC,type:5,optional:!0,constructed:!0,value:[{name:"PKIMessage.header.senderNonce.snonce",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:"PKIMsgSenderNonce"}]},{name:"PKIMessage.header.recipNonce",tagClass:c.Class.CONTEXT_SPECIFIC,type:6,optional:!0,constructed:!0,value:[{name:"PKIMessage.header.recipNonce.rnonce",tagClass:c.Class.UNIVERSAL,type:c.Type.OCTETSTRING,constructed:!1,capture:"PKIMsgRecipNonce"}]},{name:"PKIMessage.header.freeText",tagClass:c.Class.CONTEXT_SPECIFIC,type:7,optional:!0,constructed:!0,value:[{name:"PKIMessage.header.freeText.seq",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"PKIMessage.header.freeText.seq.text",tagClass:c.Class.UNIVERSAL,type:c.Type.UTF8,constructed:!1,capture:"PKIMsgFreeText"}]}]},{name:"PKIMessage.header.generalInfo",tagClass:c.Class.CONTEXT_SPECIFIC,type:8,optional:!0,constructed:!0,value:[{name:"PKIMessage.header.generalInfo.InfoTypeAndValue",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,value:[{name:"PKIMessage.header.generalInfo.InfoTypeAndValue.infoType",tagClass:c.Class.UNIVERSAL,type:c.Type.OID,constructed:!1,capture:"PKIMsgGeneralInfoType"},{name:"PKIMessage.header.generalInfo.InfoTypeAndValue.infoValue",tagClass:c.Class.UNIVERSAL,optional:!0,captureAsn1:"PKIMsgGeneralInfoValueAsn"}]}]}]},{name:"PKIMessage.body (ir)",tagClass:c.Class.CONTEXT_SPECIFIC,type:0,optional:!0,constructed:!0,value:[p]},{name:"PKIMessage.body (ip)",tagClass:c.Class.CONTEXT_SPECIFIC,type:1,optional:!0,constructed:!0,value:[y]},{name:"PKIMessage.body (kur)",tagClass:c.Class.CONTEXT_SPECIFIC,type:7,optional:!0,constructed:!0,value:[p]},{name:"PKIMessage.body (kup)",tagClass:c.Class.CONTEXT_SPECIFIC,type:8,optional:!0,constructed:!0,value:[y]},{name:"PKIMessage.body (krr)",tagClass:c.Class.CONTEXT_SPECIFIC,type:9,optional:!0,constructed:!0,value:[p]},{name:"PKIMessage.body (krp)",tagClass:c.Class.CONTEXT_SPECIFIC,type:10,optional:!0,constructed:!0,value:[g]},{name:"PKIMessage.body (pkiconf)",tagClass:c.Class.CONTEXT_SPECIFIC,type:19,optional:!0,constructed:!0,value:[{}]},{name:"PKIMessage.body (genm)",tagClass:c.Class.CONTEXT_SPECIFIC,type:21,optional:!0,constructed:!0,value:[p]},{name:"PKIMessage.body (genp)",tagClass:c.Class.CONTEXT_SPECIFIC,type:22,optional:!0,constructed:!0,value:[{name:"GenRepContent",tagClass:c.Class.UNIVERSAL,type:c.Type.SEQUENCE,constructed:!0,captureAsn1:"GenRepContent"}]},{name:"PKIMessage.body (error)",tagClass:c.Class.CONTEXT_SPECIFIC,type:23,optional:!0,constructed:!0,value:[m]},{name:"PKIMessage.protection",tagClass:c.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"PKIMessage.protection.PKIProtection",tagClass:c.Class.UNIVERSAL,type:c.Type.BITSTRING,constructed:!1,capture:"PKIMsgProtection"}]},{name:"PKIMessage.extraCerts",tagClass:c.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"extraCerts"}]};l.signature=function(e,t){var r=e;r.value.length>2&&r.value.splice(2,r.value.length-2);var n=u.asn1.toDer(r),a=u.md.sha256.create();return a.update(n.data),t.sign(a)},l.make_protection=function(e,t){var r=e;r.value.length>2&&r.value.splice(2,r.value.length-2);var n=u.asn1.toDer(r),a="aaaaabbbbb"+t,i=u.md.sha1.create();i.update(a);var s=i.digest().getBytes();u.util.bytesToHex(s);i=u.md.sha1.create(),i.update(s);var o=i.digest().getBytes(),c=(u.util.bytesToHex(o),o[0]+o[1]+o[2]+o[3]+o[4]+o[5]+o[6]+o[7]),l=u.desmac.getMac(c,n);l.toHex();return l.data},l.pbm_hmac=function(e,t,r,n,a){var s=t+r,o=u.md.sha1.create();for(i=0;i<n;i++)o.update(s),s=o.digest().getBytes(),o=u.md.sha1.create();var c=(u.util.bytesToHex(s),u.hmac.create());c.start("sha1",s),c.update(e.data);var l=c.digest();l.toHex();return l},l.genpFromAsn1=function(e){var t={},r=[];if(!c.validate(e,v,t,r)){var n=new Error("Cannot read PKIMessage. ASN.1 object is not an PKIMessage.");throw n.errors=r,n}for(var a={},i=0;t.GenRepContent&&i<t.GenRepContent.value.length;++i){var s=c.derToOid(t.GenRepContent.value[i].value[0].value);"1.3.6.1.5.5.7.4.1"==s?a.caProtEncCert=t.GenRepContent.value[i].value[1]:"1.2.410.200005.1.10.1"==s&&(a.caCert=t.GenRepContent.value[i].value[1])}return a.capture=t,a},l.ipFromAsn1=function(e){var t={},r=[];if(!c.validate(e,v,t,r)){var n=new Error("Cannot read PKIMessage. ASN.1 object is not an PKIMessage.");throw n.errors=r,n}var a={};if(a.capture=t,t.CertRepMsgCertsAsn)for(var i=0;i<t.CertRepMsgCertsAsn.value.length;i++){var s={},o=[];if(!c.validate(t.CertRepMsgCertsAsn.value[i],h,s,o)){var n=new Error("Cannot read CertRepMessageResponse. ASN.1 object is not an CertRepMessageResponse.");throw n.errors=o,n}s.CertRepMsgCertificate?a.userCert=s.CertRepMsgCertificate:s.CertRepMsgEncryptedValue&&(a.enckmCertObj=s.CertRepMsgEncryptedValue,a.enckmCert=s)}else if(t.CertifiedKeyPair){var s={},o=[];if(!c.validate(t.CertifiedKeyPair.value[0].value[0],d,s,o)){var n=new Error("Cannot read CertRepMessageResponse. ASN.1 object is not an CertRepMessageResponse.");throw n.errors=o,n}s.CertRepMsgCertificate?a.userCert=s.CertRepMsgCertificate:s.CertRepMsgEncryptedValue&&(a.enckmCertObj=s.CertRepMsgEncryptedValue,a.enckmCert=s)}return t.newSigCert&&(a.userCert=t.newSigCert.value[0]),a.enckmCert&&(a.enckmCert.CertRepMsgEncryptedValueencSymmKey=a.enckmCert.CertRepMsgEncryptedValueencSymmKey.slice(1),a.enckmCert.CertRepMsgEncryptedValueencValue=a.enckmCert.CertRepMsgEncryptedValueencValue.slice(1)),a},l.makeHeader=function(e){if("SIGNGATE"==e.caname?e.pvno=0:e.pvno=1,"issue"==e.reqCMD||"reissue"==e.reqCMD?e.protectionAlg="1.2.840.113533.7.66.13":"renew"==e.reqCMD&&(e.protectionAlg="1.2.840.113549.1.1.11"),"issue"==e.reqCMD||"reissue"==e.reqCMD)e.senderKID=e.refCode;else if("renew"==e.reqCMD)if("genm"==e.msgType)e.senderKID=e.oldSerial,"CROSSCERT"==e.caname&&(e.senderKID=e.hexaSerial);else if("kur"==e.msgType){var t=e.signCert.getExtension("subjectKeyIdentifier");t&&(e.senderKID=u.util.hexToBytes(t.subjectKeyIdentifier))}if("genm"==e.msgType){if("issue"==e.reqCMD||"reissue"==e.reqCMD)e.recipKID="";else if("renew"==e.reqCMD){var t=e.signCert.getExtension("subjectKeyIdentifier");t&&(e.recipKID=u.util.hexToBytes(t.subjectKeyIdentifier))}}else if("ir"==e.msgType||"kur"==e.msgType){var r=u.pki.certificateFromAsn1(e.genp.caProtEncCert),t=r.getExtension("subjectKeyIdentifier");t&&(e.recipKID=u.util.hexToBytes(t.subjectKeyIdentifier))}"genm"==e.msgType&&(e.transactionID=u.random.getBytes(16)),"genm"==e.msgType&&("SIGNGATE"==e.caname?e.senderNonce=u.random.getBytes(128):e.senderNonce=u.random.getBytes(16)),"genm"==e.msgType?e.recipNonce="":"ir"==e.msgType||"kur"==e.msgType?e.genp.capture.PKIMsgSenderNonce&&(e.recipNonce=e.genp.capture.PKIMsgSenderNonce):"conf"==e.msgType&&""==e.recipNonce&&(e.ip&&e.ip.capture&&e.ip.capture.PKIMsgSenderNonce?e.recipNonce=e.ip.capture.PKIMsgSenderNonce:e.kup&&e.kup.capture&&e.kup.capture.PKIMsgSenderNonce&&(e.recipNonce=e.kup.capture.PKIMsgSenderNonce));var n=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[]);n.value.push(c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,c.integerToDer(e.pvno).getBytes())),"renew"!=e.reqCMD&&"genm"==e.msgType?"SIGNKOREA"==e.caname?n.value.push(c.create(c.Class.CONTEXT_SPECIFIC,1,!1,"INI_NEW")):n.value.push(c.create(c.Class.CONTEXT_SPECIFIC,1,!1," ")):n.value.push(c.create(c.Class.CONTEXT_SPECIFIC,4,!0,[c.create(c.Class.UNIVERSAL,48,!1,"")])),"renew"!=e.reqCMD&&"genm"==e.msgType?"SIGNGATE"==e.caname?n.value.push(c.create(c.Class.CONTEXT_SPECIFIC,1,!1," ")):n.value.push(c.create(c.Class.CONTEXT_SPECIFIC,4,!0,[c.create(c.Class.UNIVERSAL,48,!1,"")])):"renew"!=e.reqCMD||"SIGNGATE"!=e.caname&&"SIGNKOREA"!=e.caname?"SIGNGATE"==e.caname||"SIGNKOREA"==e.caname?n.value.push(c.create(c.Class.CONTEXT_SPECIFIC,1,!1," ")):n.value.push(c.create(c.Class.CONTEXT_SPECIFIC,4,!0,[c.create(c.Class.UNIVERSAL,48,!1,"")])):n.value.push(c.create(c.Class.CONTEXT_SPECIFIC,1,!1,"INI_RENEW"));var a=new Date;return e.genmtime=a,n.value.push(c.create(c.Class.CONTEXT_SPECIFIC,0,!0,[c.create(c.Class.UNIVERSAL,c.Type.GENERALIZEDTIME,!1,c.dateToGeneralizedTime(a))])),""!=e.protectionAlg&&("1.2.840.113549.1.1.11"==e.protectionAlg?n.value.push(c.create(c.Class.CONTEXT_SPECIFIC,1,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer("1.2.840.113549.1.1.11").getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")])])):"1.2.840.113533.7.66.13"==e.protectionAlg&&n.value.push(c.create(c.Class.CONTEXT_SPECIFIC,1,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer("1.2.840.113533.7.66.13").getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,"aaaaabbbbb"),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer("1.3.14.3.2.26").getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")]),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,c.integerToDer(2).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer("1.3.14.3.2.10").getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")])])])]))),n.value.push(c.create(c.Class.CONTEXT_SPECIFIC,2,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,e.senderKID)])),""!=e.recipKID&&n.value.push(c.create(c.Class.CONTEXT_SPECIFIC,3,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,e.recipKID)])),"SIGNGATE"!=e.caname&&n.value.push(c.create(c.Class.CONTEXT_SPECIFIC,4,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,e.transactionID)])),n.value.push(c.create(c.Class.CONTEXT_SPECIFIC,5,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,e.senderNonce)])),""!=e.recipNonce&&n.value.push(c.create(c.Class.CONTEXT_SPECIFIC,6,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,e.recipNonce)])),n},l.makegenm=function(e){if("SIGNGATE"==e.caname){var t=c.create(c.Class.CONTEXT_SPECIFIC,21,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer("1.3.6.1.5.5.7.4.1").getBytes())])])]);return t}var t=c.create(c.Class.CONTEXT_SPECIFIC,21,!0,[c.create(c.Class.UNIVERSAL,48,!0,[])]);return t},l.makeCertReqMsg=function(e){for(var t="",r=0;r<e.keyNum;r++){var n,a,i;0==r?(n=u.pki.publicKeyToAsn1(e.signKeys.publicKey),a=e.signKeys.privateKey,i=e.signCert):1==r&&(n=u.pki.publicKeyToAsn1(e.kmKeys.publicKey),a=e.kmKeys.privateKey,i=e.kmCert);var s=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[]);"renew"==e.reqCMD?(s.value.push(c.create(c.Class.CONTEXT_SPECIFIC,5,!0,[u.pki.distinguishedNameToAsn1(i.subject)])),s.value.push(c.create(c.Class.CONTEXT_SPECIFIC,6,!0,[n.value[0],n.value[1]]))):s.value.push(c.create(c.Class.CONTEXT_SPECIFIC,6,!0,[n.value[0],n.value[1]]));var o=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,c.integerToDer(r).getBytes()),s]);"renew"==e.reqCMD&&o.value.push(c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer("1.3.6.1.5.5.7.5.1.5").getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.CONTEXT_SPECIFIC,4,!0,[u.pki.distinguishedNameToAsn1(i.issuer)]),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,u.util.hexToBytes(i.serialNumber))])])]));var p=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[n.value[0],n.value[1]]),f=c.toDer(p),d=(u.util.bytesToHex(f),u.random.getBytes(16)),h=l.pbm_hmac(f,e.authKey,d,1024,"sha1"),y=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer("1.2.840.113533.7.66.13").getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,d),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer("1.3.14.3.2.26").getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")]),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,c.integerToDer(1024).getBytes()),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer("1.3.6.1.5.5.8.1.2").getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")])])]),c.create(c.Class.UNIVERSAL,c.Type.BITSTRING,!1,String.fromCharCode(0)+h.data)]),g=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[y,p]),m=c.create(c.Class.CONTEXT_SPECIFIC,0,!0,[y,p]),v=u.asn1.toDer(g),C=(u.util.bytesToHex(v),u.md.sha256.create());C.update(v.data);var E=a.sign(C),T=(u.util.bytesToHex(E),u.md.sha256.create());T.update(v.data);var S=u.pki.publicKeyFromAsn1(n),I=(S.verify(T.digest().bytes(),E),c.create(c.Class.CONTEXT_SPECIFIC,1,!0,[m,c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer("1.2.840.113549.1.1.11").getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")]),c.create(c.Class.UNIVERSAL,c.Type.BITSTRING,!1,String.fromCharCode(0)+E)])),A="";if(0==r){var b=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.PRINTABLESTRING,!1,e.idn),c.create(c.Class.UNIVERSAL,c.Type.BITSTRING,!1,String.fromCharCode(0)+e.vidRandom)]),N=c.toDer(b),B=(u.util.bytesToHex(N),u.md.sha256.create());B.update(N.data);var w=B.digest().getBytes();B=u.md.sha256.create(),B.update(w);var R=B.digest().getBytes(),k=(u.util.bytesToHex(R),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer("2.16.840.1.101.3.4.2.1").getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")]),c.create(c.Class.CONTEXT_SPECIFIC,0,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,R)])])),_=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[k,c.create(c.Class.UNIVERSAL,c.Type.BITSTRING,!1,String.fromCharCode(0)+e.vidRandom)]),U=c.toDer(_),L=(u.util.bytesToHex(U),"");L="SIGNGATE"==e.caname||"SIGNKOREA"==e.caname?u.pki.certificateFromAsn1(e.genp.caProtEncCert):u.pki.certificateFromAsn1(e.genp.caCert);var D=L.publicKey.encrypt(U.data,"RSAES-PKCS1-V1_5"),P=(u.util.bytesToHex(D),c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.CONTEXT_SPECIFIC,0,!0,[c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,c.integerToDer(0).getBytes())]),c.create(c.Class.CONTEXT_SPECIFIC,1,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer("2.16.840.1.101.3.4.2.1").getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")])]),c.create(c.Class.CONTEXT_SPECIFIC,2,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer("1.2.840.113549.1.1.1").getBytes()),c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")])]),c.create(c.Class.CONTEXT_SPECIFIC,3,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[u.pki.distinguishedNameToAsn1(L.issuer),c.create(c.Class.UNIVERSAL,c.Type.INTEGER,!1,u.util.hexToBytes(L.serialNumber))])]),c.create(c.Class.CONTEXT_SPECIFIC,4,!0,[c.create(c.Class.UNIVERSAL,c.Type.OCTETSTRING,!1,D)])]));A=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[c.create(c.Class.UNIVERSAL,c.Type.OID,!1,c.oidToDer("1.2.410.200004.10.1.1.2").getBytes()),P])])}0==r?(t=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[]),t.value.push(c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[o,I,A]))):1==r&&t.value.push(c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[o,I]))}return c.create(c.Class.CONTEXT_SPECIFIC,e.msgTag,!0,[t])},l.makeconf=function(e){return c.create(c.Class.CONTEXT_SPECIFIC,19,!0,[c.create(c.Class.UNIVERSAL,c.Type.NULL,!1,"")])},l.makePKIMsg=function(e,t,r,n){var a=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[t,r]),i="";return"issue"==e.reqCMD||"reissue"==e.reqCMD?i=l.make_protection(a,e.authKey):"renew"==e.reqCMD&&(i=l.signature(a,e.privateKey)),a.value.push(c.create(c.Class.CONTEXT_SPECIFIC,0,!0,[c.create(c.Class.UNIVERSAL,c.Type.BITSTRING,!1,String.fromCharCode(0)+i)])),n&&""!=n&&a.value.push(c.create(c.Class.CONTEXT_SPECIFIC,1,!0,[n])),a};var C=function(t,r,n){try{e.ajax({type:"POST",url:t,data:r,dataType:"text",success:function(e){try{n(e.trim())}catch(e){e.message&&console.log(e.message)}},tryCount:0,retryLimit:1,error:function(t,r,n){if(++this.tryCount<=this.retryLimit)return void e.ajax(this);console.log("code:"+t.status+"\nmessage:"+t.responseText+"\nstatus:"+r+"\nerror:"+n),INI_ALERT?INI_ALERT("인증서 발급증 오류가 발생 하였습니다.<br>"+t.responseTest,"ERROR"):alert(t.responseText)}})}catch(e){throw e}};l.requestYessSignWebCert=function(e,r){var i=t(e),p=l.makeHeader(i),p=l.makeHeader(i),f=l.makegenm(i),d=n(i),h=l.makePKIMsg(i,p,f,d),y=c.toDer(h),g={status:-1,statusString:""};Promise.all([E(e.cmp_gw_url,y.data),s()]).then(function(t){console.log("result :",t);var r=t[0],n=t[1],s=o(r);if(void 0!==s.capture.PKIStatusInfo_Status&&(g.status=c.derToInteger(s.capture.PKIStatusInfo_Status),0!=g.status))throw g.statusString=s.capture.PKIStatusInfo_statusString,g.statusString;void 0!==s.capture.PKIMsgFreeText&&(-1!==s.capture.PKIMsgFreeText.indexOf("km_key_gen=user")?(i.keyNum=2,i.kmKeys=u.pki.rsa.generateKeyPair(2048)):i.keyNum=1),i.genp=s,i=a(i),i.signKeys=n.rsakesys,i.vidRandom=n.vidRandom;var p=l.makeHeader(i),f=l.makeCertReqMsg(i),h=l.makePKIMsg(i,p,f,d),y=c.toDer(h);return console.log("requestOpt.cmp_gw_url :",e.cmp_gw_url),console.log(" req_der.data :",y.data),E(e.cmp_gw_url,y.data)}).then(function(t){console.log("dec_ip_kup :",t);var r=u.util.decode64(t),n=u.util.createBuffer(r);n.read=7;var a=n.getBytes(),s=u.asn1.fromDer(a,!0),o=l.ipFromAsn1(s),p=-1,f=" ";void 0!==o.capture.PKIStatusInfo_Status&&0!=(p=c.derToInteger(o.capture.PKIStatusInfo_Status))&&(f=o.capture.PKIStatusInfo_statusString,f=decodeURIComponent(encodeURIComponent(f))),g.status=p,g.statusString=f,g.passKey=e.passNewKey||"iniCMP12!@hello",g.signCert=u.pki.certificateFromAsn1(o.userCert),g.signCertDer=u.asn1.toDer(o.userCert),g.signCertPem=u.pki.certificateToPem(g.signCert);var h=i.signKeys.privateKey;if(h.vidRandom=i.vidRandom,g.signPriPem=u.pki.encryptPrivateKey(h,g.passKey),o.enckmCert){var y="SEED-CBC";"SIGNGATE"==i.caname&&(y="DES-OFB");var m=i.kmKeys.privateKey.decrypt(o.enckmCert.CertRepMsgEncryptedValueencSymmKey,"RSAES-PKCS1-V1_5"),v=(u.util.createBuffer(m).toHex(),u.cipher.createDecipher(y,m));v.start({iv:"0123456789012345"}),v.update(u.util.createBuffer(o.enckmCert.CertRepMsgEncryptedValueencValue));if(v.finish()){var C=v.output;g.kmCertDer=C,g.kmCertAsn1=u.asn1.fromDer(g.kmCertDer),g.kmCert=u.pki.certificateFromAsn1(g.kmCertAsn1),g.kmCertPem=u.pki.certificateToPem(g.kmCert);var h=i.kmKeys.privateKey;h.vidRandom=i.vidRandom,g.kmPriPem=u.pki.encryptPrivateKey(h,g.passKey)}}i.msgType="conf";var T=l.makeHeader(i),S=l.makeconf(i),I=l.makePKIMsg(i,T,S,d),A=c.toDer(I);return console.log("conf_der data :",A.data),E(e.cmp_gw_url,A.data)}).then(function(e){console.log("conf_res",e)}).catch(function(e){INI_ALERT("인증서 발급증 오류가 발생 하였습니다.<br>"+e,"ERROR"),GINI_LoadingIndicatorStop()}).finally(function(){console.log("========="),r(g)})};var E=function(t,r){var n=t,a=T(r);console.log("buffer :",a);var i=u.util.encode64(a.data);return console.log("req data :",i),new Promise(function(t,r){e.ajax({method:"POST",url:n,data:i,xhrFields:{withCredentials:!1},contentType:"application/pkixcmp"}).done(function(e){console.log("response : ",e),t(e)}).fail(function(e,t,n){console.log("data",e),console.log("textStatus",t),console.log("jqXHR",n),0==e.readyState&&(t="CMP 서버 연결이 거부되었습니다."),r(t)})})},T=function(e){var t=u.util.createBuffer();return t.putInt32(e.length+3),t.putByte(16),t.putByte(0),t.putByte(0),t.putBytes(e),t};l.requestCert=function(e,t){function r(r){function a(r){(!r||r.trim()<0||0<r.indexOf("[ERROR"))&&(INI_ALERT("인증서 발급증 오류가 발생 하였습니다.<br>"+r,"ERROR"),GINI_LoadingIndicatorStop());var a=u.util.decode64(r),i=u.asn1.fromDer(a,!0),s=l.ipFromAsn1(i),o=-1,f=" ";if(void 0!==s.capture.PKIStatusInfo_Status&&(o=c.derToInteger(s.capture.PKIStatusInfo_Status)),void 0!==s.capture.PKIStatusInfo_statusString){f=s.capture.PKIStatusInfo_statusString;u.util.bytesToHex(s.capture.PKIStatusInfo_statusString)}if(0!=o)p.status=o,p.statusString=decodeURIComponent(encodeURIComponent(f)),t(p);else{p.status=o,p.statusString=f,p.passKey=e.passNewKey||"iniCMP12!@hello",p.signCert=u.pki.certificateFromAsn1(s.userCert),p.signCertDer=u.asn1.toDer(s.userCert),p.signCertPem=u.pki.certificateToPem(p.signCert);var d=n.signKeys.privateKey;if(d.vidRandom=n.vidRandom,p.signPriPem=u.pki.encryptPrivateKey(d,p.passKey),s.enckmCert){var h="SEED-CBC";"SIGNGATE"==n.caname&&(h="DES-OFB");var y=n.kmKeys.privateKey.decrypt(s.enckmCert.CertRepMsgEncryptedValueencSymmKey,"RSAES-PKCS1-V1_5"),g=(u.util.createBuffer(y).toHex(),u.cipher.createDecipher(h,y));g.start({iv:"0123456789012345"}),g.update(u.util.createBuffer(s.enckmCert.CertRepMsgEncryptedValueencValue));if(g.finish()){var m=g.output;p.kmCertDer=m,p.kmCertAsn1=u.asn1.fromDer(p.kmCertDer),p.kmCert=u.pki.certificateFromAsn1(p.kmCertAsn1),p.kmCertPem=u.pki.certificateToPem(p.kmCert);var d=n.kmKeys.privateKey;d.vidRandom=n.vidRandom,p.kmPriPem=u.pki.encryptPrivateKey(d,p.passKey)}}}t(p)}(!r||r.trim()<0||0<r.indexOf("[ERROR"))&&(INI_ALERT("인증서 발급증 오류가 발생 하였습니다.<br>"+r,"ERROR"),GINI_LoadingIndicatorStop());var i=u.util.decode64(r),s=u.asn1.fromDer(i,!0),o=l.genpFromAsn1(s);n.genp=o;var p={status:-1,statusString:""};void 0!==o.capture.PKIStatusInfo_Status&&(p.status=c.derToInteger(o.capture.PKIStatusInfo_Status),0!=p.status&&(p.statusString=o.capture.PKIStatusInfo_statusString,t(p))),void 0!==o.capture.PKIMsgFreeText&&(-1!==o.capture.PKIMsgFreeText.indexOf("km_key_gen=user")?(n.keyNum=2,n.kmKeys=u.pki.rsa.generateKeyPair(2048)):n.keyNum=1),"issue"==n.reqCMD||"reissue"==n.reqCMD?"SIGNGATE"==n.caname&&"reissue"==n.reqCMD?(n.msgType="krr",n.msgTag=9):(n.msgType="ir",n.msgTag=0):"renew"==n.reqCMD&&(n.msgType="kur",n.msgTag=7),n.signKeys=u.pki.rsa.generateKeyPair(2048),n.vidRandom=u.random.getBytes(20);var d=l.makeHeader(n),h=l.makeCertReqMsg(n),y=l.makePKIMsg(n,d,h,f),v=c.toDer(y),E=(v.toHex(),u.util.encode64(v.data));n.msgType="conf";var T=l.makeHeader(n),S=l.makeconf(n),I=l.makePKIMsg(n,T,S,f),A=c.toDer(I),b=u.util.encode64(A.data),N="type=0&msg="+encodeURIComponent(m)+"&msg2="+encodeURIComponent(E)+"&msg3="+encodeURIComponent(b)+"&ip="+n.caip+"&port="+n.caport;g.data,v.data,A.data;C(n.cmp_gw_url2,N,a)}var n={};if(n.reqCMD=e.reqCMD||"issue","issue"==n.reqCMD||"reissue"==n.reqCMD)n.refCode=e.refCode,n.authKey=e.authKey;else if("renew"==n.reqCMD){if(e.signCert){n.signCert=e.signCert;var a=u.pki.certificateToAsn1(n.signCert);n.signCertDer=u.asn1.toDer(a)}else if(e.signCertDer)n.signCert=u.asn1.fromDer(e.signCertDer),n.signCertDer=e.signCertDer;else if(e.signCertPem){n.signCert=u.pki.certificateFromPem(e.signCertPem);var a=u.pki.certificateToAsn1(n.signCert);n.signCertDer=u.asn1.toDer(a)}if(e.kmCert){n.kmCert=e.kmCert;var i=u.pki.certificateToAsn1(n.kmCert);n.kmCertDer=u.asn1.toDer(i)}else if(e.kmCertDer)n.kmCert=u.asn1.fromDer(e.kmCertDer),n.kmCertDer=e.kmCertDer;else if(e.kmCertPem){n.kmCert=u.pki.certificateFromPem(e.kmCertPem);var i=u.pki.certificateToAsn1(n.kmCert);n.kmCertDer=u.asn1.toDer(i)}var s=parseInt(n.signCert.serialNumber,16);n.oldSerial=s.toString(),n.hexaSerial=n.signCert.serialNumber,e.signPriPem.toString().indexOf("-----BEGIN ENCRYPTED PRIVATE KEY-----")<0&&(e.signPriPem="-----BEGIN ENCRYPTED PRIVATE KEY-----\r\n"+e.signPriPem+"\r\n-----END ENCRYPTED PRIVATE KEY-----");var o=u.pki.encryptedPrivateKeyFromPem(e.signPriPem),p=u.pki.decryptPrivateKeyInfo(o,e.passKey);n.privateKey=u.pki.privateKeyFromAsn1(p)}n.cmp_gw_url=e.cmp_gw_url,n.cmp_gw_url2=e.cmp_gw_url2,n.caname=e.caname,n.idn="1234561234567",n.caip=e.caip,n.caport=e.caport;var f="";"renew"==n.reqCMD&&(f=c.create(c.Class.UNIVERSAL,c.Type.SEQUENCE,!0,[u.asn1.fromDer(n.signCertDer,!0)])),n.msgType="genm";var d=l.makeHeader(n),h=l.makegenm(n),y=l.makePKIMsg(n,d,h,f),g=c.toDer(y),m=u.util.encode64(g.data),v="type=0&msg="+encodeURIComponent(m)+"&ip="+encodeURIComponent(n.caip)+"&port="+n.caport;C(n.cmp_gw_url,v,r)}}).call(t,r(0))}])});